(function(e){"use strict";var t=function(e){if(!("default"in e))return e;var t=e.default;if(typeof t==="object"||typeof t==="function"){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&n!=="default"&&(t[n]=e[n])}return t};var n=function(e,t,n){typeof t==="symbol"&&(t=t.description?"[".concat(t.description,"]"):"");return Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})};var o=__bbb.me;var i=__bbb.Lb;var a=__bbb.Mb;var s=__bbb._b;var r=__bbb.bd;var d=__bbb.cc;var l=__bbb.ne;var c=__bbb.Hd;var _=__bbb.oe;var h=__bbb.oc;var p=__bbb.Fd;var u=__bbb.ie;var y=__bbb.je;var g=__bbb.ke;var m=__bbb.le;var f=function(){var n={};var i={exports:n};(function e(t,a){if(typeof n==="object"&&typeof i==="object")i.exports=a(o);else if(typeof define==="function"&&define.amd)define(["cose-base"],a);else if(typeof n==="object")n["cytoscapeCoseBilkent"]=a(o);else t["cytoscapeCoseBilkent"]=a(t["coseBase"])})(this,function(t){return function(e){var t={};function n(o){if(t[o]){return t[o].exports}var i=t[o]={i:o,l:!1,exports:{}};e[o].call(i.exports,i,i.exports,n);i.l=!0;return i.exports}n.m=e;n.c=t;n.i=function(e){return e};n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})};n.n=function(e){var t=e&&e.__esModule?function t(){return e["default"]}:function t(){return e};n.d(t,"a",t);return t};n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};n.p="";return n(n.s=1)}([function(e,n){e.exports=t},function(t,n,o){"use strict";var i=o(0).layoutBase.LayoutConstants;var a=o(0).layoutBase.FDLayoutConstants;var s=o(0).CoSEConstants;var r=o(0).CoSELayout;var d=o(0).CoSENode;var l=o(0).layoutBase.PointD;var c=o(0).layoutBase.DimensionD;var _={ready:function e(){},stop:function e(){},quality:"default",nodeDimensionsIncludeLabels:!1,refresh:30,fit:!0,padding:10,randomize:!0,nodeRepulsion:4500,idealEdgeLength:50,edgeElasticity:.45,nestingFactor:.1,gravity:.25,numIter:2500,tile:!0,animate:"end",animationDuration:500,tilingPaddingVertical:10,tilingPaddingHorizontal:10,gravityRangeCompound:1.5,gravityCompound:1,gravityRange:3.8,initialEnergyOnIncremental:.5};function h(e,t){var n={};for(var o in e){n[o]=e[o]}for(var o in t){n[o]=t[o]}return n}function p(e){this.options=h(_,e);u(this.options)}var u=function e(t){t.nodeRepulsion!=null&&(s.DEFAULT_REPULSION_STRENGTH=a.DEFAULT_REPULSION_STRENGTH=t.nodeRepulsion);t.idealEdgeLength!=null&&(s.DEFAULT_EDGE_LENGTH=a.DEFAULT_EDGE_LENGTH=t.idealEdgeLength);t.edgeElasticity!=null&&(s.DEFAULT_SPRING_STRENGTH=a.DEFAULT_SPRING_STRENGTH=t.edgeElasticity);t.nestingFactor!=null&&(s.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=a.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=t.nestingFactor);t.gravity!=null&&(s.DEFAULT_GRAVITY_STRENGTH=a.DEFAULT_GRAVITY_STRENGTH=t.gravity);t.numIter!=null&&(s.MAX_ITERATIONS=a.MAX_ITERATIONS=t.numIter);t.gravityRange!=null&&(s.DEFAULT_GRAVITY_RANGE_FACTOR=a.DEFAULT_GRAVITY_RANGE_FACTOR=t.gravityRange);t.gravityCompound!=null&&(s.DEFAULT_COMPOUND_GRAVITY_STRENGTH=a.DEFAULT_COMPOUND_GRAVITY_STRENGTH=t.gravityCompound);t.gravityRangeCompound!=null&&(s.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=a.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=t.gravityRangeCompound);t.initialEnergyOnIncremental!=null&&(s.DEFAULT_COOLING_FACTOR_INCREMENTAL=a.DEFAULT_COOLING_FACTOR_INCREMENTAL=t.initialEnergyOnIncremental);if(t.quality=="draft")i.QUALITY=0;else if(t.quality=="proof")i.QUALITY=2;else i.QUALITY=1;s.NODE_DIMENSIONS_INCLUDE_LABELS=a.NODE_DIMENSIONS_INCLUDE_LABELS=i.NODE_DIMENSIONS_INCLUDE_LABELS=t.nodeDimensionsIncludeLabels;s.DEFAULT_INCREMENTAL=a.DEFAULT_INCREMENTAL=i.DEFAULT_INCREMENTAL=!t.randomize;s.ANIMATE=a.ANIMATE=i.ANIMATE=t.animate;s.TILE=t.tile;s.TILING_PADDING_VERTICAL=typeof t.tilingPaddingVertical==="function"?t.tilingPaddingVertical.call():t.tilingPaddingVertical;s.TILING_PADDING_HORIZONTAL=typeof t.tilingPaddingHorizontal==="function"?t.tilingPaddingHorizontal.call():t.tilingPaddingHorizontal};p.prototype.run=function(){var t;var n;var o=this.options;this.idToLNode={};var i=this.layout=new r;var a=this;a.stopped=!1;this.cy=this.options.cy;this.cy.trigger({type:"layoutstart",layout:this});var s=i.newGraphManager();this.gm=s;var d=this.options.eles.nodes();var l=this.options.eles.edges();this.root=s.addRoot();this.processChildrenList(this.root,this.getTopMostNodes(d),i);for(var c=0;c<l.length;c++){var _=l[c],h=this.idToLNode[_.data("source")],p=this.idToLNode[_.data("target")];if(h!==p&&h.getEdgesBetween(p).length==0){var u=s.add(i.newEdge(),h,p);u.id=_.id()}}var y=function e(t,n){typeof t==="number"&&(t=n);var o=t.data("id");var i=a.idToLNode[o];return{x:i.getRect().getCenterX(),y:i.getRect().getCenterY()}};var g=function s(){var r=function e(){o.fit&&o.cy.fit(o.eles,o.padding);if(!t){t=!0;a.cy.one("layoutready",o.ready);a.cy.trigger({type:"layoutready",layout:a})}};var d=a.options.refresh;var l;for(var c=0;c<d&&!l;c++){l=a.stopped||a.layout.tick()}if(l){i.checkLayoutSuccess()&&!i.isSubLayout&&i.doPostLayout();i.tilingPostLayout&&i.tilingPostLayout();i.isLayoutFinished=!0;a.options.eles.nodes().positions(y);r();a.cy.one("layoutstop",a.options.stop);a.cy.trigger({type:"layoutstop",layout:a});n&&cancelAnimationFrame(n);t=!1;return}var _=a.layout.getPositionsData();o.eles.nodes().positions(function(t,n){typeof t==="number"&&(t=n);if(!t.isParent()){var o=t.id(),i=_[o],a=t;while(i==null){i=_[a.data("parent")]||_["DummyCompound_"+a.data("parent")];_[o]=i;a=a.parent()[0];if(a==e){break}}if(i!=null){return{x:i.x,y:i.y}}else{return{x:t.position("x"),y:t.position("y")}}}});r();n=requestAnimationFrame(s)};i.addListener("layoutstarted",function(){a.options.animate==="during"&&(n=requestAnimationFrame(g))});i.runLayout();if(this.options.animate!=="during"){a.options.eles.nodes().not(":parent").layoutPositions(a,a.options,y);t=!1}return this};p.prototype.getTopMostNodes=function(e){var t={};for(var n=0;n<e.length;n++){t[e[n].id()]=!0}var o=e.filter(function(e,n){typeof e==="number"&&(e=n);var o=e.parent()[0];while(o!=null){if(t[o.id()]){return!1}o=o.parent()[0]}return!0});return o};p.prototype.processChildrenList=function(e,t,n){var o=t.length;for(var i=0;i<o;i++){var a=t[i],s=a.children(),r,_=a.layoutDimensions({nodeDimensionsIncludeLabels:this.options.nodeDimensionsIncludeLabels});if(a.outerWidth()!=null&&a.outerHeight()!=null){r=e.add(new d(n.graphManager,new l(a.position("x")-_.w/2,a.position("y")-_.h/2),new c(parseFloat(_.w),parseFloat(_.h))))}else{r=e.add(new d(this.graphManager))}r.id=a.data("id");r.paddingLeft=parseInt(a.css("padding"));r.paddingTop=parseInt(a.css("padding"));r.paddingRight=parseInt(a.css("padding"));r.paddingBottom=parseInt(a.css("padding"));if(this.options.nodeDimensionsIncludeLabels){if(a.isParent()){var h=a.boundingBox({includeLabels:!0,includeNodes:!1}).w,p=a.boundingBox({includeLabels:!0,includeNodes:!1}).h,u=a.css("text-halign");r.labelWidth=h;r.labelHeight=p;r.labelPos=u}}this.idToLNode[a.data("id")]=r;isNaN(r.rect.x)&&(r.rect.x=0);isNaN(r.rect.y)&&(r.rect.y=0);if(s!=null&&s.length>0){var y;y=n.getGraphManager().add(n.newGraph(),r);this.processChildrenList(y,s,n)}}};p.prototype.stop=function(){this.stopped=!0;return this};var y=function e(t){t("layout","cose-bilkent",p)};typeof cytoscape!=="undefined"&&y(cytoscape);t.exports=y}])});return t(i.exports)}.call(window);var b;var k=function(){var e=i(function(e,t,n,o){for(n=n||{},o=e.length;o--;n[e[o]]=t);return n},"o"),t=[1,4],n=[1,13],o=[1,12],a=[1,15],s=[1,16],r=[1,20],d=[1,19],l=[6,7,8],c=[1,26],_=[1,24],h=[1,25],p=[6,7,11],u=[1,6,13,15,16,19,22],y=[1,33],g=[1,34],m=[1,6,7,11,13,15,16,19,22];var f={trace:i(function e(){},"trace"),yy:{},symbols_:{error:2,start:3,mindMap:4,spaceLines:5,SPACELINE:6,NL:7,MINDMAP:8,document:9,stop:10,EOF:11,statement:12,SPACELIST:13,node:14,ICON:15,CLASS:16,nodeWithId:17,nodeWithoutId:18,NODE_DSTART:19,NODE_DESCR:20,NODE_DEND:21,NODE_ID:22,$accept:0,$end:1},terminals_:{2:"error",6:"SPACELINE",7:"NL",8:"MINDMAP",11:"EOF",13:"SPACELIST",15:"ICON",16:"CLASS",19:"NODE_DSTART",20:"NODE_DESCR",21:"NODE_DEND",22:"NODE_ID"},productions_:[0,[3,1],[3,2],[5,1],[5,2],[5,2],[4,2],[4,3],[10,1],[10,1],[10,1],[10,2],[10,2],[9,3],[9,2],[12,2],[12,2],[12,2],[12,1],[12,1],[12,1],[12,1],[12,1],[14,1],[14,1],[18,3],[17,1],[17,4]],performAction:i(function e(t,n,o,i,a,s,r){var d=s.length-1;switch(a){case 6:case 7:return i;break;case 8:i.getLogger().trace("Stop NL ");break;case 9:i.getLogger().trace("Stop EOF ");break;case 11:i.getLogger().trace("Stop NL2 ");break;case 12:i.getLogger().trace("Stop EOF2 ");break;case 15:i.getLogger().info("Node: ",s[d].id);i.addNode(s[d-1].length,s[d].id,s[d].descr,s[d].type);break;case 16:i.getLogger().trace("Icon: ",s[d]);i.decorateNode({icon:s[d]});break;case 17:case 21:i.decorateNode({class:s[d]});break;case 18:i.getLogger().trace("SPACELIST");break;case 19:i.getLogger().trace("Node: ",s[d].id);i.addNode(0,s[d].id,s[d].descr,s[d].type);break;case 20:i.decorateNode({icon:s[d]});break;case 25:i.getLogger().trace("node found ..",s[d-2]);this.$={id:s[d-1],descr:s[d-1],type:i.getType(s[d-2],s[d])};break;case 26:this.$={id:s[d],descr:s[d],type:i.nodeType.DEFAULT};break;case 27:i.getLogger().trace("node found ..",s[d-3]);this.$={id:s[d-3],descr:s[d-1],type:i.getType(s[d-2],s[d])};break}},"anonymous"),table:[{3:1,4:2,5:3,6:[1,5],8:t},{1:[3]},{1:[2,1]},{4:6,6:[1,7],7:[1,8],8:t},{6:n,7:[1,10],9:9,12:11,13:o,14:14,15:a,16:s,17:17,18:18,19:r,22:d},e(l,[2,3]),{1:[2,2]},e(l,[2,4]),e(l,[2,5]),{1:[2,6],6:n,12:21,13:o,14:14,15:a,16:s,17:17,18:18,19:r,22:d},{6:n,9:22,12:11,13:o,14:14,15:a,16:s,17:17,18:18,19:r,22:d},{6:c,7:_,10:23,11:h},e(p,[2,22],{17:17,18:18,14:27,15:[1,28],16:[1,29],19:r,22:d}),e(p,[2,18]),e(p,[2,19]),e(p,[2,20]),e(p,[2,21]),e(p,[2,23]),e(p,[2,24]),e(p,[2,26],{19:[1,30]}),{20:[1,31]},{6:c,7:_,10:32,11:h},{1:[2,7],6:n,12:21,13:o,14:14,15:a,16:s,17:17,18:18,19:r,22:d},e(u,[2,14],{7:y,11:g}),e(m,[2,8]),e(m,[2,9]),e(m,[2,10]),e(p,[2,15]),e(p,[2,16]),e(p,[2,17]),{20:[1,35]},{21:[1,36]},e(u,[2,13],{7:y,11:g}),e(m,[2,11]),e(m,[2,12]),{21:[1,37]},e(p,[2,25]),e(p,[2,27])],defaultActions:{2:[2,1],6:[2,2]},parseError:i(function e(t,n){if(n.recoverable){this.trace(t)}else{var o=new Error(t);o.hash=n;throw o}},"parseError"),parse:i(function e(t){var n=this,o=[0],a=[],s=[null],r=[],d=this.table,l="",c=0,_=0,h=0,p=2,u=1;var y=r.slice.call(arguments,1);var g=Object.create(this.lexer);var m={yy:{}};for(var f in this.yy){Object.prototype.hasOwnProperty.call(this.yy,f)&&(m.yy[f]=this.yy[f])}g.setInput(t,m.yy);m.yy.lexer=g;m.yy.parser=this;typeof g.yylloc=="undefined"&&(g.yylloc={});var b=g.yylloc;r.push(b);var k=g.options&&g.options.ranges;if(typeof m.yy.parseError==="function"){this.parseError=m.yy.parseError}else{this.parseError=Object.getPrototypeOf(this).parseError}function E(e){o.length=o.length-2*e;s.length=s.length-e;r.length=r.length-e}i(E,"popStack");function $(){var e;e=a.pop()||g.lex()||u;if(typeof e!=="number"){if(e instanceof Array){a=e;e=a.pop()}e=n.symbols_[e]||e}return e}i($,"lex");var A,N,v,x,I,L={},S,C,D,w;while(!0){v=o[o.length-1];if(this.defaultActions[v]){x=this.defaultActions[v]}else{(A===null||typeof A=="undefined")&&(A=$());x=d[v]&&d[v][A]}if(typeof x==="undefined"||!x.length||!x[0]){var T="";w=[];for(S in d[v]){this.terminals_[S]&&S>p&&w.push("'"+this.terminals_[S]+"'")}if(g.showPosition){T="Parse error on line "+(c+1)+":\n"+g.showPosition()+"\nExpecting "+w.join(", ")+", got '"+(this.terminals_[A]||A)+"'"}else{T="Parse error on line "+(c+1)+": Unexpected "+(A==u?"end of input":"'"+(this.terminals_[A]||A)+"'")}this.parseError(T,{text:g.match,token:this.terminals_[A]||A,line:g.yylineno,loc:b,expected:w})}if(x[0]instanceof Array&&x.length>1){throw new Error("Parse Error: multiple actions possible at state: "+v+", token: "+A)}switch(x[0]){case 1:o.push(A);s.push(g.yytext);r.push(g.yylloc);o.push(x[1]);A=null;if(!N){_=g.yyleng;l=g.yytext;c=g.yylineno;b=g.yylloc;h>0&&h--}else{A=N;N=null}break;case 2:C=this.productions_[x[1]][1];L.$=s[s.length-C];L._$={first_line:r[r.length-(C||1)].first_line,last_line:r[r.length-1].last_line,first_column:r[r.length-(C||1)].first_column,last_column:r[r.length-1].last_column};k&&(L._$.range=[r[r.length-(C||1)].range[0],r[r.length-1].range[1]]);I=this.performAction.apply(L,[l,_,c,m.yy,x[1],s,r].concat(y));if(typeof I!=="undefined"){return I}if(C){o=o.slice(0,-1*C*2);s=s.slice(0,-1*C);r=r.slice(0,-1*C)}o.push(this.productions_[x[1]][0]);s.push(L.$);r.push(L._$);D=d[o[o.length-2]][o[o.length-1]];o.push(D);break;case 3:return!0}}return!0},"parse")};var b=function(){var e={EOF:1,parseError:i(function e(t,n){if(this.yy.parser){this.yy.parser.parseError(t,n)}else{throw new Error(t)}},"parseError"),setInput:i(function(e,t){this.yy=t||this.yy||{};this._input=e;this._more=this._backtrack=this.done=!1;this.yylineno=this.yyleng=0;this.yytext=this.matched=this.match="";this.conditionStack=["INITIAL"];this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0};this.options.ranges&&(this.yylloc.range=[0,0]);this.offset=0;return this},"setInput"),input:i(function(){var e=this._input[0];this.yytext+=e;this.yyleng++;this.offset++;this.match+=e;this.matched+=e;var t=e.match(/(?:\r\n?|\n).*/g);if(t){this.yylineno++;this.yylloc.last_line++}else{this.yylloc.last_column++}this.options.ranges&&this.yylloc.range[1]++;this._input=this._input.slice(1);return e},"input"),unput:i(function(e){var t=e.length;var n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input;this.yytext=this.yytext.substr(0,this.yytext.length-t);this.offset-=t;var o=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1);this.matched=this.matched.substr(0,this.matched.length-1);n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===o.length?this.yylloc.first_column:0)+o[o.length-n.length].length-n[0].length:this.yylloc.first_column-t};this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-t]);this.yyleng=this.yytext.length;return this},"unput"),more:i(function(){this._more=!0;return this},"more"),reject:i(function(){if(this.options.backtrack_lexer){this._backtrack=!0}else{return this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})}return this},"reject"),less:i(function(e){this.unput(this.match.slice(e))},"less"),pastInput:i(function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:i(function(){var e=this.match;e.length<20&&(e+=this._input.substr(0,20-e.length));return(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:i(function(){var e=this.pastInput();var t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},"showPosition"),test_match:i(function(e,t){var n,o,i;if(this.options.backtrack_lexer){i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done};this.options.ranges&&(i.yylloc.range=this.yylloc.range.slice(0))}o=e[0].match(/(?:\r\n?|\n).*/g);o&&(this.yylineno+=o.length);this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:o?o[o.length-1].length-o[o.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length};this.yytext+=e[0];this.match+=e[0];this.matches=e;this.yyleng=this.yytext.length;this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]);this._more=!1;this._backtrack=!1;this._input=this._input.slice(e[0].length);this.matched+=e[0];n=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]);this.done&&this._input&&(this.done=!1);if(n){return n}else if(this._backtrack){for(var a in i){this[a]=i[a]}return!1}return!1},"test_match"),next:i(function(){if(this.done){return this.EOF}this._input||(this.done=!0);var e,t,n,o;if(!this._more){this.yytext="";this.match=""}var i=this._currentRules();for(var a=0;a<i.length;a++){n=this._input.match(this.rules[i[a]]);if(n&&(!t||n[0].length>t[0].length)){t=n;o=a;if(this.options.backtrack_lexer){e=this.test_match(n,i[a]);if(e!==!1){return e}else if(this._backtrack){t=!1;continue}else{return!1}}else if(!this.options.flex){break}}}if(t){e=this.test_match(t,i[o]);if(e!==!1){return e}return!1}if(this._input===""){return this.EOF}else{return this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})}},"next"),lex:i(function e(){var t=this.next();if(t){return t}else{return this.lex()}},"lex"),begin:i(function e(t){this.conditionStack.push(t)},"begin"),popState:i(function e(){var t=this.conditionStack.length-1;if(t>0){return this.conditionStack.pop()}else{return this.conditionStack[0]}},"popState"),_currentRules:i(function e(){if(this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules}else{return this.conditions["INITIAL"].rules}},"_currentRules"),topState:i(function e(t){t=this.conditionStack.length-1-Math.abs(t||0);if(t>=0){return this.conditionStack[t]}else{return"INITIAL"}},"topState"),pushState:i(function e(t){this.begin(t)},"pushState"),stateStackSize:i(function e(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:i(function e(t,n,o,i){switch(o){case 0:t.getLogger().trace("Found comment",n.yytext);return 6;break;case 1:return 8;break;case 2:this.begin("CLASS");break;case 3:this.popState();return 16;break;case 4:this.popState();break;case 5:t.getLogger().trace("Begin icon");this.begin("ICON");break;case 6:t.getLogger().trace("SPACELINE");return 6;break;case 7:return 7;break;case 8:return 15;break;case 9:t.getLogger().trace("end icon");this.popState();break;case 10:t.getLogger().trace("Exploding node");this.begin("NODE");return 19;break;case 11:t.getLogger().trace("Cloud");this.begin("NODE");return 19;break;case 12:t.getLogger().trace("Explosion Bang");this.begin("NODE");return 19;break;case 13:t.getLogger().trace("Cloud Bang");this.begin("NODE");return 19;break;case 14:this.begin("NODE");return 19;break;case 15:this.begin("NODE");return 19;break;case 16:this.begin("NODE");return 19;break;case 17:this.begin("NODE");return 19;break;case 18:return 13;break;case 19:return 22;break;case 20:return 11;break;case 21:this.begin("NSTR2");break;case 22:return"NODE_DESCR";break;case 23:this.popState();break;case 24:t.getLogger().trace("Starting NSTR");this.begin("NSTR");break;case 25:t.getLogger().trace("description:",n.yytext);return"NODE_DESCR";break;case 26:this.popState();break;case 27:this.popState();t.getLogger().trace("node end ))");return"NODE_DEND";break;case 28:this.popState();t.getLogger().trace("node end )");return"NODE_DEND";break;case 29:this.popState();t.getLogger().trace("node end ...",n.yytext);return"NODE_DEND";break;case 30:this.popState();t.getLogger().trace("node end ((");return"NODE_DEND";break;case 31:this.popState();t.getLogger().trace("node end (-");return"NODE_DEND";break;case 32:this.popState();t.getLogger().trace("node end (-");return"NODE_DEND";break;case 33:this.popState();t.getLogger().trace("node end ((");return"NODE_DEND";break;case 34:this.popState();t.getLogger().trace("node end ((");return"NODE_DEND";break;case 35:t.getLogger().trace("Long description:",n.yytext);return 20;break;case 36:t.getLogger().trace("Long description:",n.yytext);return 20;break}},"anonymous"),rules:[/^(?:\s*%%.*)/i,/^(?:mindmap\b)/i,/^(?::::)/i,/^(?:.+)/i,/^(?:\n)/i,/^(?:::icon\()/i,/^(?:[\s]+[\n])/i,/^(?:[\n]+)/i,/^(?:[^\)]+)/i,/^(?:\))/i,/^(?:-\))/i,/^(?:\(-)/i,/^(?:\)\))/i,/^(?:\))/i,/^(?:\(\()/i,/^(?:\{\{)/i,/^(?:\()/i,/^(?:\[)/i,/^(?:[\s]+)/i,/^(?:[^\(\[\n\)\{\}]+)/i,/^(?:$)/i,/^(?:["][`])/i,/^(?:[^`"]+)/i,/^(?:[`]["])/i,/^(?:["])/i,/^(?:[^"]+)/i,/^(?:["])/i,/^(?:[\)]\))/i,/^(?:[\)])/i,/^(?:[\]])/i,/^(?:\}\})/i,/^(?:\(-)/i,/^(?:-\))/i,/^(?:\(\()/i,/^(?:\()/i,/^(?:[^\)\]\(\}]+)/i,/^(?:.+(?!\(\())/i],conditions:{CLASS:{rules:[3,4],inclusive:!1},ICON:{rules:[8,9],inclusive:!1},NSTR2:{rules:[22,23],inclusive:!1},NSTR:{rules:[25,26],inclusive:!1},NODE:{rules:[21,24,27,28,29,30,31,32,33,34,35,36],inclusive:!1},INITIAL:{rules:[0,1,2,5,6,7,10,11,12,13,14,15,16,17,18,19,20],inclusive:!0}}};return e}();f.lexer=b;function k(){this.yy={}}i(k,"Parser");k.prototype=f;f.Parser=k;return new k}();k.parser=k;var E={DEFAULT:0,NO_BORDER:0,ROUNDED_RECT:1,RECT:2,CIRCLE:3,CLOUD:4,BANG:5,HEXAGON:6};var $=(b=class{constructor(){this.nodes=[];this.count=0;this.elements={};this.getLogger=this.getLogger.bind(this);this.nodeType=E;this.clear();this.getType=this.getType.bind(this);this.getMindmap=this.getMindmap.bind(this);this.getElementById=this.getElementById.bind(this);this.getParent=this.getParent.bind(this);this.getMindmap=this.getMindmap.bind(this);this.addNode=this.addNode.bind(this);this.decorateNode=this.decorateNode.bind(this)}clear(){this.nodes=[];this.count=0;this.elements={}}getParent(e){for(let t=this.nodes.length-1;t>=0;t--){if(this.nodes[t].level<e){return this.nodes[t]}}return null}getMindmap(){return this.nodes.length>0?this.nodes[0]:null}addNode(e,t,n,o){var i,l,c,_;a.info("addNode",e,t,n,o);const h=s();let p=(l=(i=h.mindmap)===null||i===void 0?void 0:i.padding)!==null&&l!==void 0?l:r.mindmap.padding;switch(o){case this.nodeType.ROUNDED_RECT:case this.nodeType.RECT:case this.nodeType.HEXAGON:p*=2;break}const u={id:this.count++,nodeId:d(t,h),level:e,descr:d(n,h),type:o,children:[],width:(_=(c=h.mindmap)===null||c===void 0?void 0:c.maxNodeWidth)!==null&&_!==void 0?_:r.mindmap.maxNodeWidth,padding:p};const y=this.getParent(e);if(y){y.children.push(u);this.nodes.push(u)}else{if(this.nodes.length===0){this.nodes.push(u)}else{throw new Error(`There can be only one root. No parent could be found for ("${u.descr}")`)}}}getType(e,t){a.debug("In get type",e,t);switch(e){case"[":return this.nodeType.RECT;case"(":return t===")"?this.nodeType.ROUNDED_RECT:this.nodeType.CLOUD;case"((":return this.nodeType.CIRCLE;case")":return this.nodeType.CLOUD;case"))":return this.nodeType.BANG;case"{{":return this.nodeType.HEXAGON;default:return this.nodeType.DEFAULT}}setElementForId(e,t){this.elements[e]=t}getElementById(e){return this.elements[e]}decorateNode(e){if(!e){return}const t=s();const n=this.nodes[this.nodes.length-1];if(e.icon){n.icon=d(e.icon,t)}if(e.class){n.class=d(e.class,t)}}type2Str(e){switch(e){case this.nodeType.DEFAULT:return"no-border";case this.nodeType.RECT:return"rect";case this.nodeType.ROUNDED_RECT:return"rounded-rect";case this.nodeType.CIRCLE:return"circle";case this.nodeType.CLOUD:return"cloud";case this.nodeType.BANG:return"bang";case this.nodeType.HEXAGON:return"hexgon";default:return"no-border"}}getLogger(){return a}},n(b,"MindmapDB"),(()=>{i(b,"MindmapDB")})(),b);var A=12;var N=i(function(e,t,n,o){const i=5;t.append("path").attr("id","node-"+n.id).attr("class","node-bkg node-"+e.type2Str(n.type)).attr("d",`M0 ${n.height-i} v${-n.height+2*i} q0,-5 5,-5 h${n.width-2*i} q5,0 5,5 v${n.height-i} H0 Z`);t.append("line").attr("class","node-line-"+o).attr("x1",0).attr("y1",n.height).attr("x2",n.width).attr("y2",n.height)},"defaultBkg");var v=i(function(e,t,n){t.append("rect").attr("id","node-"+n.id).attr("class","node-bkg node-"+e.type2Str(n.type)).attr("height",n.height).attr("width",n.width)},"rectBkg");var x=i(function(e,t,n){const o=n.width;const i=n.height;const a=.15*o;const s=.25*o;const r=.35*o;const d=.2*o;t.append("path").attr("id","node-"+n.id).attr("class","node-bkg node-"+e.type2Str(n.type)).attr("d",`M0 0 a${a},${a} 0 0,1 ${o*.25},${-1*o*.1}\n      a${r},${r} 1 0,1 ${o*.4},${-1*o*.1}\n      a${s},${s} 1 0,1 ${o*.35},${1*o*.2}\n\n      a${a},${a} 1 0,1 ${o*.15},${1*i*.35}\n      a${d},${d} 1 0,1 ${-1*o*.15},${1*i*.65}\n\n      a${s},${a} 1 0,1 ${-1*o*.25},${o*.15}\n      a${r},${r} 1 0,1 ${-1*o*.5},${0}\n      a${a},${a} 1 0,1 ${-1*o*.25},${-1*o*.15}\n\n      a${a},${a} 1 0,1 ${-1*o*.1},${-1*i*.35}\n      a${d},${d} 1 0,1 ${o*.1},${-1*i*.65}\n\n    H0 V0 Z`)},"cloudBkg");var I=i(function(e,t,n){const o=n.width;const i=n.height;const a=.15*o;t.append("path").attr("id","node-"+n.id).attr("class","node-bkg node-"+e.type2Str(n.type)).attr("d",`M0 0 a${a},${a} 1 0,0 ${o*.25},${-1*i*.1}\n      a${a},${a} 1 0,0 ${o*.25},${0}\n      a${a},${a} 1 0,0 ${o*.25},${0}\n      a${a},${a} 1 0,0 ${o*.25},${1*i*.1}\n\n      a${a},${a} 1 0,0 ${o*.15},${1*i*.33}\n      a${a*.8},${a*.8} 1 0,0 ${0},${1*i*.34}\n      a${a},${a} 1 0,0 ${-1*o*.15},${1*i*.33}\n\n      a${a},${a} 1 0,0 ${-1*o*.25},${i*.15}\n      a${a},${a} 1 0,0 ${-1*o*.25},${0}\n      a${a},${a} 1 0,0 ${-1*o*.25},${0}\n      a${a},${a} 1 0,0 ${-1*o*.25},${-1*i*.15}\n\n      a${a},${a} 1 0,0 ${-1*o*.1},${-1*i*.33}\n      a${a*.8},${a*.8} 1 0,0 ${0},${-1*i*.34}\n      a${a},${a} 1 0,0 ${o*.1},${-1*i*.33}\n\n    H0 V0 Z`)},"bangBkg");var L=i(function(e,t,n){t.append("circle").attr("id","node-"+n.id).attr("class","node-bkg node-"+e.type2Str(n.type)).attr("r",n.width/2)},"circleBkg");function S(e,t,n,o,i){return e.insert("polygon",":first-child").attr("points",o.map(function(e){return e.x+","+e.y}).join(" ")).attr("transform","translate("+(i.width-t)/2+", "+n+")")}i(S,"insertPolygonShape");var C=i(function(e,t,n){const o=n.height;const i=4;const a=o/i;const s=n.width-n.padding+2*a;const r=[{x:a,y:0},{x:s-a,y:0},{x:s,y:-o/2},{x:s-a,y:-o},{x:a,y:-o},{x:0,y:-o/2}];S(t,s,o,r,n)},"hexagonBkg");var D=i(function(e,t,n){t.append("rect").attr("id","node-"+n.id).attr("class","node-bkg node-"+e.type2Str(n.type)).attr("height",n.height).attr("rx",n.padding).attr("ry",n.padding).attr("width",n.width)},"roundedRectBkg");var w=i(async function(e,t,n,o,i){const a=i.htmlLabels;const s=o%(A-1);const r=t.append("g");n.section=s;let d="section-"+s;s<0&&(d+=" section-root");r.attr("class",(n.class?n.class+" ":"")+"mindmap-node "+d);const _=r.append("g");const h=r.append("g");const p=n.descr.replace(/(<br\/*>)/g,"\n");await l(h,p,{useHtmlLabels:a,width:n.width,classes:"mindmap-node-label"},i);a||h.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle");const u=h.node().getBBox();const[y]=c(i.fontSize);n.height=u.height+y*1.1*.5+n.padding;n.width=u.width+2*n.padding;if(n.icon){if(n.type===e.nodeType.CIRCLE){n.height+=50;n.width+=50;let e=r.append("foreignObject").attr("height","50px").attr("width",n.width).attr("style","text-align: center;");e.append("div").attr("class","icon-container").append("i").attr("class","node-icon-"+s+" "+n.icon);h.attr("transform","translate("+n.width/2+", "+(n.height/2-1.5*n.padding)+")")}else{n.width+=50;let e=n.height;n.height=Math.max(e,60);let t=Math.abs(n.height-e),o=r.append("foreignObject").attr("width","60px").attr("height",n.height).attr("style","text-align: center;margin-top:"+t/2+"px;");o.append("div").attr("class","icon-container").append("i").attr("class","node-icon-"+s+" "+n.icon);h.attr("transform","translate("+(25+n.width/2)+", "+(t/2+n.padding/2)+")")}}else{if(!a){let e=n.width/2,t=n.padding/2;h.attr("transform","translate("+e+", "+t+")")}else{let e=(n.width-u.width)/2,t=(n.height-u.height)/2;h.attr("transform","translate("+e+", "+t+")")}}switch(n.type){case e.nodeType.DEFAULT:N(e,_,n,s);break;case e.nodeType.ROUNDED_RECT:D(e,_,n,s);break;case e.nodeType.RECT:v(e,_,n,s);break;case e.nodeType.CIRCLE:_.attr("transform","translate("+n.width/2+", "+ +n.height/2+")");L(e,_,n,s);break;case e.nodeType.CLOUD:x(e,_,n,s);break;case e.nodeType.BANG:I(e,_,n,s);break;case e.nodeType.HEXAGON:C(e,_,n,s);break}e.setElementForId(n.id,r);return n.height},"drawNode");var T=i(function(e,t){const n=e.getElementById(t.id);const o=t.x||0;const i=t.y||0;n.attr("transform","translate("+o+","+i+")")},"positionNode");_.use(f);async function V(e,t,n,o,i){await w(e,t,n,o,i);n.children&&await Promise.all(n.children.map((n,a)=>V(e,t,n,o<0?a:o,i)))}i(V,"drawNodes");function F(e,t){t.edges().map((t,n)=>{const o=t.data();if(t[0]._private.bodyBounds){let i=t[0]._private.rscratch;a.trace("Edge: ",n,o);e.insert("path").attr("d",`M ${i.startX},${i.startY} L ${i.midX},${i.midY} L${i.endX},${i.endY} `).attr("class","edge section-edge-"+o.section+" edge-depth-"+o.depth)}})}i(F,"drawEdges");function O(e,t,n,o){t.add({group:"nodes",data:{id:e.id.toString(),labelText:e.descr,height:e.height,width:e.width,level:o,nodeId:e.id,padding:e.padding,type:e.type},position:{x:e.x,y:e.y}});e.children&&e.children.forEach(i=>{O(i,t,n,o+1);t.add({group:"edges",data:{id:`${e.id}_${i.id}`,source:e.id,target:i.id,depth:o,section:i.section}})})}i(O,"addNodes");function R(e,t){return new Promise(n=>{const o=h("body").append("div").attr("id","cy").attr("style","display:none");const i=_({container:document.getElementById("cy"),style:[{selector:"edge",style:{"curve-style":"bezier"}}]});o.remove();O(e,i,t,0);i.nodes().forEach(function(e){e.layoutDimensions=(()=>{const t=e.data();return{w:t.width,h:t.height}})});i.layout({name:"cose-bilkent",quality:"proof",styleEnabled:!1,animate:!1}).run();i.ready(e=>{a.info("Ready",e);n(i)})})}i(R,"layoutMindmap");function W(e,t){t.nodes().map((t,n)=>{const o=t.data();o.x=t.position().x;o.y=t.position().y;T(e,o);const i=e.getElementById(o.nodeId);a.info("id:",n,"Position: (",t.position().x,", ",t.position().y,")",o);i.attr("transform",`translate(${t.position().x-o.width/2}, ${t.position().y-o.height/2})`);i.attr("attr",`apa-${n})`)})}i(W,"positionNodes");var P=i(async(e,t,n,o)=>{var i,d,l,c;a.debug("Rendering mindmap diagram\n"+e);const _=o.db;const h=_.getMindmap();if(!h){return}const y=s();y.htmlLabels=!1;const g=p(t);const m=g.append("g");m.attr("class","mindmap-edges");const f=g.append("g");f.attr("class","mindmap-nodes");await V(_,f,h,-1,y);const b=await R(h,y);F(m,b);W(_,b);u(void 0,g,(d=(i=y.mindmap)===null||i===void 0?void 0:i.padding)!==null&&d!==void 0?d:r.mindmap.padding,(c=(l=y.mindmap)===null||l===void 0?void 0:l.useMaxWidth)!==null&&c!==void 0?c:r.mindmap.useMaxWidth)},"draw");var M={draw:P};var B=i(e=>{let t="";for(let t=0;t<e.THEME_COLOR_LIMIT;t++){e["lineColor"+t]=e["lineColor"+t]||e["cScaleInv"+t];if(y(e["lineColor"+t])){e["lineColor"+t]=g(e["lineColor"+t],20)}else{e["lineColor"+t]=m(e["lineColor"+t],20)}}for(let n=0;n<e.THEME_COLOR_LIMIT;n++){let o=""+(17-3*n);t+=`\n    .section-${n-1} rect, .section-${n-1} path, .section-${n-1} circle, .section-${n-1} polygon, .section-${n-1} path  {\n      fill: ${e["cScale"+n]};\n    }\n    .section-${n-1} text {\n     fill: ${e["cScaleLabel"+n]};\n    }\n    .node-icon-${n-1} {\n      font-size: 40px;\n      color: ${e["cScaleLabel"+n]};\n    }\n    .section-edge-${n-1}{\n      stroke: ${e["cScale"+n]};\n    }\n    .edge-depth-${n-1}{\n      stroke-width: ${o};\n    }\n    .section-${n-1} line {\n      stroke: ${e["cScaleInv"+n]} ;\n      stroke-width: 3;\n    }\n\n    .disabled, .disabled circle, .disabled text {\n      fill: lightgray;\n    }\n    .disabled text {\n      fill: #efefef;\n    }\n    `}return t},"genSections");var U=i(e=>`\n  .edge {\n    stroke-width: 3;\n  }\n  ${B(e)}\n  .section-root rect, .section-root path, .section-root circle, .section-root polygon  {\n    fill: ${e.git0};\n  }\n  .section-root text {\n    fill: ${e.gitBranchLabel0};\n  }\n  .icon-container {\n    height:100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n  .edge {\n    fill: none;\n  }\n  .mindmap-node-label {\n    dy: 1em;\n    alignment-baseline: middle;\n    text-anchor: middle;\n    dominant-baseline: middle;\n    text-align: center;\n  }\n`,"getStyles")
var G={get db(){return new $},renderer:M,parser:k,styles:U};var H={diagram:G};__bbb.O=H}).call(this)