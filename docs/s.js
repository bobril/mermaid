(function(e){"use strict";var t=function(e){if(!("default"in e))return e;var t=e.default;if(typeof t==="object"||typeof t==="function"){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&r!=="default"&&(t[r]=e[r])}return t};var r=function(e,t,r){typeof t==="symbol"&&(t=t.description?"[".concat(t.description,"]"):"");return Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})};var n=function(t,r){var n=__bbb;var a=n[r];if(a!==e){if(a instanceof Promise)return a;return Promise.resolve(a)}a=new Promise(function(o,i){var s=document.createElement("script");var l=setTimeout(c,12e4);function c(){s.onload=s.onerror=e;clearTimeout(l);if(n[r]===a){n[r]=e;i(new Error("Fail to load "+t))}else o(n[r])}s.charset="utf-8";s.onload=s.onerror=c;s.src=t;document.head.appendChild(s)});return n[r]=a};var a=__bbb.Lc;var o=__bbb.nb;var i=__bbb.Mc;var s=__bbb.Nc;var l=__bbb.mb;var c=__bbb.Oc;var u=__bbb.Pc;var d=__bbb.Qc;var p=__bbb.Rc;var m=__bbb.Sc;var f=__bbb.Tc;var h=__bbb.lb;var _=__bbb.Cb;var g=__bbb.Bb;var y=__bbb.$;var x=__bbb.Lb;var T=__bbb.Uc;var k=__bbb.Ya;var v=__bbb.sb;var R=__bbb.Vc;var A=__bbb.ub;var C=__bbb.Db;var I=__bbb.fb;var E=__bbb.zb;var S=__bbb.Wc;var P=__bbb.Xc;var N=__bbb.Yc;var b=__bbb.qa;var O=__bbb.eb;var L=__bbb.ba;var w=__bbb.Zc;var $=__bbb.Gb;var D=__bbb.$c;var M=__bbb._c;var F=__bbb.ad;var G=__bbb._;__bbb.bd;var K=__bbb.tb;var U=__bbb.cd;function V(e){return typeof e==="object"&&e!==null&&typeof e.$type==="string"}function B(e){return typeof e==="object"&&e!==null&&typeof e.$refText==="string"}function j(e){return typeof e==="object"&&e!==null&&typeof e.name==="string"&&typeof e.type==="string"&&typeof e.path==="string"}function W(e){return typeof e==="object"&&e!==null&&V(e.container)&&B(e.reference)&&typeof e.message==="string"}class AbstractAstReflection{constructor(){this.subtypes={};this.allSubtypes={}}isInstance(e,t){return V(e)&&this.isSubtype(e.$type,t)}isSubtype(t,r){if(t===r){return!0}let n=this.subtypes[t];n||(n=this.subtypes[t]={});const a=n[r];if(a!==e){return a}else{let e=this.computeIsSubtype(t,r);n[r]=e;return e}}getAllSubTypes(e){const t=this.allSubtypes[e];if(t){return t}else{let t=this.getAllTypes(),r=[];for(const n of t){this.isSubtype(n,e)&&r.push(n)}this.allSubtypes[e]=r;return r}}}function z(e){return typeof e==="object"&&e!==null&&Array.isArray(e.content)}function H(e){return typeof e==="object"&&e!==null&&typeof e.tokenType==="object"}function X(e){return z(e)&&typeof e.fullText==="string"}var J;var q={};class StreamImpl{constructor(e,t){this.startFn=e;this.nextFn=t}iterator(){const e={state:this.startFn(),next:()=>this.nextFn(e.state),[Symbol.iterator]:()=>e};return e}[Symbol.iterator](){return this.iterator()}isEmpty(){const e=this.iterator();return Boolean(e.next().done)}count(){const e=this.iterator();let t=0;let r=e.next();while(!r.done){t++;r=e.next()}return t}toArray(){const t=[];const r=this.iterator();let n;do{n=r.next();n.value!==e&&t.push(n.value)}while(!n.done);return t}toSet(){return new Set(this)}toMap(e,t){const r=this.map(r=>[e?e(r):r,t?t(r):r]);return new Map(r)}toString(){return this.join()}concat(e){return new StreamImpl(()=>({first:this.startFn(),firstDone:!1,iterator:e[Symbol.iterator]()}),e=>{let t;if(!e.firstDone){do{t=this.nextFn(e.first);if(!t.done){return t}}while(!t.done);e.firstDone=!0}do{t=e.iterator.next();if(!t.done){return t}}while(!t.done);return J})}join(e=","){const t=this.iterator();let r="";let n;let a=!1;do{n=t.next();if(!n.done){a&&(r+=e);r+=Y(n.value)}a=!0}while(!n.done);return r}indexOf(e,t=0){const r=this.iterator();let n=0;let a=r.next();while(!a.done){if(n>=t&&a.value===e){return n}a=r.next();n++}return-1}every(e){const t=this.iterator();let r=t.next();while(!r.done){if(!e(r.value)){return!1}r=t.next()}return!0}some(e){const t=this.iterator();let r=t.next();while(!r.done){if(e(r.value)){return!0}r=t.next()}return!1}forEach(e){const t=this.iterator();let r=0;let n=t.next();while(!n.done){e(n.value,r);n=t.next();r++}}map(e){return new StreamImpl(this.startFn,t=>{const{done:r,value:n}=this.nextFn(t);if(r){return J}else{return{done:!1,value:e(n)}}})}filter(e){return new StreamImpl(this.startFn,t=>{let r;do{r=this.nextFn(t);if(!r.done&&e(r.value)){return r}}while(!r.done);return J})}nonNullable(){return this.filter(t=>t!==e&&t!==null)}reduce(t,r){const n=this.iterator();let a=r;let o=n.next();while(!o.done){if(a===e){a=o.value}else{a=t(a,o.value)}o=n.next()}return a}reduceRight(e,t){return this.recursiveReduce(this.iterator(),e,t)}recursiveReduce(t,r,n){const a=t.next();if(a.done){return n}const o=this.recursiveReduce(t,r,n);if(o===e){return a.value}return r(o,a.value)}find(t){const r=this.iterator();let n=r.next();while(!n.done){if(t(n.value)){return n.value}n=r.next()}return e}findIndex(e){const t=this.iterator();let r=0;let n=t.next();while(!n.done){if(e(n.value)){return r}n=t.next();r++}return-1}includes(e){const t=this.iterator();let r=t.next();while(!r.done){if(r.value===e){return!0}r=t.next()}return!1}flatMap(t){return new StreamImpl(()=>({this:this.startFn()}),r=>{do{if(r.iterator){let t=r.iterator.next();if(t.done){r.iterator=e}else{return t}}let{done:n,value:a}=this.nextFn(r.this);if(!n){let e=t(a);if(Z(e)){r.iterator=e[Symbol.iterator]()}else{return{done:!1,value:e}}}}while(r.iterator);return J})}flat(t){t===e&&(t=1);if(t<=0){return this}const r=t>1?this.flat(t-1):this;return new StreamImpl(()=>({this:r.startFn()}),t=>{do{if(t.iterator){let r=t.iterator.next();if(r.done){t.iterator=e}else{return r}}let{done:n,value:a}=r.nextFn(t.this);if(!n){if(Z(a)){t.iterator=a[Symbol.iterator]()}else{return{done:!1,value:a}}}}while(t.iterator);return J})}head(){const t=this.iterator();const r=t.next();if(r.done){return e}return r.value}tail(e=1){return new StreamImpl(()=>{const t=this.startFn();for(let r=0;r<e;r++){let e=this.nextFn(t);if(e.done){return t}}return t},this.nextFn)}limit(e){return new StreamImpl(()=>({size:0,state:this.startFn()}),t=>{t.size++;if(t.size>e){return J}return this.nextFn(t.state)})}distinct(e){return new StreamImpl(()=>({set:new Set,internalState:this.startFn()}),t=>{let r;do{r=this.nextFn(t.internalState);if(!r.done){let n=e?e(r.value):r.value;if(!t.set.has(n)){t.set.add(n);return r}}}while(!r.done);return J})}exclude(e,t){const r=new Set;for(const n of e){let e=t?t(n):n;r.add(e)}return this.filter(e=>{const n=t?t(e):e;return!r.has(n)})}}function Y(e){if(typeof e==="string"){return e}if(typeof e==="undefined"){return"undefined"}if(typeof e.toString==="function"){return e.toString()}return Object.prototype.toString.call(e)}function Z(e){return!!e&&typeof e[Symbol.iterator]==="function"}var Q=new StreamImpl(()=>e,()=>J);J=Object.freeze({done:!0,value:e});function ee(...t){if(t.length===1){let e=t[0];if(e instanceof StreamImpl){return e}if(Z(e)){return new StreamImpl(()=>e[Symbol.iterator](),e=>e.next())}if(typeof e.length==="number"){return new StreamImpl(()=>({index:0}),t=>{if(t.index<e.length){return{done:!1,value:e[t.index++]}}else{return J}})}}if(t.length>1){return new StreamImpl(()=>({collIndex:0,arrIndex:0}),r=>{do{if(r.iterator){let t=r.iterator.next();if(!t.done){return t}r.iterator=e}if(r.array){if(r.arrIndex<r.array.length){return{done:!1,value:r.array[r.arrIndex++]}}r.array=e;r.arrIndex=0}if(r.collIndex<t.length){let e=t[r.collIndex++];if(Z(e)){r.iterator=e[Symbol.iterator]()}else e&&typeof e.length==="number"&&(r.array=e)}}while(r.iterator||r.array||r.collIndex<t.length);return J})}return Q}class TreeStreamImpl extends StreamImpl{constructor(e,t,r){super(()=>({iterators:(r===null||r===void 0?void 0:r.includeRoot)?[[e][Symbol.iterator]()]:[t(e)[Symbol.iterator]()],pruned:!1}),e=>{if(e.pruned){e.iterators.pop();e.pruned=!1}while(e.iterators.length>0){let r=e.iterators[e.iterators.length-1],n=r.next();if(n.done){e.iterators.pop()}else{e.iterators.push(t(n.value)[Symbol.iterator]());return n}}return J})}iterator(){const e={state:this.startFn(),next:()=>this.nextFn(e.state),prune:()=>{e.state.pruned=!0},[Symbol.iterator]:()=>e};return e}}(function(e){function t(e){return e.reduce((e,t)=>e+t,0)}e.sum=t;function r(e){return e.reduce((e,t)=>e*t,0)}e.product=r;function n(e){return e.reduce((e,t)=>Math.min(e,t))}e.min=n;function a(e){return e.reduce((e,t)=>Math.max(e,t))}e.max=a})(q);function te(e){return new TreeStreamImpl(e,e=>{if(z(e)){return e.content}else{return[]}},{includeRoot:!0})}function re(e,t){while(e.container){e=e.container;if(e===t){return!0}}return!1}function ne(e){return{start:{character:e.startColumn-1,line:e.startLine-1},end:{character:e.endColumn,line:e.endLine-1}}}function ae(t){if(!t){return e}const{offset:r,end:n,range:a}=t;return{range:a,offset:r,end:n,length:n-r}}function oe(e,t){if(e.end.line<t.start.line||e.end.line===t.start.line&&e.end.character<=t.start.character){return 0}else if(e.start.line>t.end.line||e.start.line===t.end.line&&e.start.character>=t.end.character){return 1}const r=e.start.line>t.start.line||e.start.line===t.start.line&&e.start.character>=t.start.character;const n=e.end.line<t.end.line||e.end.line===t.end.line&&e.end.character<=t.end.character;if(r&&n){return 4}else if(r){return 3}else if(n){return 2}else{return 5}}function ie(e,t){const r=oe(e,t);return r>1}var se=/^[\w\p{L}]$/u;function le(t,r){if(t){let e=ue(t,!0);if(e&&ce(e,r)){return e}if(X(t)){let e=t.content.findIndex(e=>!e.hidden);for(let n=e-1;n>=0;n--){let e=t.content[n];if(ce(e,r)){return e}}}}return e}function ce(e,t){return H(e)&&t.includes(e.tokenType.name)}function ue(t,r=!0){while(t.container){let e=t.container,n=e.content.indexOf(t);while(n>0){n--;let t=e.content[n];if(r||!t.hidden){return t}}t=e}return e}class ErrorWithLocation extends Error{constructor(e,t){super(e?`${t} at ${e.range.start.line}:${e.range.start.character}`:t)}}function de(e){throw new Error("Error! The input value was not handled.")}var pe;var me="AbstractRule";var fe="AbstractType";var he="Condition";var _e="TypeDefinition";var ge="ValueLiteral";var ye="AbstractElement";function xe(e){return pe.isInstance(e,ye)}var Te="ArrayLiteral";var ke="ArrayType";var ve="BooleanLiteral";function Re(e){return pe.isInstance(e,ve)}var Ae="Conjunction";function Ce(e){return pe.isInstance(e,Ae)}var Ie="Disjunction";function Ee(e){return pe.isInstance(e,Ie)}var Se="Grammar";var Pe="GrammarImport";var Ne="InferredType";function be(e){return pe.isInstance(e,Ne)}var Oe="Interface";function Le(e){return pe.isInstance(e,Oe)}var we="NamedArgument";var $e="Negation";function De(e){return pe.isInstance(e,$e)}var Me="NumberLiteral";var Fe="Parameter";var Ge="ParameterReference";function Ke(e){return pe.isInstance(e,Ge)}var Ue="ParserRule";function Ve(e){return pe.isInstance(e,Ue)}var Be="ReferenceType";var je="ReturnType";function We(e){return pe.isInstance(e,je)}var ze="SimpleType";function He(e){return pe.isInstance(e,ze)}var Xe="StringLiteral";var Je="TerminalRule";function qe(e){return pe.isInstance(e,Je)}var Ye="Type";function Ze(e){return pe.isInstance(e,Ye)}var Qe="TypeAttribute";var et="UnionType";var tt="Action";function rt(e){return pe.isInstance(e,tt)}var nt="Alternatives";function at(e){return pe.isInstance(e,nt)}var ot="Assignment";function it(e){return pe.isInstance(e,ot)}var st="CharacterRange";function lt(e){return pe.isInstance(e,st)}var ct="CrossReference";function ut(e){return pe.isInstance(e,ct)}var dt="EndOfFile";function pt(e){return pe.isInstance(e,dt)}var mt="Group";function ft(e){return pe.isInstance(e,mt)}var ht="Keyword";function _t(e){return pe.isInstance(e,ht)}var gt="NegatedToken";function yt(e){return pe.isInstance(e,gt)}var xt="RegexToken";function Tt(e){return pe.isInstance(e,xt)}var kt="RuleCall";function vt(e){return pe.isInstance(e,kt)}var Rt="TerminalAlternatives";function At(e){return pe.isInstance(e,Rt)}var Ct="TerminalGroup";function It(e){return pe.isInstance(e,Ct)}var Et="TerminalRuleCall";function St(e){return pe.isInstance(e,Et)}var Pt="UnorderedGroup";function Nt(e){return pe.isInstance(e,Pt)}var bt="UntilToken";function Ot(e){return pe.isInstance(e,bt)}var Lt="Wildcard";function wt(e){return pe.isInstance(e,Lt)}class LangiumGrammarAstReflection extends AbstractAstReflection{getAllTypes(){return[ye,me,fe,tt,nt,Te,ke,ot,ve,st,he,Ae,ct,Ie,dt,Se,Pe,mt,Ne,Oe,ht,we,gt,$e,Me,Fe,Ge,Ue,Be,xt,je,kt,ze,Xe,Rt,Ct,Je,Et,Ye,Qe,_e,et,Pt,bt,ge,Lt]}computeIsSubtype(e,t){switch(e){case tt:case nt:case ot:case st:case ct:case dt:case mt:case ht:case gt:case xt:case kt:case Rt:case Ct:case Et:case Pt:case bt:case Lt:return this.isSubtype(ye,t);case Te:case Me:case Xe:return this.isSubtype(ge,t);case ke:case Be:case ze:case et:return this.isSubtype(_e,t);case ve:return this.isSubtype(he,t)||this.isSubtype(ge,t);case Ae:case Ie:case $e:case Ge:return this.isSubtype(he,t);case Ne:case Oe:case Ye:return this.isSubtype(fe,t);case Ue:return this.isSubtype(me,t)||this.isSubtype(fe,t);case Je:return this.isSubtype(me,t);default:return!1}}getReferenceType(e){const t=`${e.container.$type}:${e.property}`;switch(t){case"Action:type":case"CrossReference:type":case"Interface:superTypes":case"ParserRule:returnType":case"SimpleType:typeRef":return fe;case"Grammar:hiddenTokens":case"ParserRule:hiddenTokens":case"RuleCall:rule":return me;case"Grammar:usedGrammars":return Se;case"NamedArgument:parameter":case"ParameterReference:parameter":return Fe;case"TerminalRuleCall:rule":return Je;default:throw new Error(`${t} is not a valid reference id.`)}}getTypeMetaData(e){switch(e){case ye:return{name:ye,properties:[{name:"cardinality"},{name:"lookahead"}]};case Te:return{name:Te,properties:[{name:"elements",defaultValue:[]}]};case ke:return{name:ke,properties:[{name:"elementType"}]};case ve:return{name:ve,properties:[{name:"true",defaultValue:!1}]};case Ae:return{name:Ae,properties:[{name:"left"},{name:"right"}]};case Ie:return{name:Ie,properties:[{name:"left"},{name:"right"}]};case Se:return{name:Se,properties:[{name:"definesHiddenTokens",defaultValue:!1},{name:"hiddenTokens",defaultValue:[]},{name:"imports",defaultValue:[]},{name:"interfaces",defaultValue:[]},{name:"isDeclared",defaultValue:!1},{name:"name"},{name:"rules",defaultValue:[]},{name:"types",defaultValue:[]},{name:"usedGrammars",defaultValue:[]}]};case Pe:return{name:Pe,properties:[{name:"path"}]};case Ne:return{name:Ne,properties:[{name:"name"}]};case Oe:return{name:Oe,properties:[{name:"attributes",defaultValue:[]},{name:"name"},{name:"superTypes",defaultValue:[]}]};case we:return{name:we,properties:[{name:"calledByName",defaultValue:!1},{name:"parameter"},{name:"value"}]};case $e:return{name:$e,properties:[{name:"value"}]};case Me:return{name:Me,properties:[{name:"value"}]};case Fe:return{name:Fe,properties:[{name:"name"}]};case Ge:return{name:Ge,properties:[{name:"parameter"}]};case Ue:return{name:Ue,properties:[{name:"dataType"},{name:"definesHiddenTokens",defaultValue:!1},{name:"definition"},{name:"entry",defaultValue:!1},{name:"fragment",defaultValue:!1},{name:"hiddenTokens",defaultValue:[]},{name:"inferredType"},{name:"name"},{name:"parameters",defaultValue:[]},{name:"returnType"},{name:"wildcard",defaultValue:!1}]};case Be:return{name:Be,properties:[{name:"referenceType"}]};case je:return{name:je,properties:[{name:"name"}]};case ze:return{name:ze,properties:[{name:"primitiveType"},{name:"stringType"},{name:"typeRef"}]};case Xe:return{name:Xe,properties:[{name:"value"}]};case Je:return{name:Je,properties:[{name:"definition"},{name:"fragment",defaultValue:!1},{name:"hidden",defaultValue:!1},{name:"name"},{name:"type"}]};case Ye:return{name:Ye,properties:[{name:"name"},{name:"type"}]};case Qe:return{name:Qe,properties:[{name:"defaultValue"},{name:"isOptional",defaultValue:!1},{name:"name"},{name:"type"}]};case et:return{name:et,properties:[{name:"types",defaultValue:[]}]};case tt:return{name:tt,properties:[{name:"cardinality"},{name:"feature"},{name:"inferredType"},{name:"lookahead"},{name:"operator"},{name:"type"}]};case nt:return{name:nt,properties:[{name:"cardinality"},{name:"elements",defaultValue:[]},{name:"lookahead"}]};case ot:return{name:ot,properties:[{name:"cardinality"},{name:"feature"},{name:"lookahead"},{name:"operator"},{name:"terminal"}]};case st:return{name:st,properties:[{name:"cardinality"},{name:"left"},{name:"lookahead"},{name:"right"}]};case ct:return{name:ct,properties:[{name:"cardinality"},{name:"deprecatedSyntax",defaultValue:!1},{name:"lookahead"},{name:"terminal"},{name:"type"}]};case dt:return{name:dt,properties:[{name:"cardinality"},{name:"lookahead"}]};case mt:return{name:mt,properties:[{name:"cardinality"},{name:"elements",defaultValue:[]},{name:"guardCondition"},{name:"lookahead"}]};case ht:return{name:ht,properties:[{name:"cardinality"},{name:"lookahead"},{name:"value"}]};case gt:return{name:gt,properties:[{name:"cardinality"},{name:"lookahead"},{name:"terminal"}]};case xt:return{name:xt,properties:[{name:"cardinality"},{name:"lookahead"},{name:"regex"}]};case kt:return{name:kt,properties:[{name:"arguments",defaultValue:[]},{name:"cardinality"},{name:"lookahead"},{name:"rule"}]};case Rt:return{name:Rt,properties:[{name:"cardinality"},{name:"elements",defaultValue:[]},{name:"lookahead"}]};case Ct:return{name:Ct,properties:[{name:"cardinality"},{name:"elements",defaultValue:[]},{name:"lookahead"}]};case Et:return{name:Et,properties:[{name:"cardinality"},{name:"lookahead"},{name:"rule"}]};case Pt:return{name:Pt,properties:[{name:"cardinality"},{name:"elements",defaultValue:[]},{name:"lookahead"}]};case bt:return{name:bt,properties:[{name:"cardinality"},{name:"lookahead"},{name:"terminal"}]};case Lt:return{name:Lt,properties:[{name:"cardinality"},{name:"lookahead"}]};default:return{name:e,properties:[]}}}}pe=new LangiumGrammarAstReflection;function $t(e){for(const[t,r]of Object.entries(e)){if(!t.startsWith("$")){if(Array.isArray(r)){r.forEach((r,n)=>{if(V(r)){r.$container=e;r.$containerProperty=t;r.$containerIndex=n}})}else if(V(r)){r.$container=e;r.$containerProperty=t}}}}function Dt(t,r){let n=t;while(n){if(r(n)){return n}n=n.$container}return e}function Mt(e){const t=Ft(e);const r=t.$document;if(!r){throw new Error("AST node has no document.")}return r}function Ft(e){while(e.$container){e=e.$container}return e}function Gt(e,t){if(!e){throw new Error("Node must be an AstNode.")}const r=t===null||t===void 0?void 0:t.range;return new StreamImpl(()=>({keys:Object.keys(e),keyIndex:0,arrayIndex:0}),t=>{while(t.keyIndex<t.keys.length){let n=t.keys[t.keyIndex];if(!n.startsWith("$")){let a=e[n];if(V(a)){t.keyIndex++;if(Vt(a,r)){return{done:!1,value:a}}}else if(Array.isArray(a)){while(t.arrayIndex<a.length){let e=t.arrayIndex++,n=a[e];if(V(n)&&Vt(n,r)){return{done:!1,value:n}}}t.arrayIndex=0}}t.keyIndex++}return J})}function Kt(e,t){if(!e){throw new Error("Root node must be an AstNode.")}return new TreeStreamImpl(e,e=>Gt(e,t))}function Ut(e,t){if(!e){throw new Error("Root node must be an AstNode.")}else if((t===null||t===void 0?void 0:t.range)&&!Vt(e,t.range)){return new TreeStreamImpl(e,()=>[])}return new TreeStreamImpl(e,e=>Gt(e,t),{includeRoot:!0})}function Vt(e,t){var r;if(!t){return!0}const n=(r=e.$cstNode)===null||r===void 0?void 0:r.range;if(!n){return!1}return ie(n,t)}function Bt(e){return new StreamImpl(()=>({keys:Object.keys(e),keyIndex:0,arrayIndex:0}),t=>{while(t.keyIndex<t.keys.length){let r=t.keys[t.keyIndex];if(!r.startsWith("$")){let n=e[r];if(B(n)){t.keyIndex++;return{done:!1,value:{reference:n,container:e,property:r}}}else if(Array.isArray(n)){while(t.arrayIndex<n.length){let a=t.arrayIndex++,o=n[a];if(B(o)){return{done:!1,value:{reference:o,container:e,property:r,index:a}}}}t.arrayIndex=0}}t.keyIndex++}return J})}function jt(t,r){const n=t.getTypeMetaData(r.$type);const a=r;for(const t of n.properties){t.defaultValue!==e&&r[t.name]===e&&(a[t.name]=Wt(t.defaultValue))}}function Wt(e){if(Array.isArray(e)){return[...e.map(Wt)]}else{return e}}function zt(e){return e.charCodeAt(0)}function Ht(e,t){if(Array.isArray(e)){e.forEach(function(e){t.push(e)})}else{t.push(e)}}function Xt(e,t){if(e[t]===!0){throw"duplicate flag "+t}e[t];e[t]=!0}function Jt(t){if(t===e){throw Error("Internal Error - Should never get here!")}return!0}function qt(){throw Error("Internal Error - Should never get here!")}function Yt(e){return e["type"]==="Character"}var Zt=[];for(let e=zt("0");e<=zt("9");e++){Zt.push(e)}var Qt=[zt("_")].concat(Zt);for(let e=zt("a");e<=zt("z");e++){Qt.push(e)}for(let e=zt("A");e<=zt("Z");e++){Qt.push(e)}var er=[zt(" "),zt("\f"),zt("\n"),zt("\r"),zt("\t"),zt("\v"),zt("\t"),zt(" "),zt(" "),zt(" "),zt(" "),zt(" "),zt(" "),zt(" "),zt(" "),zt(" "),zt(" "),zt(" "),zt(" "),zt(" "),zt("\u2028"),zt("\u2029"),zt(" "),zt(" "),zt("　"),zt("\ufeff")];const tr=/[0-9a-fA-F]/;const rr=/[0-9]/;const nr=/[1-9]/;class RegExpParser{constructor(){this.idx=0;this.input="";this.groupIdx=0}saveState(){return{idx:this.idx,input:this.input,groupIdx:this.groupIdx}}restoreState(e){this.idx=e.idx;this.input=e.input;this.groupIdx=e.groupIdx}pattern(e){this.idx=0;this.input=e;this.groupIdx=0;this.consumeChar("/");const t=this.disjunction();this.consumeChar("/");const r={type:"Flags",loc:{begin:this.idx,end:e.length},global:!1,ignoreCase:!1,multiLine:!1,unicode:!1,sticky:!1};while(this.isRegExpFlag()){switch(this.popChar()){case"g":Xt(r,"global");break;case"i":Xt(r,"ignoreCase");break;case"m":Xt(r,"multiLine");break;case"u":Xt(r,"unicode");break;case"y":Xt(r,"sticky");break}}if(this.idx!==this.input.length){throw Error("Redundant input: "+this.input.substring(this.idx))}return{type:"Pattern",flags:r,value:t,loc:this.loc(0)}}disjunction(){const e=[];const t=this.idx;e.push(this.alternative());while(this.peekChar()==="|"){this.consumeChar("|");e.push(this.alternative())}return{type:"Disjunction",value:e,loc:this.loc(t)}}alternative(){const e=[];const t=this.idx;while(this.isTerm()){e.push(this.term())}return{type:"Alternative",value:e,loc:this.loc(t)}}term(){if(this.isAssertion()){return this.assertion()}else{return this.atom()}}assertion(){const e=this.idx;switch(this.popChar()){case"^":return{type:"StartAnchor",loc:this.loc(e)};case"$":return{type:"EndAnchor",loc:this.loc(e)};case"\\":switch(this.popChar()){case"b":return{type:"WordBoundary",loc:this.loc(e)};case"B":return{type:"NonWordBoundary",loc:this.loc(e)}}throw Error("Invalid Assertion Escape");case"(":this.consumeChar("?");let t;switch(this.popChar()){case"=":t="Lookahead";break;case"!":t="NegativeLookahead";break}Jt(t);let r=this.disjunction();this.consumeChar(")");return{type:t,value:r,loc:this.loc(e)}}return qt()}quantifier(t=!1){let r=e;const n=this.idx;switch(this.popChar()){case"*":r={atLeast:0,atMost:Infinity};break;case"+":r={atLeast:1,atMost:Infinity};break;case"?":r={atLeast:0,atMost:1};break;case"{":let n=this.integerIncludingZero();switch(this.popChar()){case"}":r={atLeast:n,atMost:n};break;case",":let e;if(this.isDigit()){e=this.integerIncludingZero();r={atLeast:n,atMost:e}}else{r={atLeast:n,atMost:Infinity}}this.consumeChar("}");break}if(t===!0&&r===e){return e}Jt(r);break}if(t===!0&&r===e){return e}if(Jt(r)){if(this.peekChar(0)==="?"){this.consumeChar("?");r.greedy=!1}else{r.greedy=!0}r.type="Quantifier";r.loc=this.loc(n);return r}}atom(){let t;const r=this.idx;switch(this.peekChar()){case".":t=this.dotAll();break;case"\\":t=this.atomEscape();break;case"[":t=this.characterClass();break;case"(":t=this.group();break}t===e&&this.isPatternCharacter()&&(t=this.patternCharacter());if(Jt(t)){t.loc=this.loc(r);this.isQuantifier()&&(t.quantifier=this.quantifier());return t}return qt()}dotAll(){this.consumeChar(".");return{type:"Set",complement:!0,value:[zt("\n"),zt("\r"),zt("\u2028"),zt("\u2029")]}}atomEscape(){this.consumeChar("\\");switch(this.peekChar()){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return this.decimalEscapeAtom();case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}decimalEscapeAtom(){const e=this.positiveInteger();return{type:"GroupBackReference",value:e}}characterClassEscape(){let e;let t=!1;switch(this.popChar()){case"d":e=Zt;break;case"D":e=Zt;t=!0;break;case"s":e=er;break;case"S":e=er;t=!0;break;case"w":e=Qt;break;case"W":e=Qt;t=!0;break}if(Jt(e)){return{type:"Set",value:e,complement:t}}return qt()}controlEscapeAtom(){let e;switch(this.popChar()){case"f":e=zt("\f");break;case"n":e=zt("\n");break;case"r":e=zt("\r");break;case"t":e=zt("\t");break;case"v":e=zt("\v");break}if(Jt(e)){return{type:"Character",value:e}}return qt()}controlLetterEscapeAtom(){this.consumeChar("c");const e=this.popChar();if(/[a-zA-Z]/.test(e)===!1){throw Error("Invalid ")}const t=e.toUpperCase().charCodeAt(0)-64;return{type:"Character",value:t}}nulCharacterAtom(){this.consumeChar("0");return{type:"Character",value:zt("\0")}}hexEscapeSequenceAtom(){this.consumeChar("x");return this.parseHexDigits(2)}regExpUnicodeEscapeSequenceAtom(){this.consumeChar("u");return this.parseHexDigits(4)}identityEscapeAtom(){const e=this.popChar();return{type:"Character",value:zt(e)}}classPatternCharacterAtom(){switch(this.peekChar()){case"\n":case"\r":case"\u2028":case"\u2029":case"\\":case"]":throw Error("TBD");default:let e=this.popChar();return{type:"Character",value:zt(e)}}}characterClass(){const e=[];let t=!1;this.consumeChar("[");if(this.peekChar(0)==="^"){this.consumeChar("^");t=!0}while(this.isClassAtom()){let t=this.classAtom(),r=t.type==="Character";if(Yt(t)&&this.isRangeDash()){this.consumeChar("-");let r=this.classAtom(),n=r.type==="Character";if(Yt(r)){if(r.value<t.value){throw Error("Range out of order in character class")}e.push({from:t.value,to:r.value})}else{Ht(t.value,e);e.push(zt("-"));Ht(r.value,e)}}else{Ht(t.value,e)}}this.consumeChar("]");return{type:"Set",complement:t,value:e}}classAtom(){switch(this.peekChar()){case"]":case"\n":case"\r":case"\u2028":case"\u2029":throw Error("TBD");case"\\":return this.classEscape();default:return this.classPatternCharacterAtom()}}classEscape(){this.consumeChar("\\");switch(this.peekChar()){case"b":this.consumeChar("b");return{type:"Character",value:zt("\b")};case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}group(){let e=!0;this.consumeChar("(");switch(this.peekChar(0)){case"?":this.consumeChar("?");this.consumeChar(":");e=!1;break;default:this.groupIdx++;break}const t=this.disjunction();this.consumeChar(")");const r={type:"Group",capturing:e,value:t};e&&(r["idx"]=this.groupIdx);return r}positiveInteger(){let e=this.popChar();if(nr.test(e)===!1){throw Error("Expecting a positive integer")}while(rr.test(this.peekChar(0))){e+=this.popChar()}return parseInt(e,10)}integerIncludingZero(){let e=this.popChar();if(rr.test(e)===!1){throw Error("Expecting an integer")}while(rr.test(this.peekChar(0))){e+=this.popChar()}return parseInt(e,10)}patternCharacter(){const e=this.popChar();switch(e){case"\n":case"\r":case"\u2028":case"\u2029":case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":throw Error("TBD");default:return{type:"Character",value:zt(e)}}}isRegExpFlag(){switch(this.peekChar(0)){case"g":case"i":case"m":case"u":case"y":return!0;default:return!1}}isRangeDash(){return this.peekChar()==="-"&&this.isClassAtom(1)}isDigit(){return rr.test(this.peekChar(0))}isClassAtom(e=0){switch(this.peekChar(e)){case"]":case"\n":case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}isTerm(){return this.isAtom()||this.isAssertion()}isAtom(){if(this.isPatternCharacter()){return!0}switch(this.peekChar(0)){case".":case"\\":case"[":case"(":return!0;default:return!1}}isAssertion(){switch(this.peekChar(0)){case"^":case"$":return!0;case"\\":switch(this.peekChar(1)){case"b":case"B":return!0;default:return!1}case"(":return this.peekChar(1)==="?"&&(this.peekChar(2)==="="||this.peekChar(2)==="!");default:return!1}}isQuantifier(){const t=this.saveState();try{return this.quantifier(!0)!==e}catch(e){return!1}finally{this.restoreState(t)}}isPatternCharacter(){switch(this.peekChar()){case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":case"/":case"\n":case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}parseHexDigits(e){let t="";for(let r=0;r<e;r++){let e=this.popChar();if(tr.test(e)===!1){throw Error("Expecting a HexDecimal digits")}t+=e}const r=parseInt(t,16);return{type:"Character",value:r}}peekChar(e=0){return this.input[this.idx+e]}popChar(){const t=this.peekChar(0);this.consumeChar(e);return t}consumeChar(t){if(t!==e&&this.input[this.idx]!==t){throw Error("Expected: '"+t+"' but found: '"+this.input[this.idx]+"' at offset: "+this.idx)}if(this.idx>=this.input.length){throw Error("Unexpected end of input")}this.idx++}loc(e){return{begin:e,end:this.idx}}}class BaseRegExpVisitor{visitChildren(t){for(const r in t){let n=t[r];if(t.hasOwnProperty(r)){if(n.type!==e){this.visit(n)}else Array.isArray(n)&&n.forEach(e=>{this.visit(e)},this)}}}visit(e){switch(e.type){case"Pattern":this.visitPattern(e);break;case"Flags":this.visitFlags(e);break;case"Disjunction":this.visitDisjunction(e);break;case"Alternative":this.visitAlternative(e);break;case"StartAnchor":this.visitStartAnchor(e);break;case"EndAnchor":this.visitEndAnchor(e);break;case"WordBoundary":this.visitWordBoundary(e);break;case"NonWordBoundary":this.visitNonWordBoundary(e);break;case"Lookahead":this.visitLookahead(e);break;case"NegativeLookahead":this.visitNegativeLookahead(e);break;case"Character":this.visitCharacter(e);break;case"Set":this.visitSet(e);break;case"Group":this.visitGroup(e);break;case"GroupBackReference":this.visitGroupBackReference(e);break;case"Quantifier":this.visitQuantifier(e);break}this.visitChildren(e)}visitPattern(e){}visitFlags(e){}visitDisjunction(e){}visitAlternative(e){}visitStartAnchor(e){}visitEndAnchor(e){}visitWordBoundary(e){}visitNonWordBoundary(e){}visitLookahead(e){}visitNegativeLookahead(e){}visitCharacter(e){}visitSet(e){}visitGroup(e){}visitGroupBackReference(e){}visitQuantifier(e){}}var ar=/\r?\n/gm;const or=new RegExpParser;class TerminalRegExpVisitor extends BaseRegExpVisitor{constructor(){super(...arguments);this.isStarting=!0;this.endRegexpStack=[];this.multiline=!1}get endRegex(){return this.endRegexpStack.join("")}reset(e){this.multiline=!1;this.regex=e;this.startRegexp="";this.isStarting=!0;this.endRegexpStack=[]}visitGroup(e){if(e.quantifier){this.isStarting=!1;this.endRegexpStack=[]}}visitCharacter(e){const t=String.fromCharCode(e.value);!this.multiline&&t==="\n"&&(this.multiline=!0);if(e.quantifier){this.isStarting=!1;this.endRegexpStack=[]}else{let e=ur(t);this.endRegexpStack.push(e);this.isStarting&&(this.startRegexp+=e)}}visitSet(e){if(!this.multiline){let t=this.regex.substring(e.loc.begin,e.loc.end),r=new RegExp(t);this.multiline=Boolean("\n".match(r))}if(e.quantifier){this.isStarting=!1;this.endRegexpStack=[]}else{let t=this.regex.substring(e.loc.begin,e.loc.end);this.endRegexpStack.push(t);this.isStarting&&(this.startRegexp+=t)}}visitChildren(e){if(e.type==="Group"){let t=e;if(t.quantifier){return}}super.visitChildren(e)}}const ir=new TerminalRegExpVisitor;function sr(e){try{typeof e==="string"&&(e=new RegExp(e));e=e.toString();ir.reset(e);ir.visit(or.pattern(e));return ir.multiline}catch(e){return!1}}var lr=("\f\n\r\t\v           "+"   \u2028\u2029  　\ufeff").split("");function cr(e){const t=typeof e==="string"?new RegExp(e):e;return lr.some(e=>t.test(e))}function ur(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function dr(e){return Array.prototype.map.call(e,e=>/\w/.test(e)?`[${e.toLowerCase()}${e.toUpperCase()}]`:ur(e)).join("")}
function pr(e,t){const r=mr(e);const n=t.match(r);return!!n&&n[0].length>0}function mr(e){typeof e==="string"&&(e=new RegExp(e));const t=e,r=e.source;let n=0;function a(){let e="",o;function i(t){e+=r.substr(n,t);n+=t}function s(t){e+="(?:"+r.substr(n,t)+"|$)";n+=t}while(n<r.length){switch(r[n]){case"\\":switch(r[n+1]){case"c":s(3);break;case"x":s(4);break;case"u":if(t.unicode){if(r[n+2]==="{"){s(r.indexOf("}",n)-n+1)}else{s(6)}}else{s(2)}break;case"p":case"P":if(t.unicode){s(r.indexOf("}",n)-n+1)}else{s(2)}break;case"k":s(r.indexOf(">",n)-n+1);break;default:s(2);break}break;case"[":o=/\[(?:\\.|.)*?\]/g;o.lastIndex=n;o=o.exec(r)||[];s(o[0].length);break;case"|":case"^":case"$":case"*":case"+":case"?":i(1);break;case"{":o=/\{\d+,?\d*\}/g;o.lastIndex=n;o=o.exec(r);if(o){i(o[0].length)}else{s(1)}break;case"(":if(r[n+1]==="?"){switch(r[n+2]){case":":e+="(?:";n+=3;e+=a()+"|$)";break;case"=":e+="(?=";n+=3;e+=a()+")";break;case"!":o=n;n+=3;a();e+=r.substr(o,n-o);break;case"<":switch(r[n+3]){case"=":case"!":o=n;n+=4;a();e+=r.substr(o,n-o);break;default:i(r.indexOf(">",n)-n+1);e+=a()+"|$)";break}break}}else{i(1);e+=a()+"|$)"}break;case")":++n;return e;default:s(1);break}}return e}return new RegExp(a(),e.flags)}function fr(e){return e.rules.find(e=>Ve(e)&&e.entry)}function hr(e){return e.rules.filter(e=>qe(e)&&e.hidden)}function _r(e,t){const r=new Set;const n=fr(e);if(!n){return new Set(e.rules)}const a=[n].concat(hr(e));for(const e of a){gr(e,r,t)}const o=new Set;for(const t of e.rules){(r.has(t.name)||qe(t)&&t.hidden)&&o.add(t)}return o}function gr(e,t,r){t.add(e.name);Kt(e).forEach(e=>{if(vt(e)||r&&St(e)){let n=e.rule.ref;n&&!t.has(n.name)&&gr(n,t,r)}})}function yr(t){if(t.terminal){return t.terminal}else if(t.type.ref){let e=Ir(t.type.ref);return e===null||e===void 0?void 0:e.terminal}return e}function xr(e){return e.hidden&&!cr(wr(e))}function Tr(e,t){if(!e||!t){return[]}return vr(e,t,e.astNode,!0)}function kr(t,r,n){if(!t||!r){return e}const a=vr(t,r,t.astNode,!0);if(a.length===0){return e}if(n!==e){n=Math.max(0,Math.min(n,a.length-1))}else{n=0}return a[n]}function vr(e,t,r,n){if(!n){let r=Dt(e.grammarSource,it);if(r&&r.feature===t){return[e]}}if(z(e)&&e.astNode===r){return e.content.flatMap(e=>vr(e,t,r,!1))}return[]}function Rr(t,r,n){if(!t){return e}const a=Ar(t,r,t===null||t===void 0?void 0:t.astNode);if(a.length===0){return e}if(n!==e){n=Math.max(0,Math.min(n,a.length-1))}else{n=0}return a[n]}function Ar(e,t,r){if(e.astNode!==r){return[]}if(_t(e.grammarSource)&&e.grammarSource.value===t){return[e]}const n=te(e).iterator();let a;const o=[];do{a=n.next();if(!a.done){let e=a.value;if(e.astNode===r){_t(e.grammarSource)&&e.grammarSource.value===t&&o.push(e)}else{n.prune()}}}while(!a.done);return o}function Cr(t){var r;const n=t.astNode;while(n===((r=t.container)===null||r===void 0?void 0:r.astNode)){let e=Dt(t.grammarSource,it);if(e){return e}t=t.container}return e}function Ir(e){let t=e;if(be(t)){if(rt(t.$container)){t=t.$container.$container}else if(Ve(t.$container)){t=t.$container}else{de(t.$container)}}return Er(e,t,new Map)}function Er(t,r,n){var a;function o(r,a){let o=e;const i=Dt(r,it);i||(o=Er(a,a,n));n.set(t,o);return o}if(n.has(t)){return n.get(t)}n.set(t,e);for(const e of Kt(r)){if(it(e)&&e.feature.toLowerCase()==="name"){n.set(t,e);return e}else if(vt(e)&&Ve(e.rule.ref)){return o(e,e.rule.ref)}else if(He(e)&&((a=e.typeRef)===null||a===void 0?void 0:a.ref)){return o(e,e.typeRef.ref)}}return e}function Sr(e){return Pr(e,new Set)}function Pr(e,t){if(t.has(e)){return!0}else{t.add(e)}for(const r of Kt(e)){if(vt(r)){if(!r.rule.ref){return!1}if(Ve(r.rule.ref)&&!Pr(r.rule.ref,t)){return!1}}else if(it(r)){return!1}else if(rt(r)){return!1}}return Boolean(e.definition)}function Nr(t){if(t.inferredType){return t.inferredType.name}else if(t.dataType){return t.dataType}else if(t.returnType){let e=t.returnType.ref;if(e){if(Ve(e)){return e.name}else if(Le(e)||Ze(e)){return e.name}}}return e}function br(e){var t;if(Ve(e)){return Sr(e)?e.name:(t=Nr(e))!==null&&t!==void 0?t:e.name}else if(Le(e)||Ze(e)||We(e)){return e.name}else if(rt(e)){let t=Or(e);if(t){return t}}else if(be(e)){return e.name}throw new Error("Cannot get name of Unknown Type")}function Or(t){var r;if(t.inferredType){return t.inferredType.name}else if((r=t.type)===null||r===void 0?void 0:r.ref){return br(t.type.ref)}return e}function Lr(e){var t,r,n;if(qe(e)){return(r=(t=e.type)===null||t===void 0?void 0:t.name)!==null&&r!==void 0?r:"string"}else{return(n=Nr(e))!==null&&n!==void 0?n:e.name}}function wr(e){const t={s:!1,i:!1,u:!1};const r=Dr(e.definition,t);const n=Object.entries(t).filter(([,e])=>e).map(([e])=>e).join("");return new RegExp(r,n)}const $r=/[\s\S]/.source;function Dr(e,t){if(At(e)){return Mr(e)}else if(It(e)){return Fr(e)}else if(lt(e)){return Ur(e)}else if(St(e)){let t=e.rule.ref;if(!t){throw new Error("Missing rule reference.")}return Br(Dr(t.definition),{cardinality:e.cardinality,lookahead:e.lookahead})}else if(yt(e)){return Kr(e)}else if(Ot(e)){return Gr(e)}else if(Tt(e)){let r=e.regex.lastIndexOf("/"),n=e.regex.substring(1,r),a=e.regex.substring(r+1);if(t){t.i=a.includes("i");t.s=a.includes("s");t.u=a.includes("u")}return Br(n,{cardinality:e.cardinality,lookahead:e.lookahead,wrap:!1})}else if(wt(e)){return Br($r,{cardinality:e.cardinality,lookahead:e.lookahead})}else{throw new Error(`Invalid terminal element: ${e===null||e===void 0?void 0:e.$type}`)}}function Mr(e){return Br(e.elements.map(e=>Dr(e)).join("|"),{cardinality:e.cardinality,lookahead:e.lookahead})}function Fr(e){return Br(e.elements.map(e=>Dr(e)).join(""),{cardinality:e.cardinality,lookahead:e.lookahead})}function Gr(e){return Br(`${$r}*?${Dr(e.terminal)}`,{cardinality:e.cardinality,lookahead:e.lookahead})}function Kr(e){return Br(`(?!${Dr(e.terminal)})${$r}*?`,{cardinality:e.cardinality,lookahead:e.lookahead})}function Ur(e){if(e.right){return Br(`[${Vr(e.left)}-${Vr(e.right)}]`,{cardinality:e.cardinality,lookahead:e.lookahead,wrap:!1})}return Br(Vr(e.left),{cardinality:e.cardinality,lookahead:e.lookahead,wrap:!1})}function Vr(e){return ur(e.value)}function Br(e,t){var r;(t.wrap!==!1||t.lookahead)&&(e=`(${(r=t.lookahead)!==null&&r!==void 0?r:""}${e})`);if(t.cardinality){return`${e}${t.cardinality}`}return e}function jr(e){const t=[];const r=e.Grammar;for(const e of r.rules){qe(e)&&xr(e)&&sr(wr(e))&&t.push(e.name)}return{multilineCommentRules:t,nameRegexp:se}}function Wr(e){console&&console.error&&console.error(`Error: ${e}`)}function zr(e){console&&console.warn&&console.warn(`Warning: ${e}`)}function Hr(e){const t=(new Date).getTime();const r=e();const n=(new Date).getTime();const a=n-t;return{time:a,value:r}}function Xr(toBecomeFast){function FakeConstructor(){}FakeConstructor.prototype=toBecomeFast;const fakeInstance=new FakeConstructor;function fakeAccess(){return typeof fakeInstance.bar}fakeAccess();fakeAccess();return toBecomeFast;eval(toBecomeFast)}function Jr(e){if(qr(e)){return e.LABEL}else{return e.name}}function qr(e){return a(e.LABEL)&&e.LABEL!==""}class AbstractProduction{get definition(){return this._definition}set definition(e){this._definition=e}constructor(e){this._definition=e}accept(e){e.visit(this);o(this.definition,t=>{t.accept(e)})}}class NonTerminal extends AbstractProduction{constructor(t){super([]);this.idx=1;i(this,s(t,t=>t!==e))}set definition(e){}get definition(){if(this.referencedRule!==e){return this.referencedRule.definition}return[]}accept(e){e.visit(this)}}class Rule extends AbstractProduction{constructor(t){super(t.definition);this.orgText="";i(this,s(t,t=>t!==e))}}class Alternative extends AbstractProduction{constructor(t){super(t.definition);this.ignoreAmbiguities=!1;i(this,s(t,t=>t!==e))}}class Option extends AbstractProduction{constructor(t){super(t.definition);this.idx=1;i(this,s(t,t=>t!==e))}}class RepetitionMandatory extends AbstractProduction{constructor(t){super(t.definition);this.idx=1;i(this,s(t,t=>t!==e))}}class RepetitionMandatoryWithSeparator extends AbstractProduction{constructor(t){super(t.definition);this.idx=1;i(this,s(t,t=>t!==e))}}class Repetition extends AbstractProduction{constructor(t){super(t.definition);this.idx=1;i(this,s(t,t=>t!==e))}}class RepetitionWithSeparator extends AbstractProduction{constructor(t){super(t.definition);this.idx=1;i(this,s(t,t=>t!==e))}}class Alternation extends AbstractProduction{get definition(){return this._definition}set definition(e){this._definition=e}constructor(t){super(t.definition);this.idx=1;this.ignoreAmbiguities=!1;this.hasPredicates=!1;i(this,s(t,t=>t!==e))}}class Terminal{constructor(t){this.idx=1;i(this,s(t,t=>t!==e))}accept(e){e.visit(this)}}function Yr(e){return l(e,Zr)}function Zr(e){function t(e){return l(e,Zr)}if(e instanceof NonTerminal){let t={type:"NonTerminal",name:e.nonTerminalName,idx:e.idx};a(e.label)&&(t.label=e.label);return t}else if(e instanceof Alternative){return{type:"Alternative",definition:t(e.definition)}}else if(e instanceof Option){return{type:"Option",idx:e.idx,definition:t(e.definition)}}else if(e instanceof RepetitionMandatory){return{type:"RepetitionMandatory",idx:e.idx,definition:t(e.definition)}}else if(e instanceof RepetitionMandatoryWithSeparator){return{type:"RepetitionMandatoryWithSeparator",idx:e.idx,separator:Zr(new Terminal({terminalType:e.separator})),definition:t(e.definition)}}else if(e instanceof RepetitionWithSeparator){return{type:"RepetitionWithSeparator",idx:e.idx,separator:Zr(new Terminal({terminalType:e.separator})),definition:t(e.definition)}}else if(e instanceof Repetition){return{type:"Repetition",idx:e.idx,definition:t(e.definition)}}else if(e instanceof Alternation){return{type:"Alternation",idx:e.idx,definition:t(e.definition)}}else if(e instanceof Terminal){let t={type:"Terminal",name:e.terminalType.name,label:Jr(e.terminalType),idx:e.idx};a(e.label)&&(t.terminalLabel=e.label);let r=e.terminalType.PATTERN;e.terminalType.PATTERN&&(t.pattern=c(r)?r.source:r);return t}else if(e instanceof Rule){return{type:"Rule",name:e.name,orgText:e.orgText,definition:t(e.definition)}}else{throw Error("non exhaustive match")}}class GAstVisitor{visit(e){const t=e;switch(t.constructor){case NonTerminal:return this.visitNonTerminal(e);case Alternative:return this.visitAlternative(e);case Option:return this.visitOption(e);case RepetitionMandatory:return this.visitRepetitionMandatory(e);case RepetitionMandatoryWithSeparator:return this.visitRepetitionMandatoryWithSeparator(e);case RepetitionWithSeparator:return this.visitRepetitionWithSeparator(e);case Repetition:return this.visitRepetition(e);case Alternation:return this.visitAlternation(e);case Terminal:return this.visitTerminal(e);case Rule:return this.visitRule(e);default:throw Error("non exhaustive match")}}visitNonTerminal(e){}visitAlternative(e){}visitOption(e){}visitRepetition(e){}visitRepetitionMandatory(e){}visitRepetitionMandatoryWithSeparator(e){}visitRepetitionWithSeparator(e){}visitAlternation(e){}visitTerminal(e){}visitRule(e){}}function Qr(e){return e instanceof Alternative||e instanceof Option||e instanceof Repetition||e instanceof RepetitionMandatory||e instanceof RepetitionMandatoryWithSeparator||e instanceof RepetitionWithSeparator||e instanceof Terminal||e instanceof Rule}function en(e,t=[]){const r=e instanceof Option||e instanceof Repetition||e instanceof RepetitionWithSeparator;if(r){return!0}if(e instanceof Alternation){return u(e.definition,e=>en(e,t))}else if(e instanceof NonTerminal&&d(t,e)){return!1}else if(e instanceof AbstractProduction){e instanceof NonTerminal&&t.push(e);return p(e.definition,e=>en(e,t))}else{return!1}}function tn(e){return e instanceof Alternation}function rn(e){if(e instanceof NonTerminal){return"SUBRULE"}else if(e instanceof Option){return"OPTION"}else if(e instanceof Alternation){return"OR"}else if(e instanceof RepetitionMandatory){return"AT_LEAST_ONE"}else if(e instanceof RepetitionMandatoryWithSeparator){return"AT_LEAST_ONE_SEP"}else if(e instanceof RepetitionWithSeparator){return"MANY_SEP"}else if(e instanceof Repetition){return"MANY"}else if(e instanceof Terminal){return"CONSUME"}else{throw Error("non exhaustive match")}}class RestWalker{walk(e,t=[]){o(e.definition,(r,n)=>{const a=m(e.definition,n+1);if(r instanceof NonTerminal){this.walkProdRef(r,a,t)}else if(r instanceof Terminal){this.walkTerminal(r,a,t)}else if(r instanceof Alternative){this.walkFlat(r,a,t)}else if(r instanceof Option){this.walkOption(r,a,t)}else if(r instanceof RepetitionMandatory){this.walkAtLeastOne(r,a,t)}else if(r instanceof RepetitionMandatoryWithSeparator){this.walkAtLeastOneSep(r,a,t)}else if(r instanceof RepetitionWithSeparator){this.walkManySep(r,a,t)}else if(r instanceof Repetition){this.walkMany(r,a,t)}else if(r instanceof Alternation){this.walkOr(r,a,t)}else{throw Error("non exhaustive match")}})}walkTerminal(e,t,r){}walkProdRef(e,t,r){}walkFlat(e,t,r){const n=t.concat(r);this.walk(e,n)}walkOption(e,t,r){const n=t.concat(r);this.walk(e,n)}walkAtLeastOne(e,t,r){const n=[new Option({definition:e.definition})].concat(t,r);this.walk(e,n)}walkAtLeastOneSep(e,t,r){const n=nn(e,t,r);this.walk(e,n)}walkMany(e,t,r){const n=[new Option({definition:e.definition})].concat(t,r);this.walk(e,n)}walkManySep(e,t,r){const n=nn(e,t,r);this.walk(e,n)}walkOr(e,t,r){const n=t.concat(r);o(e.definition,e=>{const t=new Alternative({definition:[e]});this.walk(t,n)})}}function nn(e,t,r){const n=[new Option({definition:[new Terminal({terminalType:e.separator})].concat(e.definition)})];const a=n.concat(t,r);return a}function an(e){if(e instanceof NonTerminal){return an(e.referencedRule)}else if(e instanceof Terminal){return ln(e)}else if(Qr(e)){return on(e)}else if(tn(e)){return sn(e)}else{throw Error("non exhaustive match")}}function on(e){let t=[];const r=e.definition;let n=0;let a=r.length>n;let o;let i=!0;while(a&&i){o=r[n];i=en(o);t=t.concat(an(o));n=n+1;a=r.length>n}return f(t)}function sn(e){const t=l(e.definition,e=>an(e));return f(h(t))}function ln(e){return[e.terminalType]}var cn="_~IN~_";class ResyncFollowsWalker extends RestWalker{constructor(e){super();this.topProd=e;this.follows={}}startWalking(){this.walk(this.topProd);return this.follows}walkTerminal(e,t,r){}walkProdRef(e,t,r){const n=dn(e.referencedRule,e.idx)+this.topProd.name;const a=t.concat(r);const o=new Alternative({definition:a});const i=an(o);this.follows[n]=i}}function un(e){const t={};o(e,e=>{const r=new ResyncFollowsWalker(e).startWalking();i(t,r)});return t}function dn(e,t){return e.name+t+cn}let pn={};const mn=new RegExpParser;function fn(e){const t=e.toString();if(pn.hasOwnProperty(t)){return pn[t]}else{let e=mn.pattern(t);pn[t]=e;return e}}function hn(){pn={}}const _n="Complement Sets are not supported for first char optimization";var gn='Unable to use "first char" lexer optimizations:\n';function yn(e,t=!1){try{let r=fn(e),n=xn(r.value,{},r.flags.ignoreCase);return n}catch(r){if(r.message===_n){t&&zr(`${gn}`+`\tUnable to optimize: < ${e.toString()} >\n`+"\tComplement Sets cannot be automatically optimized.\n"+"\tThis will disable the lexer's first char optimizations.\n"+"\tSee: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#COMPLEMENT for details.")}else{let r="";t&&(r="\n\tThis will disable the lexer's first char optimizations.\n"+"\tSee: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#REGEXP_PARSING for details.");Wr(`${gn}\n`+`\tFailed parsing: < ${e.toString()} >\n`+`\tUsing the @chevrotain/regexp-to-ast library\n`+"\tPlease open an issue at: https://github.com/chevrotain/chevrotain/issues"+r)}}return[]}function xn(t,r,n){switch(t.type){case"Disjunction":for(let e=0;e<t.value.length;e++){xn(t.value[e],r,n)}break;case"Alternative":let a=t.value;for(let t=0;t<a.length;t++){let i=a[t];switch(i.type){case"EndAnchor":case"GroupBackReference":case"Lookahead":case"NegativeLookahead":case"StartAnchor":case"WordBoundary":case"NonWordBoundary":continue}let s=i;switch(s.type){case"Character":Tn(s.value,r,n);break;case"Set":if(s.complement===!0){throw Error(_n)}o(s.value,e=>{if(typeof e==="number"){Tn(e,r,n)}else{let t=e;if(n===!0){for(let e=t.from;e<=t.to;e++){Tn(e,r,n)}}else{for(let e=t.from;e<=t.to&&e<aa;e++){Tn(e,r,n)}if(t.to>=aa){let e=t.from>=aa?t.from:aa,n=t.to,a=ia(e),o=ia(n);for(let e=a;e<=o;e++){r[e]=e}}}}});break;case"Group":xn(s.value,r,n);break;default:throw Error("Non Exhaustive Match")}let l=s.quantifier!==e&&s.quantifier.atLeast===0;if(s.type==="Group"&&Rn(s)===!1||s.type!=="Group"&&l===!1){break}}break;default:throw Error("non exhaustive match!")}return _(r)}function Tn(e,t,r){const n=ia(e);t[n]=n;r===!0&&kn(e,t)}function kn(e,t){const r=String.fromCharCode(e);const n=r.toUpperCase();if(n!==r){let e=ia(n.charCodeAt(0));t[e]=e}else{let e=r.toLowerCase();if(e!==r){let r=ia(e.charCodeAt(0));t[r]=r}}}function vn(t,r){return g(t.value,t=>{if(typeof t==="number"){return d(r,t)}else{let n=t;return g(r,e=>n.from<=e&&e<=n.to)!==e}})}function Rn(e){const t=e.quantifier;if(t&&t.atLeast===0){return!0}if(!e.value){return!1}return y(e.value)?p(e.value,Rn):Rn(e.value)}class CharCodeFinder extends BaseRegExpVisitor{constructor(e){super();this.targetCharCodes=e;this.found=!1}visitChildren(e){if(this.found===!0){return}switch(e.type){case"Lookahead":this.visitLookahead(e);return;case"NegativeLookahead":this.visitNegativeLookahead(e);return}super.visitChildren(e)}visitCharacter(e){d(this.targetCharCodes,e.value)&&(this.found=!0)}visitSet(t){if(t.complement){vn(t,this.targetCharCodes)===e&&(this.found=!0)}else{vn(t,this.targetCharCodes)!==e&&(this.found=!0)}}}function An(t,r){if(r instanceof RegExp){let e=fn(r),n=new CharCodeFinder(t);n.visit(e);return n.found}else{return g(r,e=>d(t,e.charCodeAt(0)))!==e}}const Cn="PATTERN";var In="defaultMode";var En="modes";var Sn=typeof new RegExp("(?:)").sticky==="boolean";function Pn(t,r){r=x(r,{useSticky:Sn,debug:!1,safeMode:!1,positionTracking:"full",lineTerminatorCharacters:["\r","\n"],tracer:(e,t)=>t()});const n=r.tracer;n("initCharCodeToOptimizedIndexMap",()=>{sa()});let i;n("Reject Lexer.NA",()=>{i=T(t,e=>e[Cn]===Lexer.NA)});let s=!1;let u;n("Transform Patterns",()=>{s=!1;u=l(i,e=>{const t=e[Cn];if(c(t)){let e=t.source;if(e.length===1&&e!=="^"&&e!=="$"&&e!=="."&&!t.ignoreCase){return e}else if(e.length===2&&e[0]==="\\"&&!d(["d","D","s","S","t","r","n","t","0","c","b","B","f","v","w","W"],e[1])){return e[1]}else{return r.useSticky?Hn(t):zn(t)}}else if(k(t)){s=!0;return{exec:t}}else if(typeof t==="object"){s=!0;return t}else if(typeof t==="string"){if(t.length===1){return t}else{let e=t.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),n=new RegExp(e);return r.useSticky?Hn(n):zn(n)}}else{throw Error("non exhaustive match")}})});let p;let m;let f;let h;let _;n("misc mapping",()=>{p=l(i,e=>e.tokenTypeIdx);m=l(i,t=>{const r=t.GROUP;if(r===Lexer.SKIPPED){return e}else if(a(r)){return r}else if(v(r)){return!1}else{throw Error("non exhaustive match")}});f=l(i,e=>{const t=e.LONGER_ALT;if(t){let e=y(t)?l(t,e=>R(i,e)):[R(i,t)];return e}});h=l(i,e=>e.PUSH_MODE);_=l(i,e=>A(e,"POP_MODE"))});let g;n("Line Terminator Handling",()=>{const e=ra(r.lineTerminatorCharacters);g=l(i,e=>!1);r.positionTracking!=="onlyOffset"&&(g=l(i,t=>{if(A(t,"LINE_BREAKS")){return!!t.LINE_BREAKS}else{return ea(t,e)===!1&&An(e,t.PATTERN)}}))});let E;let S;let P;let N;n("Misc Mapping #2",()=>{E=l(i,Yn);S=l(u,Zn);P=C(i,(e,t)=>{const r=t.GROUP;a(r)&&!(r===Lexer.SKIPPED)&&(e[r]=[]);return e},{});N=l(u,(e,t)=>({pattern:u[t],longerAlt:f[t],canLineTerminator:g[t],isCustom:E[t],short:S[t],group:m[t],push:h[t],pop:_[t],tokenTypeIdx:p[t],tokenType:i[t]}))});let b=!0;let O=[];r.safeMode||n("First Char Optimization",()=>{O=C(i,(e,t,n)=>{if(typeof t.PATTERN==="string"){let r=t.PATTERN.charCodeAt(0),a=ia(r);na(e,a,N[n])}else if(y(t.START_CHARS_HINT)){let r;o(t.START_CHARS_HINT,t=>{const a=typeof t==="string"?t.charCodeAt(0):t;const o=ia(a);if(r!==o){r=o;na(e,o,N[n])}})}else if(c(t.PATTERN)){if(t.PATTERN.unicode){b=!1;r.ensureOptimizations&&Wr(`${gn}`+`\tUnable to analyze < ${t.PATTERN.toString()} > pattern.\n`+"\tThe regexp unicode flag is not currently supported by the regexp-to-ast library.\n"+"\tThis will disable the lexer's first char optimizations.\n"+"\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNICODE_OPTIMIZE")}else{let a=yn(t.PATTERN,r.ensureOptimizations);I(a)&&(b=!1);o(a,t=>{na(e,t,N[n])})}}else{r.ensureOptimizations&&Wr(`${gn}`+`\tTokenType: <${t.name}> is using a custom token pattern without providing <start_chars_hint> parameter.\n`+"\tThis will disable the lexer's first char optimizations.\n"+"\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_OPTIMIZE");b=!1}return e},[])});return{emptyGroups:P,patternIdxToConfig:N,charCodeToPatternIdxToConfig:O,hasCustom:s,canBeOptimized:b}}function Nn(e,t){let r=[];const n=On(e);r=r.concat(n.errors);const a=Ln(n.valid);const o=a.valid;r=r.concat(a.errors);r=r.concat(bn(o));r=r.concat(Un(o));r=r.concat(Vn(o,t));r=r.concat(Bn(o));return r}function bn(e){let t=[];const r=E(e,e=>c(e[Cn]));t=t.concat($n(r));t=t.concat(Fn(r));t=t.concat(Gn(r));t=t.concat(Kn(r));t=t.concat(Dn(r));return t}function On(e){const t=E(e,e=>!A(e,Cn));const r=l(t,e=>({message:"Token Type: ->"+e.name+"<- missing static 'PATTERN' property",type:0,tokenTypes:[e]}));const n=S(e,t);return{errors:r,valid:n}}function Ln(e){const t=E(e,e=>{const t=e[Cn];return!c(t)&&!k(t)&&!A(t,"exec")&&!a(t)});const r=l(t,e=>({message:"Token Type: ->"+e.name+"<- static 'PATTERN' can only be a RegExp, a"+" Function matching the {CustomPatternMatcherFunc} type or an Object matching the {ICustomPattern} interface.",type:1,tokenTypes:[e]}));const n=S(e,t);return{errors:r,valid:n}}const wn=/[^\\][$]/;function $n(e){class EndAnchorFinder extends BaseRegExpVisitor{constructor(){super(...arguments);this.found=!1}visitEndAnchor(e){this.found=!0}}const t=E(e,e=>{const t=e.PATTERN;try{let e=fn(t),r=new EndAnchorFinder;r.visit(e);return r.found}catch(e){return wn.test(t.source)}});const r=l(t,e=>({message:"Unexpected RegExp Anchor Error:\n"+"\tToken Type: ->"+e.name+"<- static 'PATTERN' cannot contain end of input anchor '$'\n"+"\tSee chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS"+"\tfor details.",type:2,tokenTypes:[e]}));return r}function Dn(e){const t=E(e,e=>{const t=e.PATTERN;return t.test("")});const r=l(t,e=>({message:"Token Type: ->"+e.name+"<- static 'PATTERN' must not match an empty string",type:12,tokenTypes:[e]}));return r}const Mn=/[^\\[][\^]|^\^/;function Fn(e){class StartAnchorFinder extends BaseRegExpVisitor{constructor(){super(...arguments);this.found=!1}visitStartAnchor(e){this.found=!0}}const t=E(e,e=>{const t=e.PATTERN;try{let e=fn(t),r=new StartAnchorFinder;r.visit(e);return r.found}catch(e){return Mn.test(t.source)}});const r=l(t,e=>({message:"Unexpected RegExp Anchor Error:\n"+"\tToken Type: ->"+e.name+"<- static 'PATTERN' cannot contain start of input anchor '^'\n"+"\tSee https://chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS"+"\tfor details.",type:11,tokenTypes:[e]}));return r}function Gn(e){const t=E(e,e=>{const t=e[Cn];return t instanceof RegExp&&(t.multiline||t.global)});const r=l(t,e=>({message:"Token Type: ->"+e.name+"<- static 'PATTERN' may NOT contain global('g') or multiline('m')",type:3,tokenTypes:[e]}));return r}function Kn(e){const t=[];let r=l(e,r=>C(e,(e,n)=>{if(r.PATTERN.source===n.PATTERN.source&&!d(t,n)&&n.PATTERN!==Lexer.NA){t.push(n);e.push(n);return e}return e},[]));r=P(r);const n=E(r,e=>e.length>1);const a=l(n,e=>{const t=l(e,e=>e.name);const r=N(e).PATTERN;return{message:`The same RegExp pattern ->${r}<-`+`has been used in all of the following Token Types: ${t.join(", ")} <-`,type:4,tokenTypes:e}});return a}function Un(e){const t=E(e,e=>{if(!A(e,"GROUP")){return!1}const t=e.GROUP;return t!==Lexer.SKIPPED&&t!==Lexer.NA&&!a(t)});const r=l(t,e=>({message:"Token Type: ->"+e.name+"<- static 'GROUP' can only be Lexer.SKIPPED/Lexer.NA/A String",type:5,tokenTypes:[e]}));return r}function Vn(t,r){const n=E(t,t=>t.PUSH_MODE!==e&&!d(r,t.PUSH_MODE));const a=l(n,e=>{const t=`Token Type: ->${e.name}<- static 'PUSH_MODE' value cannot refer to a Lexer Mode ->${e.PUSH_MODE}<-`+`which does not exist`;return{message:t,type:6,tokenTypes:[e]}});return a}function Bn(e){const t=[];const r=C(e,(e,t,r)=>{const n=t.PATTERN;if(n===Lexer.NA){return e}if(a(n)){e.push({str:n,idx:r,tokenType:t})}else c(n)&&Wn(n)&&e.push({str:n.source,idx:r,tokenType:t});return e},[]);o(e,(e,n)=>{o(r,({str:r,idx:a,tokenType:o})=>{if(n<a&&jn(r,e.PATTERN)){let r=`Token: ->${o.name}<- can never be matched.\n`+`Because it appears AFTER the Token Type ->${e.name}<-`+`in the lexer's definition.\n`+`See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNREACHABLE`;t.push({message:r,type:14,tokenTypes:[e,o]})}})});return t}function jn(e,t){if(c(t)){let r=t.exec(e);return r!==null&&r.index===0}else if(k(t)){return t(e,0,[],{})}else if(A(t,"exec")){return t.exec(e,0,[],{})}else if(typeof t==="string"){return t===e}else{throw Error("non exhaustive match")}}function Wn(t){const r=[".","\\","[","]","|","^","$","(",")","?","*","+","{"];return g(r,e=>t.source.indexOf(e)!==-1)===e}function zn(e){const t=e.ignoreCase?"i":"";return new RegExp(`^(?:${e.source})`,t)}function Hn(e){const t=e.ignoreCase?"iy":"y";return new RegExp(`${e.source}`,t)}function Xn(e,t,r){const n=[];A(e,In)||n.push({message:"A MultiMode Lexer cannot be initialized without a <"+In+"> property in its definition\n",type:7});A(e,En)||n.push({message:"A MultiMode Lexer cannot be initialized without a <"+En+"> property in its definition\n",type:8});A(e,En)&&A(e,In)&&!A(e.modes,e.defaultMode)&&n.push({message:`A MultiMode Lexer cannot be initialized with a ${In}: <${e.defaultMode}>`+`which does not exist\n`,type:9});A(e,En)&&o(e.modes,(e,t)=>{o(e,(r,a)=>{if(v(r)){n.push({message:`A Lexer cannot be initialized using an undefined Token Type. Mode:`+`<${t}> at index: <${a}>\n`,type:10})}else if(A(r,"LONGER_ALT")){let a=y(r.LONGER_ALT)?r.LONGER_ALT:[r.LONGER_ALT];o(a,a=>{!v(a)&&!d(e,a)&&n.push({message:`A MultiMode Lexer cannot be initialized with a longer_alt <${a.name}> on token <${r.name}> outside of mode <${t}>\n`,type:17})})}})});return n}function Jn(e,t,r){const n=[];let a=!1;const i=P(h(_(e.modes)));const s=T(i,e=>e[Cn]===Lexer.NA);const l=ra(r);t&&o(s,e=>{const t=ea(e,l);if(t!==!1){let r=ta(e,t),a={message:r,type:t.issue,tokenType:e};n.push(a)}else{if(A(e,"LINE_BREAKS")){e.LINE_BREAKS===!0&&(a=!0)}else{An(l,e.PATTERN)&&(a=!0)}}});t&&!a&&n.push({message:"Warning: No LINE_BREAKS Found.\n"+"\tThis Lexer has been defined to track line and column information,\n"+"\tBut none of the Token Types can be identified as matching a line terminator.\n"+"\tSee https://chevrotain.io/docs/guide/resolving_lexer_errors.html#LINE_BREAKS \n"+"\tfor details.",type:13});return n}function qn(e){const t={};const r=b(e);o(r,r=>{const n=e[r];if(y(n)){t[r]=[]}else{throw Error("non exhaustive match")}});return t}function Yn(e){const t=e.PATTERN;if(c(t)){return!1}else if(k(t)){return!0}else if(A(t,"exec")){return!0}else if(a(t)){return!1}else{throw Error("non exhaustive match")}}function Zn(e){if(a(e)&&e.length===1){return e.charCodeAt(0)}else{return!1}}var Qn={test:function(e){const t=e.length;for(let r=this.lastIndex;r<t;r++){let t=e.charCodeAt(r);if(t===10){this.lastIndex=r+1;return!0}else if(t===13){if(e.charCodeAt(r+1)===10){this.lastIndex=r+2}else{this.lastIndex=r+1}return!0}}return!1},lastIndex:0};function ea(e,t){if(A(e,"LINE_BREAKS")){return!1}else{if(c(e.PATTERN)){try{An(t,e.PATTERN)}catch(e){return{issue:15,errMsg:e.message}}return!1}else if(a(e.PATTERN)){return!1}else if(Yn(e)){return{issue:16}}else{throw Error("non exhaustive match")}}}function ta(e,t){if(t.issue===15){return"Warning: unable to identify line terminator usage in pattern.\n"+`\tThe problem is in the <${e.name}> Token Type\n`+`\t Root cause: ${t.errMsg}.\n`+"\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#IDENTIFY_TERMINATOR"}else if(t.issue===16){return"Warning: A Custom Token Pattern should specify the <line_breaks> option.\n"+`\tThe problem is in the <${e.name}> Token Type\n`+"\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_LINE_BREAK"}else{throw Error("non exhaustive match")}}function ra(e){const t=l(e,e=>{if(a(e)){return e.charCodeAt(0)}else{return e}});return t}function na(t,r,n){if(t[r]===e){t[r]=[n]}else{t[r].push(n)}}var aa=256;let oa=[];function ia(e){return e<aa?e:oa[e]}function sa(){if(I(oa)){oa=new Array(65536);for(let e=0;e<65536;e++){oa[e]=e>255?255+~~(e/255):e}}}function la(e,t){const r=e.tokenTypeIdx;if(r===t.tokenTypeIdx){return!0}else{return t.isParent===!0&&t.categoryMatchesMap[r]===!0}}function ca(e,t){return e.tokenTypeIdx===t.tokenTypeIdx}var ua=1;var da={};function pa(e){const t=ma(e);fa(t);_a(t);ha(t);o(t,e=>{e.isParent=e.categoryMatches.length>0})}function ma(e){let t=O(e);let r=e;let n=!0;while(n){r=P(h(l(r,e=>e.CATEGORIES)));let e=S(r,t);t=t.concat(e);if(I(e)){n=!1}else{r=e}}return t}function fa(e){o(e,e=>{if(!ya(e)){da[ua]=e;e.tokenTypeIdx=ua++}xa(e)&&!y(e.CATEGORIES)&&(e.CATEGORIES=[e.CATEGORIES]);xa(e)||(e.CATEGORIES=[]);Ta(e)||(e.categoryMatches=[]);ka(e)||(e.categoryMatchesMap={})})}function ha(e){o(e,e=>{e.categoryMatches=[];o(e.categoryMatchesMap,(t,r)=>{e.categoryMatches.push(da[r].tokenTypeIdx)})})}function _a(e){o(e,e=>{ga([],e)})}function ga(e,t){o(e,e=>{t.categoryMatchesMap[e.tokenTypeIdx]=!0});o(t.CATEGORIES,r=>{const n=e.concat(t);d(n,r)||ga(n,r)})}function ya(e){return A(e,"tokenTypeIdx")}function xa(e){return A(e,"CATEGORIES")}function Ta(e){return A(e,"categoryMatches")}function ka(e){return A(e,"categoryMatchesMap")}function va(e){return A(e,"tokenTypeIdx")}var Ra={buildUnableToPopLexerModeMessage(e){return`Unable to pop Lexer Mode after encountering Token ->${e.image}<- The Mode Stack is empty`},buildUnexpectedCharactersMessage(e,t,r,n,a){return`unexpected character: ->${e.charAt(t)}<- at offset: ${t},`+` skipped ${r} characters.`}};const Aa={deferDefinitionErrorsHandling:!1,positionTracking:"full",lineTerminatorsPattern:/\n|\r\n?/g,lineTerminatorCharacters:["\n","\r"],ensureOptimizations:!1,safeMode:!1,errorMessageProvider:Ra,traceInitPerf:!1,skipValidations:!1,recoveryEnabled:!0};Object.freeze(Aa);class Lexer{constructor(e,t=Aa){this.lexerDefinition=e;this.lexerDefinitionErrors=[];this.lexerDefinitionWarning=[];this.patternIdxToConfig={};this.charCodeToPatternIdxToConfig={};this.modes=[];this.emptyGroups={};this.trackStartLines=!0;this.trackEndLines=!0;this.hasCustom=!1;this.canModeBeOptimized={};this.TRACE_INIT=((e,t)=>{if(this.traceInitPerf===!0){this.traceInitIndent++;let r=new Array(this.traceInitIndent+1).join("\t");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${r}--\x3e <${e}>`);let{time:n,value:a}=Hr(t),o=n>10?console.warn:console.log;this.traceInitIndent<this.traceInitMaxIdent&&o(`${r}<-- <${e}> time: ${n}ms`);this.traceInitIndent--;return a}else{return t()}});if(typeof t==="boolean"){throw Error("The second argument to the Lexer constructor is now an ILexerConfig Object.\n"+"a boolean 2nd argument is no longer supported")}this.config=i({},Aa,t);const r=this.config.traceInitPerf;if(r===!0){this.traceInitMaxIdent=Infinity;this.traceInitPerf=!0}else if(typeof r==="number"){this.traceInitMaxIdent=r;this.traceInitPerf=!0}this.traceInitIndent=-1;this.TRACE_INIT("Lexer Constructor",()=>{let r;let n=!0;this.TRACE_INIT("Lexer Config handling",()=>{if(this.config.lineTerminatorsPattern===Aa.lineTerminatorsPattern){this.config.lineTerminatorsPattern=Qn}else{if(this.config.lineTerminatorCharacters===Aa.lineTerminatorCharacters){throw Error("Error: Missing <lineTerminatorCharacters> property on the Lexer config.\n"+"\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#MISSING_LINE_TERM_CHARS")}}if(t.safeMode&&t.ensureOptimizations){throw Error('"safeMode" and "ensureOptimizations" flags are mutually exclusive.')}this.trackStartLines=/full|onlyStart/i.test(this.config.positionTracking)
this.trackEndLines=/full/i.test(this.config.positionTracking);if(y(e)){r={modes:{defaultMode:O(e)},defaultMode:In}}else{n=!1;r=O(e)}});if(this.config.skipValidations===!1){this.TRACE_INIT("performRuntimeChecks",()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(Xn(r,this.trackStartLines,this.config.lineTerminatorCharacters))});this.TRACE_INIT("performWarningRuntimeChecks",()=>{this.lexerDefinitionWarning=this.lexerDefinitionWarning.concat(Jn(r,this.trackStartLines,this.config.lineTerminatorCharacters))})}r.modes=r.modes?r.modes:{};o(r.modes,(e,t)=>{r.modes[t]=T(e,e=>v(e))});const a=b(r.modes);o(r.modes,(e,r)=>{this.TRACE_INIT(`Mode: <${r}> processing`,()=>{this.modes.push(r);this.config.skipValidations===!1&&this.TRACE_INIT(`validatePatterns`,()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(Nn(e,a))});if(I(this.lexerDefinitionErrors)){pa(e);let n;this.TRACE_INIT(`analyzeTokenTypes`,()=>{n=Pn(e,{lineTerminatorCharacters:this.config.lineTerminatorCharacters,positionTracking:t.positionTracking,ensureOptimizations:t.ensureOptimizations,safeMode:t.safeMode,tracer:this.TRACE_INIT})});this.patternIdxToConfig[r]=n.patternIdxToConfig;this.charCodeToPatternIdxToConfig[r]=n.charCodeToPatternIdxToConfig;this.emptyGroups=i({},this.emptyGroups,n.emptyGroups);this.hasCustom=n.hasCustom||this.hasCustom;this.canModeBeOptimized[r]=n.canBeOptimized}})});this.defaultMode=r.defaultMode;if(!I(this.lexerDefinitionErrors)&&!this.config.deferDefinitionErrorsHandling){let e=l(this.lexerDefinitionErrors,e=>e.message),t=e.join("-----------------------\n");throw new Error("Errors detected in definition of Lexer:\n"+t)}o(this.lexerDefinitionWarning,e=>{zr(e.message)});this.TRACE_INIT("Choosing sub-methods implementations",()=>{if(Sn){this.chopInput=L;this.match=this.matchWithTest}else{this.updateLastIndex=w;this.match=this.matchWithExec}n&&(this.handleModes=w);this.trackStartLines===!1&&(this.computeNewColumn=L);this.trackEndLines===!1&&(this.updateTokenEndLineColumnLocation=w);if(/full/i.test(this.config.positionTracking)){this.createTokenInstance=this.createFullToken}else if(/onlyStart/i.test(this.config.positionTracking)){this.createTokenInstance=this.createStartOnlyToken}else if(/onlyOffset/i.test(this.config.positionTracking)){this.createTokenInstance=this.createOffsetOnlyToken}else{throw Error(`Invalid <positionTracking> config option: "${this.config.positionTracking}"`)}if(this.hasCustom){this.addToken=this.addTokenUsingPush;this.handlePayload=this.handlePayloadWithCustom}else{this.addToken=this.addTokenUsingMemberAccess;this.handlePayload=this.handlePayloadNoCustom}});this.TRACE_INIT("Failed Optimization Warnings",()=>{const e=C(this.canModeBeOptimized,(e,t,r)=>{t===!1&&e.push(r);return e},[]);if(t.ensureOptimizations&&!I(e)){throw Error(`Lexer Modes: < ${e.join(", ")} > cannot be optimized.\n`+'\t Disable the "ensureOptimizations" lexer config flag to silently ignore this and run the lexer in an un-optimized mode.\n'+"\t Or inspect the console log for details on how to resolve these issues.")}});this.TRACE_INIT("clearRegExpParserCache",()=>{hn()});this.TRACE_INIT("toFastProperties",()=>{Xr(this)})})}tokenize(e,t=this.defaultMode){if(!I(this.lexerDefinitionErrors)){let e=l(this.lexerDefinitionErrors,e=>e.message),t=e.join("-----------------------\n");throw new Error("Unable to Tokenize because Errors detected in definition of Lexer:\n"+t)}return this.tokenizeInternal(e,t)}tokenizeInternal(t,r){let n,a,o,i,s,l,c,u,d,p,m,f,h,_,g;const y=t;const x=y.length;let T=0;let k=0;const v=this.hasCustom?0:Math.floor(t.length/10);const R=new Array(v);const A=[];let C=this.trackStartLines?1:e;let I=this.trackStartLines?1:e;const E=qn(this.emptyGroups);const S=this.trackStartLines;const P=this.config.lineTerminatorsPattern;let N=0;let b=[];let O=[];const L=[];const w=[];Object.freeze(w);let D;function M(){return b}function F(t){const r=ia(t);const n=O[r];if(n===e){return w}else{return n}}const G=t=>{if(L.length===1&&t.tokenType.PUSH_MODE===e){let e=this.config.errorMessageProvider.buildUnableToPopLexerModeMessage(t);A.push({offset:t.startOffset,line:t.startLine,column:t.startColumn,length:t.image.length,message:e})}else{L.pop();let e=$(L);b=this.patternIdxToConfig[e];O=this.charCodeToPatternIdxToConfig[e];N=b.length;let t=this.canModeBeOptimized[e]&&this.config.safeMode===!1;if(O&&t){D=F}else{D=M}}};function K(e){L.push(e);O=this.charCodeToPatternIdxToConfig[e];b=this.patternIdxToConfig[e];N=b.length;N=b.length;const t=this.canModeBeOptimized[e]&&this.config.safeMode===!1;if(O&&t){D=F}else{D=M}}K.call(this,r);let U;const V=this.config.recoveryEnabled;while(T<x){l=null;let r=y.charCodeAt(T),v=D(r),O=v.length;for(n=0;n<O;n++){U=v[n];let a=U.pattern;c=null;let d=U.short;if(d!==!1){r===d&&(l=a)}else if(U.isCustom===!0){g=a.exec(y,T,R,E);if(g!==null){l=g[0];g.payload!==e&&(c=g.payload)}else{l=null}}else{this.updateLastIndex(a,T);l=this.match(a,t,T)}if(l!==null){s=U.longerAlt;if(s!==e){let r=s.length;for(o=0;o<r;o++){let r=b[s[o]],n=r.pattern;u=null;if(r.isCustom===!0){g=n.exec(y,T,R,E);if(g!==null){i=g[0];g.payload!==e&&(u=g.payload)}else{i=null}}else{this.updateLastIndex(n,T);i=this.match(n,t,T)}if(i&&i.length>l.length){l=i;c=u;U=r;break}}}break}}if(l!==null){d=l.length;p=U.group;if(p!==e){m=U.tokenTypeIdx;f=this.createTokenInstance(l,T,m,U.tokenType,C,I,d);this.handlePayload(f,c);if(p===!1){k=this.addToken(R,k,f)}else{E[p].push(f)}}t=this.chopInput(t,d);T=T+d;I=this.computeNewColumn(I,d);if(S===!0&&U.canLineTerminator===!0){let e=0,t,r;P.lastIndex=0;do{t=P.test(l);if(t===!0){r=P.lastIndex-1;e++}}while(t===!0);if(e!==0){C=C+e;I=d-r;this.updateTokenEndLineColumnLocation(f,p,r,e,C,I,d)}}this.handleModes(U,G,K,f)}else{let e=T,r=C,n=I,o=V===!1;while(o===!1&&T<x){t=this.chopInput(t,1);T++;for(a=0;a<N;a++){let e=b[a],r=e.pattern,n=e.short;if(n!==!1){y.charCodeAt(T)===n&&(o=!0)}else if(e.isCustom===!0){o=r.exec(y,T,R,E)!==null}else{this.updateLastIndex(r,T);o=r.exec(t)!==null}if(o===!0){break}}}h=T-e;I=this.computeNewColumn(I,h);_=this.config.errorMessageProvider.buildUnexpectedCharactersMessage(y,e,h,r,n);A.push({offset:e,line:r,column:n,length:h,message:_});if(V===!1){break}}}this.hasCustom||(R.length=k);return{tokens:R,groups:E,errors:A}}handleModes(t,r,n,a){if(t.pop===!0){let o=t.push;r(a);o!==e&&n.call(this,o)}else t.push!==e&&n.call(this,t.push)}chopInput(e,t){return e.substring(t)}updateLastIndex(e,t){e.lastIndex=t}updateTokenEndLineColumnLocation(t,r,n,a,o,i,s){let l,c;if(r!==e){l=n===s-1;c=l?-1:0;if(!(a===1&&l===!0)){t.endLine=o+c;t.endColumn=i-1+-c}}}computeNewColumn(e,t){return e+t}createOffsetOnlyToken(e,t,r,n){return{image:e,startOffset:t,tokenTypeIdx:r,tokenType:n}}createStartOnlyToken(e,t,r,n,a,o){return{image:e,startOffset:t,startLine:a,startColumn:o,tokenTypeIdx:r,tokenType:n}}createFullToken(e,t,r,n,a,o,i){return{image:e,startOffset:t,endOffset:t+i-1,startLine:a,endLine:a,startColumn:o,endColumn:o+i-1,tokenTypeIdx:r,tokenType:n}}addTokenUsingPush(e,t,r){e.push(r);return t}addTokenUsingMemberAccess(e,t,r){e[t]=r;t++;return t}handlePayloadNoCustom(e,t){}handlePayloadWithCustom(e,t){t!==null&&(e.payload=t)}matchWithTest(e,t,r){const n=e.test(t);if(n===!0){return t.substring(r,e.lastIndex)}return null}matchWithExec(e,t){const r=e.exec(t);return r!==null?r[0]:null}}Lexer.SKIPPED="This marks a skipped Token pattern, this means each token identified by it will"+"be consumed and then thrown into oblivion, this can be used to for example to completely ignore whitespace.";Lexer.NA=/NOT_APPLICABLE/;function Ca(e){if(Ia(e)){return e.LABEL}else{return e.name}}function Ia(e){return a(e.LABEL)&&e.LABEL!==""}const Ea="parent";const Sa="categories";const Pa="label";const Na="group";const ba="push_mode";const Oa="pop_mode";const La="longer_alt";const wa="line_breaks";const $a="start_chars_hint";function Da(e){return Ma(e)}function Ma(e){const t=e.pattern;const r={};r.name=e.name;v(t)||(r.PATTERN=t);if(A(e,Ea)){throw"The parent property is no longer supported.\n"+"See: https://github.com/chevrotain/chevrotain/issues/564#issuecomment-349062346 for details."}A(e,Sa)&&(r.CATEGORIES=e[Sa]);pa([r]);A(e,Pa)&&(r.LABEL=e[Pa]);A(e,Na)&&(r.GROUP=e[Na]);A(e,Oa)&&(r.POP_MODE=e[Oa]);A(e,ba)&&(r.PUSH_MODE=e[ba]);A(e,La)&&(r.LONGER_ALT=e[La]);A(e,wa)&&(r.LINE_BREAKS=e[wa]);A(e,$a)&&(r.START_CHARS_HINT=e[$a]);return r}var Fa=Da({name:"EOF",pattern:Lexer.NA});pa([Fa]);function Ga(e,t,r,n,a,o,i,s){return{image:t,startOffset:r,endOffset:n,startLine:a,endLine:o,startColumn:i,endColumn:s,tokenTypeIdx:e.tokenTypeIdx,tokenType:e}}function Ka(e,t){return la(e,t)}var Ua={buildMismatchTokenMessage({expected:e,actual:t,previous:r,ruleName:n}){const a=Ia(e);const o=a?`--\x3e ${Ca(e)} <--`:`token of type --\x3e ${e.name} <--`;const i=`Expecting ${o} but found --\x3e '${t.image}' <--`;return i},buildNotAllInputParsedMessage({firstRedundant:e,ruleName:t}){return"Redundant input, expecting EOF but found: "+e.image},buildNoViableAltMessage({expectedPathsPerAlt:e,actual:t,previous:r,customUserDescription:n,ruleName:a}){const o="Expecting: ";const i=N(t).image;const s="\nbut found: '"+i+"'";if(n){return o+n+s}else{let t=C(e,(e,t)=>e.concat(t),[]),r=l(t,e=>`[${l(e,e=>Ca(e)).join(", ")}]`),n=l(r,(e,t)=>`  ${t+1}. ${e}`),a=`one of these possible Token sequences:\n${n.join("\n")}`;return o+a+s}},buildEarlyExitMessage({expectedIterationPaths:e,actual:t,customUserDescription:r,ruleName:n}){const a="Expecting: ";const o=N(t).image;const i="\nbut found: '"+o+"'";if(r){return a+r+i}else{let t=l(e,e=>`[${l(e,e=>Ca(e)).join(",")}]`),r=`expecting at least one iteration which starts with one of these possible Token sequences::\n  `+`<${t.join(" ,")}>`;return a+r+i}}};Object.freeze(Ua);var Va={buildRuleNotFoundError(e,t){const r="Invalid grammar, reference to a rule which is not defined: ->"+t.nonTerminalName+"<-\n"+"inside top level rule: ->"+e.name+"<-";return r}};var Ba={buildDuplicateFoundError(e,t){function r(e){if(e instanceof Terminal){return e.terminalType.name}else if(e instanceof NonTerminal){return e.nonTerminalName}else{return""}}const n=e.name;const a=N(t);const o=a.idx;const i=rn(a);const s=r(a);const l=o>0;let c=`->${i}${l?o:""}<- ${s?`with argument: ->${s}<-`:""}\n                  appears more than once (${t.length} times) in the top level rule: ->${n}<-.                  \n                  For further details see: https://chevrotain.io/docs/FAQ.html#NUMERICAL_SUFFIXES \n                  `;c=c.replace(/[ \t]+/g," ");c=c.replace(/\s\s+/g,"\n");return c},buildNamespaceConflictError(e){const t=`Namespace conflict found in grammar.\n`+`The grammar has both a Terminal(Token) and a Non-Terminal(Rule) named: <${e.name}>.\n`+`To resolve this make sure each Terminal and Non-Terminal names are unique\n`+`This is easy to accomplish by using the convention that Terminal names start with an uppercase letter\n`+`and Non-Terminal names start with a lower case letter.`;return t},buildAlternationPrefixAmbiguityError(e){const t=l(e.prefixPath,e=>Ca(e)).join(", ");const r=e.alternation.idx===0?"":e.alternation.idx;const n=`Ambiguous alternatives: <${e.ambiguityIndices.join(" ,")}> due to common lookahead prefix\n`+`in <OR${r}> inside <${e.topLevelRule.name}> Rule,\n`+`<${t}> may appears as a prefix path in all these alternatives.\n`+`See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#COMMON_PREFIX\n`+`For Further details.`;return n},buildAlternationAmbiguityError(e){const t=l(e.prefixPath,e=>Ca(e)).join(", ");const r=e.alternation.idx===0?"":e.alternation.idx;let n=`Ambiguous Alternatives Detected: <${e.ambiguityIndices.join(" ,")}> in <OR${r}>`+` inside <${e.topLevelRule.name}> Rule,\n`+`<${t}> may appears as a prefix path in all these alternatives.\n`;n=n+`See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES\n`+`For Further details.`;return n},buildEmptyRepetitionError(e){let t=rn(e.repetition);e.repetition.idx!==0&&(t+=e.repetition.idx);const r=`The repetition <${t}> within Rule <${e.topLevelRule.name}> can never consume any tokens.\n`+`This could lead to an infinite loop.`;return r},buildTokenNameError(e){return"deprecated"},buildEmptyAlternationError(e){const t=`Ambiguous empty alternative: <${e.emptyChoiceIdx+1}>`+` in <OR${e.alternation.idx}> inside <${e.topLevelRule.name}> Rule.\n`+`Only the last alternative may be an empty alternative.`;return t},buildTooManyAlternativesError(e){const t=`An Alternation cannot have more than 256 alternatives:\n`+`<OR${e.alternation.idx}> inside <${e.topLevelRule.name}> Rule.\n has ${e.alternation.definition.length+1} alternatives.`;return t},buildLeftRecursionError(e){const t=e.topLevelRule.name;const r=l(e.leftRecursionPath,e=>e.name);const n=`${t} --\x3e ${r.concat([t]).join(" --\x3e ")}`;const a=`Left Recursion found in grammar.\n`+`rule: <${t}> can be invoked from itself (directly or indirectly)\n`+`without consuming any Tokens. The grammar path that causes this is: \n ${n}\n`+` To fix this refactor your grammar to remove the left recursion.\n`+`see: https://en.wikipedia.org/wiki/LL_parser#Left_factoring.`;return a},buildInvalidRuleNameError(e){return"deprecated"},buildDuplicateRuleNameError(e){let t;if(e.topLevelRule instanceof Rule){t=e.topLevelRule.name}else{t=e.topLevelRule}const r=`Duplicate definition, rule: ->${t}<- is already defined in the grammar: ->${e.grammarName}<-`;return r}};function ja(e,t){const r=new GastRefResolverVisitor(e,t);r.resolveRefs();return r.errors}class GastRefResolverVisitor extends GAstVisitor{constructor(e,t){super();this.nameToTopRule=e;this.errMsgProvider=t;this.errors=[]}resolveRefs(){o(_(this.nameToTopRule),e=>{this.currTopLevel=e;e.accept(this)})}visitNonTerminal(e){const t=this.nameToTopRule[e.nonTerminalName];if(!t){let t=this.errMsgProvider.buildRuleNotFoundError(this.currTopLevel,e);this.errors.push({message:t,type:4,ruleName:this.currTopLevel.name,unresolvedRefName:e.nonTerminalName})}else{e.referencedRule=t}}}class AbstractNextPossibleTokensWalker extends RestWalker{constructor(e,t){super();this.topProd=e;this.path=t;this.possibleTokTypes=[];this.nextProductionName="";this.nextProductionOccurrence=0;this.found=!1;this.isAtEndOfPath=!1}startWalking(){this.found=!1;if(this.path.ruleStack[0]!==this.topProd.name){throw Error("The path does not start with the walker's top Rule!")}this.ruleStack=O(this.path.ruleStack).reverse();this.occurrenceStack=O(this.path.occurrenceStack).reverse();this.ruleStack.pop();this.occurrenceStack.pop();this.updateExpectedNext();this.walk(this.topProd);return this.possibleTokTypes}walk(e,t=[]){this.found||super.walk(e,t)}walkProdRef(e,t,r){if(e.referencedRule.name===this.nextProductionName&&e.idx===this.nextProductionOccurrence){let n=t.concat(r);this.updateExpectedNext();this.walk(e.referencedRule,n)}}updateExpectedNext(){if(I(this.ruleStack)){this.nextProductionName="";this.nextProductionOccurrence=0;this.isAtEndOfPath=!0}else{this.nextProductionName=this.ruleStack.pop();this.nextProductionOccurrence=this.occurrenceStack.pop()}}}class NextAfterTokenWalker extends AbstractNextPossibleTokensWalker{constructor(e,t){super(e,t);this.path=t;this.nextTerminalName="";this.nextTerminalOccurrence=0;this.nextTerminalName=this.path.lastTok.name;this.nextTerminalOccurrence=this.path.lastTokOccurrence}walkTerminal(e,t,r){if(this.isAtEndOfPath&&e.terminalType.name===this.nextTerminalName&&e.idx===this.nextTerminalOccurrence&&!this.found){let e=t.concat(r),n=new Alternative({definition:e});this.possibleTokTypes=an(n);this.found=!0}}}class AbstractNextTerminalAfterProductionWalker extends RestWalker{constructor(t,r){super();this.topRule=t;this.occurrence=r;this.result={token:e,occurrence:e,isEndOfRule:e}}startWalking(){this.walk(this.topRule);return this.result}}class NextTerminalAfterManyWalker extends AbstractNextTerminalAfterProductionWalker{walkMany(t,r,n){if(t.idx===this.occurrence){let t=N(r.concat(n));this.result.isEndOfRule=t===e;if(t instanceof Terminal){this.result.token=t.terminalType;this.result.occurrence=t.idx}}else{super.walkMany(t,r,n)}}}class NextTerminalAfterManySepWalker extends AbstractNextTerminalAfterProductionWalker{walkManySep(t,r,n){if(t.idx===this.occurrence){let t=N(r.concat(n));this.result.isEndOfRule=t===e;if(t instanceof Terminal){this.result.token=t.terminalType;this.result.occurrence=t.idx}}else{super.walkManySep(t,r,n)}}}class NextTerminalAfterAtLeastOneWalker extends AbstractNextTerminalAfterProductionWalker{walkAtLeastOne(t,r,n){if(t.idx===this.occurrence){let t=N(r.concat(n));this.result.isEndOfRule=t===e;if(t instanceof Terminal){this.result.token=t.terminalType;this.result.occurrence=t.idx}}else{super.walkAtLeastOne(t,r,n)}}}class NextTerminalAfterAtLeastOneSepWalker extends AbstractNextTerminalAfterProductionWalker{walkAtLeastOneSep(t,r,n){if(t.idx===this.occurrence){let t=N(r.concat(n));this.result.isEndOfRule=t===e;if(t instanceof Terminal){this.result.token=t.terminalType;this.result.occurrence=t.idx}}else{super.walkAtLeastOneSep(t,r,n)}}}function Wa(e,t,r=[]){r=O(r);let n=[];let a=0;function i(t){return t.concat(m(e,a+1))}function s(e){const a=Wa(i(e),t,r);return n.concat(a)}while(r.length<t&&a<e.length){let t=e[a];if(t instanceof Alternative){return s(t.definition)}else if(t instanceof NonTerminal){return s(t.definition)}else if(t instanceof Option){n=s(t.definition)}else if(t instanceof RepetitionMandatory){let e=t.definition.concat([new Repetition({definition:t.definition})]);return s(e)}else if(t instanceof RepetitionMandatoryWithSeparator){let e=[new Alternative({definition:t.definition}),new Repetition({definition:[new Terminal({terminalType:t.separator})].concat(t.definition)})];return s(e)}else if(t instanceof RepetitionWithSeparator){let e=t.definition.concat([new Repetition({definition:[new Terminal({terminalType:t.separator})].concat(t.definition)})]);n=s(e)}else if(t instanceof Repetition){let e=t.definition.concat([new Repetition({definition:t.definition})]);n=s(e)}else if(t instanceof Alternation){o(t.definition,e=>{I(e.definition)===!1&&(n=s(e.definition))});return n}else if(t instanceof Terminal){r.push(t.terminalType)}else{throw Error("non exhaustive match")}a++}n.push({partialPath:r,suffixDef:m(e,a)});return n}function za(e,t,r,n){const a="EXIT_NONE_TERMINAL";const o=[a];const i="EXIT_ALTERNATIVE";let s=!1;const l=t.length;const c=l-n-1;const u=[];const d=[];d.push({idx:-1,def:e,ruleStack:[],occurrenceStack:[]});while(!I(d)){let e=d.pop();if(e===i){s&&$(d).idx<=c&&d.pop();continue}let n=e.def,p=e.idx,f=e.ruleStack,h=e.occurrenceStack;if(I(n)){continue}let _=n[0];if(_===a){let e={idx:p,def:m(n),ruleStack:D(f),occurrenceStack:D(h)};d.push(e)}else if(_ instanceof Terminal){if(p<l-1){let e=p+1,a=t[e];if(r(a,_.terminalType)){let t={idx:e,def:m(n),ruleStack:f,occurrenceStack:h};d.push(t)}}else if(p===l-1){u.push({nextTokenType:_.terminalType,nextTokenOccurrence:_.idx,ruleStack:f,occurrenceStack:h});s=!0}else{throw Error("non exhaustive match")}}else if(_ instanceof NonTerminal){let e=O(f);e.push(_.nonTerminalName);let t=O(h);t.push(_.idx);let r={idx:p,def:_.definition.concat(o,m(n)),ruleStack:e,occurrenceStack:t};d.push(r)}else if(_ instanceof Option){let e={idx:p,def:m(n),ruleStack:f,occurrenceStack:h};d.push(e);d.push(i);let t={idx:p,def:_.definition.concat(m(n)),ruleStack:f,occurrenceStack:h};d.push(t)}else if(_ instanceof RepetitionMandatory){let e=new Repetition({definition:_.definition,idx:_.idx}),t=_.definition.concat([e],m(n)),r={idx:p,def:t,ruleStack:f,occurrenceStack:h};d.push(r)}else if(_ instanceof RepetitionMandatoryWithSeparator){let e=new Terminal({terminalType:_.separator}),t=new Repetition({definition:[e].concat(_.definition),idx:_.idx}),r=_.definition.concat([t],m(n)),a={idx:p,def:r,ruleStack:f,occurrenceStack:h};d.push(a)}else if(_ instanceof RepetitionWithSeparator){let e={idx:p,def:m(n),ruleStack:f,occurrenceStack:h};d.push(e);d.push(i);let t=new Terminal({terminalType:_.separator}),r=new Repetition({definition:[t].concat(_.definition),idx:_.idx}),a=_.definition.concat([r],m(n)),o={idx:p,def:a,ruleStack:f,occurrenceStack:h};d.push(o)}else if(_ instanceof Repetition){let e={idx:p,def:m(n),ruleStack:f,occurrenceStack:h};d.push(e);d.push(i);let t=new Repetition({definition:_.definition,idx:_.idx}),r=_.definition.concat([t],m(n)),a={idx:p,def:r,ruleStack:f,occurrenceStack:h};d.push(a)}else if(_ instanceof Alternation){for(let e=_.definition.length-1;e>=0;e--){let t=_.definition[e],r={idx:p,def:t.definition.concat(m(n)),ruleStack:f,occurrenceStack:h};d.push(r);d.push(i)}}else if(_ instanceof Alternative){d.push({idx:p,def:_.definition.concat(m(n)),ruleStack:f,occurrenceStack:h})}else if(_ instanceof Rule){d.push(Ha(_,p,f,h))}else{throw Error("non exhaustive match")}}return u}function Ha(e,t,r,n){const a=O(r);a.push(e.name);const o=O(n);o.push(1);return{idx:t,def:e.definition,ruleStack:a,occurrenceStack:o}}var Xa={};(function(e){e[e["OPTION"]=0]="OPTION";e[e["REPETITION"]=1]="REPETITION";e[e["REPETITION_MANDATORY"]=2]="REPETITION_MANDATORY";e[e["REPETITION_MANDATORY_WITH_SEPARATOR"]=3]="REPETITION_MANDATORY_WITH_SEPARATOR";e[e["REPETITION_WITH_SEPARATOR"]=4]="REPETITION_WITH_SEPARATOR";e[e["ALTERNATION"]=5]="ALTERNATION"})(Xa);function Ja(e){if(e instanceof Option||e==="Option"){return 0}else if(e instanceof Repetition||e==="Repetition"){return 1}else if(e instanceof RepetitionMandatory||e==="RepetitionMandatory"){return 2}else if(e instanceof RepetitionMandatoryWithSeparator||e==="RepetitionMandatoryWithSeparator"){return 3}else if(e instanceof RepetitionWithSeparator||e==="RepetitionWithSeparator"){return 4}else if(e instanceof Alternation||e==="Alternation"){return 5}else{throw Error("non exhaustive match")}}function qa(e){const{occurrence:t,rule:r,prodType:n,maxLookahead:a}=e;const o=Ja(n);if(o===5){return oo(t,r,a)}else{return io(t,r,o,a)}}function Ya(e,t,r,n,a,o){const i=oo(e,t,r);const s=co(i)?ca:la;return o(i,n,s,a)}function Za(e,t,r,n,a,o){const i=io(e,t,a,r);const s=co(i)?ca:la;return o(i[0],s,n)}function Qa(t,r,n,a){const i=t.length;const s=p(t,e=>p(e,e=>e.length===1));if(r){return function(r){const a=l(r,e=>e.GATE);for(let r=0;r<i;r++){let o=t[r],i=o.length,s=a[r];if(s!==e&&s.call(this)===!1){continue}e:for(let e=0;e<i;e++){let t=o[e],a=t.length;for(let e=0;e<a;e++){let r=this.LA(e+1);if(n(r,t[e])===!1){continue e}}return r}}return e}}else if(s&&!a){let e=l(t,e=>h(e)),r=C(e,(e,t,r)=>{o(t,t=>{A(e,t.tokenTypeIdx)||(e[t.tokenTypeIdx]=r);o(t.categoryMatches,t=>{A(e,t)||(e[t]=r)})});return e},{});return function(){const e=this.LA(1);return r[e.tokenTypeIdx]}}else{return function(){for(let e=0;e<i;e++){let r=t[e],a=r.length;e:for(let t=0;t<a;t++){let a=r[t],o=a.length;for(let e=0;e<o;e++){let t=this.LA(e+1);if(n(t,a[e])===!1){continue e}}return e}}return e}}}function eo(e,t,r){const n=p(e,e=>e.length===1);const a=e.length;if(n&&!r){let t=h(e);if(t.length===1&&I(t[0].categoryMatches)){let e=t[0],r=e.tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===r}}else{let e=C(t,(e,t,r)=>{e[t.tokenTypeIdx]=!0;o(t.categoryMatches,t=>{e[t]=!0});return e},[]);return function(){const t=this.LA(1);return e[t.tokenTypeIdx]===!0}}}else{return function(){e:for(let r=0;r<a;r++){let n=e[r],a=n.length;for(let e=0;e<a;e++){let r=this.LA(e+1);if(t(r,n[e])===!1){continue e}}return!0}return!1}}}class RestDefinitionFinderWalker extends RestWalker{constructor(e,t,r){super();this.topProd=e;this.targetOccurrence=t;this.targetProdType=r}startWalking(){this.walk(this.topProd);return this.restDef}checkIsTarget(e,t,r,n){if(e.idx===this.targetOccurrence&&this.targetProdType===t){this.restDef=r.concat(n);return!0}return!1}walkOption(e,t,r){this.checkIsTarget(e,Xa.OPTION,t,r)||super.walkOption(e,t,r)}walkAtLeastOne(e,t,r){this.checkIsTarget(e,Xa.REPETITION_MANDATORY,t,r)||super.walkOption(e,t,r)}walkAtLeastOneSep(e,t,r){this.checkIsTarget(e,Xa.REPETITION_MANDATORY_WITH_SEPARATOR,t,r)||super.walkOption(e,t,r)}walkMany(e,t,r){this.checkIsTarget(e,Xa.REPETITION,t,r)||super.walkOption(e,t,r)}walkManySep(e,t,r){this.checkIsTarget(e,Xa.REPETITION_WITH_SEPARATOR,t,r)||super.walkOption(e,t,r)}}class InsideDefinitionFinderVisitor extends GAstVisitor{constructor(e,t,r){super();this.targetOccurrence=e;this.targetProdType=t;this.targetRef=r;this.result=[]}checkIsTarget(t,r){t.idx===this.targetOccurrence&&this.targetProdType===r&&(this.targetRef===e||t===this.targetRef)&&(this.result=t.definition)}visitOption(e){this.checkIsTarget(e,0)}visitRepetition(e){this.checkIsTarget(e,1)}visitRepetitionMandatory(e){this.checkIsTarget(e,2)}visitRepetitionMandatoryWithSeparator(e){this.checkIsTarget(e,3)}visitRepetitionWithSeparator(e){this.checkIsTarget(e,4)}visitAlternation(e){this.checkIsTarget(e,5)}}function to(e){const t=new Array(e);for(let r=0;r<e;r++){t[r]=[]}return t}function ro(e){let t=[""];for(let r=0;r<e.length;r++){let n=e[r],a=[];for(let e=0;e<t.length;e++){let r=t[e];a.push(r+"_"+n.tokenTypeIdx);for(let e=0;e<n.categoryMatches.length;e++){let t="_"+n.categoryMatches[e];a.push(r+t)}}t=a}return t}function no(e,t,r){for(let n=0;n<e.length;n++){if(n===r){continue}let a=e[n];for(let e=0;e<t.length;e++){let r=t[e];if(a[r]===!0){return!1}}}return!0}function ao(e,t){const r=l(e,e=>Wa([e],1));const n=to(r.length);const a=l(r,e=>{const t={};o(e,e=>{const r=ro(e.partialPath);o(r,e=>{t[e]=!0})});return t});let i=r;for(let e=1;e<=t;e++){let r=i;i=to(r.length);for(let s=0;s<r.length;s++){let l=r[s];for(let r=0;r<l.length;r++){let c=l[r].partialPath,u=l[r].suffixDef,d=ro(c),p=no(a,d,s);if(p||I(u)||c.length===t){let e=n[s];if(so(e,c)===!1){e.push(c);for(let e=0;e<d.length;e++){let t=d[e];a[s][t]=!0}}}else{let t=Wa(u,e+1,c);i[s]=i[s].concat(t);o(t,e=>{const t=ro(e.partialPath);o(t,e=>{a[s][e]=!0})})}}}}return n}function oo(e,t,r,n){const a=new InsideDefinitionFinderVisitor(e,5,n);t.accept(a);return ao(a.result,r)}function io(e,t,r,n){const a=new InsideDefinitionFinderVisitor(e,r);t.accept(a);const o=a.result;const i=new RestDefinitionFinderWalker(t,e,r);const s=i.startWalking();const l=new Alternative({definition:o});const c=new Alternative({definition:s});return ao([l,c],n)}function so(t,r){e:for(let n=0;n<t.length;n++){let a=t[n];if(a.length!==r.length){continue}for(let t=0;t<a.length;t++){let n=r[t],o=a[t],i=n===o||o.categoryMatchesMap[n.tokenTypeIdx]!==e;if(i===!1){continue e}}return!0}return!1}function lo(e,t){return e.length<t.length&&p(e,(e,r)=>{const n=t[r];return e===n||n.categoryMatchesMap[e.tokenTypeIdx]})}function co(e){return p(e,e=>p(e,e=>p(e,e=>I(e.categoryMatches))))}function uo(e){const t=e.lookaheadStrategy.validate({rules:e.rules,tokenTypes:e.tokenTypes,grammarName:e.grammarName});return l(t,e=>Object.assign({type:13},e))}function po(e,t,r,n){const a=M(e,e=>mo(e,r));const o=Io(e,t,r);const i=M(e,e=>vo(e,r));const s=M(e,t=>_o(t,e,n,r));return a.concat(o,i,s)}function mo(e,t){const r=new OccurrenceValidationCollector;e.accept(r);const n=r.allProductions;const a=F(n,fo);const o=s(a,e=>e.length>1);const i=l(_(o),r=>{const n=N(r);const a=t.buildDuplicateFoundError(e,r);const o=rn(n);const i={message:a,type:3,ruleName:e.name,dslName:o,occurrence:n.idx};const s=ho(n);s&&(i.parameter=s);return i});return i}function fo(e){return`${rn(e)}_#_${e.idx}_#_${ho(e)}`}function ho(e){if(e instanceof Terminal){return e.terminalType.name}else if(e instanceof NonTerminal){return e.nonTerminalName}else{return""}}class OccurrenceValidationCollector extends GAstVisitor{constructor(){super(...arguments);this.allProductions=[]}visitNonTerminal(e){this.allProductions.push(e)}visitOption(e){this.allProductions.push(e)}visitRepetitionWithSeparator(e){this.allProductions.push(e)}visitRepetitionMandatory(e){this.allProductions.push(e)}visitRepetitionMandatoryWithSeparator(e){this.allProductions.push(e)}visitRepetition(e){this.allProductions.push(e)}visitAlternation(e){this.allProductions.push(e)}visitTerminal(e){this.allProductions.push(e)}}function _o(e,t,r,n){const a=[];const o=C(t,(t,r)=>{if(r.name===e.name){return t+1}return t},0);if(o>1){let t=n.buildDuplicateRuleNameError({topLevelRule:e,grammarName:r});a.push({message:t,type:1,ruleName:e.name})}return a}function go(e,t,r){const n=[];let a;if(!d(t,e)){a=`Invalid rule override, rule: ->${e}<- cannot be overridden in the grammar: ->${r}<-`+`as it is not defined in any of the super grammars `;n.push({message:a,type:2,ruleName:e})}return n}function yo(e,t,r,n=[]){const a=[];const o=xo(t.definition);if(I(o)){return[]}else{let t=e.name,i=d(o,e);i&&a.push({message:r.buildLeftRecursionError({topLevelRule:e,leftRecursionPath:n}),type:5,ruleName:t});let s=S(o,n.concat([e])),l=M(s,t=>{const a=O(n);a.push(t);return yo(e,t,r,a)});return a.concat(l)}}function xo(e){let t=[];if(I(e)){return t}const r=N(e);if(r instanceof NonTerminal){t.push(r.referencedRule)}else if(r instanceof Alternative||r instanceof Option||r instanceof RepetitionMandatory||r instanceof RepetitionMandatoryWithSeparator||r instanceof RepetitionWithSeparator||r instanceof Repetition){t=t.concat(xo(r.definition))}else if(r instanceof Alternation){t=h(l(r.definition,e=>xo(e.definition)))}else if(r instanceof Terminal){}else{throw Error("non exhaustive match")}const n=en(r);const a=e.length>1;if(n&&a){let r=m(e);return t.concat(xo(r))}else{return t}}class OrCollector extends GAstVisitor{constructor(){super(...arguments);this.alternations=[]}visitAlternation(e){this.alternations.push(e)}}function To(e,t){const r=new OrCollector;e.accept(r);const n=r.alternations;const a=M(n,r=>{const n=D(r.definition);return M(n,(n,a)=>{const o=za([n],[],la,1);if(I(o)){return[{message:t.buildEmptyAlternationError({topLevelRule:e,alternation:r,emptyChoiceIdx:a}),type:6,ruleName:e.name,occurrence:r.idx,alternative:a+1}]}else{return[]}})});return a}function ko(e,t,r){const n=new OrCollector;e.accept(n);let a=n.alternations;a=T(a,e=>e.ignoreAmbiguities===!0);const o=M(a,n=>{const a=n.idx;const o=n.maxLookahead||t;const i=oo(a,e,o,n);const s=Ao(i,n,e,r);const l=Co(i,n,e,r);return s.concat(l)});return o}class RepetitionCollector extends GAstVisitor{constructor(){super(...arguments);this.allProductions=[]}visitRepetitionWithSeparator(e){this.allProductions.push(e)}visitRepetitionMandatory(e){this.allProductions.push(e)}visitRepetitionMandatoryWithSeparator(e){this.allProductions.push(e)}visitRepetition(e){this.allProductions.push(e)}}function vo(e,t){const r=new OrCollector;e.accept(r);const n=r.alternations;const a=M(n,r=>{if(r.definition.length>255){return[{message:t.buildTooManyAlternativesError({topLevelRule:e,alternation:r}),type:12,ruleName:e.name,occurrence:r.idx}]}else{return[]}});return a}function Ro(e,t,r){const n=[];o(e,e=>{const a=new RepetitionCollector;e.accept(a);const i=a.allProductions;o(i,a=>{const o=Ja(a);const i=a.maxLookahead||t;const s=a.idx;const l=io(s,e,o,i);const c=l[0];if(I(h(c))){let t=r.buildEmptyRepetitionError({topLevelRule:e,repetition:a});n.push({message:t,type:10,ruleName:e.name})}})});return n}function Ao(e,t,r,n){const a=[];const i=C(e,(r,n,i)=>{if(t.definition[i].ignoreAmbiguities===!0){return r}o(n,n=>{const s=[i];o(e,(e,r)=>{i!==r&&so(e,n)&&t.definition[r].ignoreAmbiguities!==!0&&s.push(r)});if(s.length>1&&!so(a,n)){a.push(n);r.push({alts:s,path:n})}});return r},[]);const s=l(i,e=>{const a=l(e.alts,e=>e+1);const o=n.buildAlternationAmbiguityError({topLevelRule:r,alternation:t,ambiguityIndices:a,prefixPath:e.path});return{message:o,type:7,ruleName:r.name,occurrence:t.idx,alternatives:e.alts}});return s}function Co(e,t,r,n){const a=C(e,(e,t,r)=>{const n=l(t,e=>({idx:r,path:e}));return e.concat(n)},[]);const o=P(M(a,e=>{const o=t.definition[e.idx];if(o.ignoreAmbiguities===!0){return[]}const i=e.idx;const s=e.path;const c=E(a,e=>t.definition[e.idx].ignoreAmbiguities!==!0&&e.idx<i&&lo(e.path,s));const u=l(c,e=>{const a=[e.idx+1,i+1];const o=t.idx===0?"":t.idx;const s=n.buildAlternationPrefixAmbiguityError({topLevelRule:r,alternation:t,ambiguityIndices:a,prefixPath:e.path});return{message:s,type:11,ruleName:r.name,occurrence:o,alternatives:a}});return u}));return o}
function Io(e,t,r){const n=[];const a=l(t,e=>e.name);o(e,e=>{const t=e.name;if(d(a,t)){let a=r.buildNamespaceConflictError(e);n.push({message:a,type:8,ruleName:t})}});return n}function Eo(e){const t=x(e,{errMsgProvider:Va});const r={};o(e.rules,e=>{r[e.name]=e});return ja(r,t.errMsgProvider)}function So(e){e=x(e,{errMsgProvider:Ba});return po(e.rules,e.tokenTypes,e.errMsgProvider,e.grammarName)}const Po="MismatchedTokenException";const No="NoViableAltException";const bo="EarlyExitException";const Oo="NotAllInputParsedException";const Lo=[Po,No,bo,Oo];Object.freeze(Lo);function wo(e){return d(Lo,e.name)}class RecognitionException extends Error{constructor(e,t){super(e);this.token=t;this.resyncedTokens=[];Object.setPrototypeOf(this,new.target.prototype);Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}class MismatchedTokenException extends RecognitionException{constructor(e,t,r){super(e,t);this.previousToken=r;this.name=Po}}class NoViableAltException extends RecognitionException{constructor(e,t,r){super(e,t);this.previousToken=r;this.name=No}}class NotAllInputParsedException extends RecognitionException{constructor(e,t){super(e,t);this.name=Oo}}class EarlyExitException extends RecognitionException{constructor(e,t,r){super(e,t);this.previousToken=r;this.name=bo}}var $o={};var Do="InRuleRecoveryException";class InRuleRecoveryException extends Error{constructor(e){super(e);this.name=Do}}class Recoverable{initRecoverable(e){this.firstAfterRepMap={};this.resyncFollows={};this.recoveryEnabled=A(e,"recoveryEnabled")?e.recoveryEnabled:yi.recoveryEnabled;this.recoveryEnabled&&(this.attemptInRepetitionRecovery=Mo)}getTokenToInsert(e){const t=Ga(e,"",NaN,NaN,NaN,NaN,NaN,NaN);t.isInsertedInRecovery=!0;return t}canTokenTypeBeInsertedInRecovery(e){return!0}canTokenTypeBeDeletedInRecovery(e){return!0}tryInRepetitionRecovery(e,t,r,n){const a=this.findReSyncTokenType();const o=this.exportLexerState();const i=[];let s=!1;const l=this.LA(1);let c=this.LA(1);const u=()=>{const e=this.LA(0);const t=this.errorMessageProvider.buildMismatchTokenMessage({expected:n,actual:l,previous:e,ruleName:this.getCurrRuleFullName()});const r=new MismatchedTokenException(t,l,this.LA(0));r.resyncedTokens=D(i);this.SAVE_ERROR(r)};while(!s){if(this.tokenMatcher(c,n)){u();return}else if(r.call(this)){u();e.apply(this,t);return}else if(this.tokenMatcher(c,a)){s=!0}else{c=this.SKIP_TOKEN();this.addToResyncTokens(c,i)}}this.importLexerState(o)}shouldInRepetitionRecoveryBeTried(e,t,r){if(r===!1){return!1}if(this.tokenMatcher(this.LA(1),e)){return!1}if(this.isBackTracking()){return!1}if(this.canPerformInRuleRecovery(e,this.getFollowsForInRuleRecovery(e,t))){return!1}return!0}getFollowsForInRuleRecovery(e,t){const r=this.getCurrentGrammarPath(e,t);const n=this.getNextPossibleTokenTypes(r);return n}tryInRuleRecovery(e,t){if(this.canRecoverWithSingleTokenInsertion(e,t)){let t=this.getTokenToInsert(e);return t}if(this.canRecoverWithSingleTokenDeletion(e)){let e=this.SKIP_TOKEN();this.consumeToken();return e}throw new InRuleRecoveryException("sad sad panda")}canPerformInRuleRecovery(e,t){return this.canRecoverWithSingleTokenInsertion(e,t)||this.canRecoverWithSingleTokenDeletion(e)}canRecoverWithSingleTokenInsertion(t,r){if(!this.canTokenTypeBeInsertedInRecovery(t)){return!1}if(I(r)){return!1}const n=this.LA(1);const a=g(r,e=>this.tokenMatcher(n,e))!==e;return a}canRecoverWithSingleTokenDeletion(e){if(!this.canTokenTypeBeDeletedInRecovery(e)){return!1}const t=this.tokenMatcher(this.LA(2),e);return t}isInCurrentRuleReSyncSet(e){const t=this.getCurrFollowKey();const r=this.getFollowSetFromFollowKey(t);return d(r,e)}findReSyncTokenType(){const t=this.flattenFollowSet();let r=this.LA(1);let n=2;while(!0){let a=g(t,e=>{const t=Ka(r,e);return t});if(a!==e){return a}r=this.LA(n);n++}}getCurrFollowKey(){if(this.RULE_STACK.length===1){return $o}const e=this.getLastExplicitRuleShortName();const t=this.getLastExplicitRuleOccurrenceIndex();const r=this.getPreviousExplicitRuleShortName();return{ruleName:this.shortRuleNameToFullName(e),idxInCallingRule:t,inRule:this.shortRuleNameToFullName(r)}}buildFullFollowKeyStack(){const e=this.RULE_STACK;const t=this.RULE_OCCURRENCE_STACK;return l(e,(r,n)=>{if(n===0){return $o}return{ruleName:this.shortRuleNameToFullName(r),idxInCallingRule:t[n],inRule:this.shortRuleNameToFullName(e[n-1])}})}flattenFollowSet(){const e=l(this.buildFullFollowKeyStack(),e=>this.getFollowSetFromFollowKey(e));return h(e)}getFollowSetFromFollowKey(e){if(e===$o){return[Fa]}const t=e.ruleName+e.idxInCallingRule+cn+e.inRule;return this.resyncFollows[t]}addToResyncTokens(e,t){this.tokenMatcher(e,Fa)||t.push(e);return t}reSyncTo(e){const t=[];let r=this.LA(1);while(this.tokenMatcher(r,e)===!1){r=this.SKIP_TOKEN();this.addToResyncTokens(r,t)}return D(t)}attemptInRepetitionRecovery(e,t,r,n,a,o,i){}getCurrentGrammarPath(e,t){const r=this.getHumanReadableRuleStack();const n=O(this.RULE_OCCURRENCE_STACK);const a={ruleStack:r,occurrenceStack:n,lastTok:e,lastTokOccurrence:t};return a}getHumanReadableRuleStack(){return l(this.RULE_STACK,e=>this.shortRuleNameToFullName(e))}}function Mo(t,r,n,a,o,i,s){const l=this.getKeyForAutomaticLookahead(a,o);let c=this.firstAfterRepMap[l];if(c===e){let e=this.getCurrRuleFullName(),t=this.getGAstProductions()[e],r=new i(t,o);c=r.startWalking();this.firstAfterRepMap[l]=c}let u=c.token;let d=c.occurrence;const p=c.isEndOfRule;if(this.RULE_STACK.length===1&&p&&u===e){u=Fa;d=1}if(u===e||d===e){return}this.shouldInRepetitionRecoveryBeTried(u,d,s)&&this.tryInRepetitionRecovery(t,r,n,u)}var Fo=4;var Go=8;var Ko=1<<Go;var Uo=2<<Go;var Vo=3<<Go;var Bo=4<<Go;var jo=5<<Go;var Wo=6<<Go;function zo(e,t,r){return r|t|e}class LLkLookaheadStrategy{constructor(e){var t;this.maxLookahead=(t=e===null||e===void 0?void 0:e.maxLookahead)!==null&&t!==void 0?t:yi.maxLookahead}validate(e){const t=this.validateNoLeftRecursion(e.rules);if(I(t)){let r=this.validateEmptyOrAlternatives(e.rules),n=this.validateAmbiguousAlternationAlternatives(e.rules,this.maxLookahead),a=this.validateSomeNonEmptyLookaheadPath(e.rules,this.maxLookahead),o=[...t,...r,...n,...a];return o}return t}validateNoLeftRecursion(e){return M(e,e=>yo(e,e,Ba))}validateEmptyOrAlternatives(e){return M(e,e=>To(e,Ba))}validateAmbiguousAlternationAlternatives(e,t){return M(e,e=>ko(e,t,Ba))}validateSomeNonEmptyLookaheadPath(e,t){return Ro(e,t,Ba)}buildLookaheadForAlternation(e){return Ya(e.prodOccurrence,e.rule,e.maxLookahead,e.hasPredicates,e.dynamicTokensEnabled,Qa)}buildLookaheadForOptional(e){return Za(e.prodOccurrence,e.rule,e.maxLookahead,e.dynamicTokensEnabled,Ja(e.prodType),eo)}}class LooksAhead{initLooksAhead(e){this.dynamicTokensEnabled=A(e,"dynamicTokensEnabled")?e.dynamicTokensEnabled:yi.dynamicTokensEnabled;this.maxLookahead=A(e,"maxLookahead")?e.maxLookahead:yi.maxLookahead;this.lookaheadStrategy=A(e,"lookaheadStrategy")?e.lookaheadStrategy:new LLkLookaheadStrategy({maxLookahead:this.maxLookahead});this.lookAheadFuncsCache=new Map}preComputeLookaheadFunctions(e){o(e,e=>{this.TRACE_INIT(`${e.name} Rule Lookahead`,()=>{const{alternation:t,repetition:r,option:n,repetitionMandatory:a,repetitionMandatoryWithSeparator:i,repetitionWithSeparator:s}=Xo(e);o(t,t=>{const r=t.idx===0?"":t.idx;this.TRACE_INIT(`${rn(t)}${r}`,()=>{const r=this.lookaheadStrategy.buildLookaheadForAlternation({prodOccurrence:t.idx,rule:e,maxLookahead:t.maxLookahead||this.maxLookahead,hasPredicates:t.hasPredicates,dynamicTokensEnabled:this.dynamicTokensEnabled});const n=zo(this.fullRuleNameToShort[e.name],Ko,t.idx);this.setLaFuncCache(n,r)})});o(r,t=>{this.computeLookaheadFunc(e,t.idx,Vo,"Repetition",t.maxLookahead,rn(t))});o(n,t=>{this.computeLookaheadFunc(e,t.idx,Uo,"Option",t.maxLookahead,rn(t))});o(a,t=>{this.computeLookaheadFunc(e,t.idx,Bo,"RepetitionMandatory",t.maxLookahead,rn(t))});o(i,t=>{this.computeLookaheadFunc(e,t.idx,Wo,"RepetitionMandatoryWithSeparator",t.maxLookahead,rn(t))});o(s,t=>{this.computeLookaheadFunc(e,t.idx,jo,"RepetitionWithSeparator",t.maxLookahead,rn(t))})})})}computeLookaheadFunc(e,t,r,n,a,o){this.TRACE_INIT(`${o}${t===0?"":t}`,()=>{const o=this.lookaheadStrategy.buildLookaheadForOptional({prodOccurrence:t,rule:e,maxLookahead:a||this.maxLookahead,dynamicTokensEnabled:this.dynamicTokensEnabled,prodType:n});const i=zo(this.fullRuleNameToShort[e.name],r,t);this.setLaFuncCache(i,o)})}getKeyForAutomaticLookahead(e,t){const r=this.getLastExplicitRuleShortName();return zo(r,e,t)}getLaFuncFromCache(e){return this.lookAheadFuncsCache.get(e)}setLaFuncCache(e,t){this.lookAheadFuncsCache.set(e,t)}}class DslMethodsCollectorVisitor extends GAstVisitor{constructor(){super(...arguments);this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}reset(){this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}visitOption(e){this.dslMethods.option.push(e)}visitRepetitionWithSeparator(e){this.dslMethods.repetitionWithSeparator.push(e)}visitRepetitionMandatory(e){this.dslMethods.repetitionMandatory.push(e)}visitRepetitionMandatoryWithSeparator(e){this.dslMethods.repetitionMandatoryWithSeparator.push(e)}visitRepetition(e){this.dslMethods.repetition.push(e)}visitAlternation(e){this.dslMethods.alternation.push(e)}}const Ho=new DslMethodsCollectorVisitor;function Xo(e){Ho.reset();e.accept(Ho);const t=Ho.dslMethods;Ho.reset();return t}function Jo(e,t){if(isNaN(e.startOffset)===!0){e.startOffset=t.startOffset;e.endOffset=t.endOffset}else e.endOffset<t.endOffset===!0&&(e.endOffset=t.endOffset)}function qo(e,t){if(isNaN(e.startOffset)===!0){e.startOffset=t.startOffset;e.startColumn=t.startColumn;e.startLine=t.startLine;e.endOffset=t.endOffset;e.endColumn=t.endColumn;e.endLine=t.endLine}else if(e.endOffset<t.endOffset===!0){e.endOffset=t.endOffset;e.endColumn=t.endColumn;e.endLine=t.endLine}}function Yo(t,r,n){if(t.children[n]===e){t.children[n]=[r]}else{t.children[n].push(r)}}function Zo(t,r,n){if(t.children[r]===e){t.children[r]=[n]}else{t.children[r].push(n)}}const Qo="name";function ei(e,t){Object.defineProperty(e,Qo,{enumerable:!1,configurable:!0,writable:!1,value:t})}function ti(t,r){const n=b(t);const a=n.length;for(let o=0;o<a;o++){let a=n[o],i=t[a],s=i.length;for(let t=0;t<s;t++){let n=i[t];n.tokenTypeIdx===e&&this[n.name](n.children,r)}}}function ri(t,r){const n=function(){};ei(n,t+"BaseSemantics");const a={visit:function(t,r){y(t)&&(t=t[0]);if(v(t)){return e}return this[t.name](t.children,r)},validateVisitor:function(){const e=ai(this,r);if(!I(e)){let t=l(e,e=>e.msg);throw Error(`Errors Detected in CST Visitor <${this.constructor.name}>:\n\t`+`${t.join("\n\n").replace(/\n/g,"\n\t")}`)}}};n.prototype=a;n.prototype.constructor=n;n._RULE_NAMES=r;return n}function ni(e,t,r){const n=function(){};ei(n,e+"BaseSemanticsWithDefaults");const a=Object.create(r.prototype);o(t,e=>{a[e]=ti});n.prototype=a;n.prototype.constructor=n;return n}function ai(e,t){const r=oi(e,t);return r}function oi(e,t){const r=E(t,t=>k(e[t])===!1);const n=l(r,t=>({msg:`Missing visitor method: <${t}> on ${e.constructor.name} CST Visitor.`,type:1,methodName:t}));return P(n)}class TreeBuilder{initTreeBuilder(e){this.CST_STACK=[];this.outputCst=e.outputCst;this.nodeLocationTracking=A(e,"nodeLocationTracking")?e.nodeLocationTracking:yi.nodeLocationTracking;if(!this.outputCst){this.cstInvocationStateUpdate=w;this.cstFinallyStateUpdate=w;this.cstPostTerminal=w;this.cstPostNonTerminal=w;this.cstPostRule=w}else{if(/full/i.test(this.nodeLocationTracking)){if(this.recoveryEnabled){this.setNodeLocationFromToken=qo;this.setNodeLocationFromNode=qo;this.cstPostRule=w;this.setInitialNodeLocation=this.setInitialNodeLocationFullRecovery}else{this.setNodeLocationFromToken=w;this.setNodeLocationFromNode=w;this.cstPostRule=this.cstPostRuleFull;this.setInitialNodeLocation=this.setInitialNodeLocationFullRegular}}else if(/onlyOffset/i.test(this.nodeLocationTracking)){if(this.recoveryEnabled){this.setNodeLocationFromToken=Jo;this.setNodeLocationFromNode=Jo;this.cstPostRule=w;this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRecovery}else{this.setNodeLocationFromToken=w;this.setNodeLocationFromNode=w;this.cstPostRule=this.cstPostRuleOnlyOffset;this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRegular}}else if(/none/i.test(this.nodeLocationTracking)){this.setNodeLocationFromToken=w;this.setNodeLocationFromNode=w;this.cstPostRule=w;this.setInitialNodeLocation=w}else{throw Error(`Invalid <nodeLocationTracking> config option: "${e.nodeLocationTracking}"`)}}}setInitialNodeLocationOnlyOffsetRecovery(e){e.location={startOffset:NaN,endOffset:NaN}}setInitialNodeLocationOnlyOffsetRegular(e){e.location={startOffset:this.LA(1).startOffset,endOffset:NaN}}setInitialNodeLocationFullRecovery(e){e.location={startOffset:NaN,startLine:NaN,startColumn:NaN,endOffset:NaN,endLine:NaN,endColumn:NaN}}setInitialNodeLocationFullRegular(e){const t=this.LA(1);e.location={startOffset:t.startOffset,startLine:t.startLine,startColumn:t.startColumn,endOffset:NaN,endLine:NaN,endColumn:NaN}}cstInvocationStateUpdate(e){const t={name:e,children:Object.create(null)};this.setInitialNodeLocation(t);this.CST_STACK.push(t)}cstFinallyStateUpdate(){this.CST_STACK.pop()}cstPostRuleFull(e){const t=this.LA(0);const r=e.location;if(r.startOffset<=t.startOffset===!0){r.endOffset=t.endOffset;r.endLine=t.endLine;r.endColumn=t.endColumn}else{r.startOffset=NaN;r.startLine=NaN;r.startColumn=NaN}}cstPostRuleOnlyOffset(e){const t=this.LA(0);const r=e.location;if(r.startOffset<=t.startOffset===!0){r.endOffset=t.endOffset}else{r.startOffset=NaN}}cstPostTerminal(e,t){const r=this.CST_STACK[this.CST_STACK.length-1];Yo(r,t,e);this.setNodeLocationFromToken(r.location,t)}cstPostNonTerminal(e,t){const r=this.CST_STACK[this.CST_STACK.length-1];Zo(r,t,e);this.setNodeLocationFromNode(r.location,e.location)}getBaseCstVisitorConstructor(){if(v(this.baseCstVisitorConstructor)){let e=ri(this.className,b(this.gastProductionsCache));this.baseCstVisitorConstructor=e;return e}return this.baseCstVisitorConstructor}getBaseCstVisitorConstructorWithDefaults(){if(v(this.baseCstVisitorWithDefaultsConstructor)){let e=ni(this.className,b(this.gastProductionsCache),this.getBaseCstVisitorConstructor());this.baseCstVisitorWithDefaultsConstructor=e;return e}return this.baseCstVisitorWithDefaultsConstructor}getLastExplicitRuleShortName(){const e=this.RULE_STACK;return e[e.length-1]}getPreviousExplicitRuleShortName(){const e=this.RULE_STACK;return e[e.length-2]}getLastExplicitRuleOccurrenceIndex(){const e=this.RULE_OCCURRENCE_STACK;return e[e.length-1]}}class LexerAdapter{initLexerAdapter(){this.tokVector=[];this.tokVectorLength=0;this.currIdx=-1}set input(e){if(this.selfAnalysisDone!==!0){throw Error(`Missing <performSelfAnalysis> invocation at the end of the Parser's constructor.`)}this.reset();this.tokVector=e;this.tokVectorLength=e.length}get input(){return this.tokVector}SKIP_TOKEN(){if(this.currIdx<=this.tokVector.length-2){this.consumeToken();return this.LA(1)}else{return gi}}LA(e){const t=this.currIdx+e;if(t<0||this.tokVectorLength<=t){return gi}else{return this.tokVector[t]}}consumeToken(){this.currIdx++}exportLexerState(){return this.currIdx}importLexerState(e){this.currIdx=e}resetLexerState(){this.currIdx=-1}moveToTerminatedState(){this.currIdx=this.tokVector.length-1}getLexerPosition(){return this.exportLexerState()}}class RecognizerApi{ACTION(e){return e.call(this)}consume(e,t,r){return this.consumeInternal(t,e,r)}subrule(e,t,r){return this.subruleInternal(t,e,r)}option(e,t){return this.optionInternal(t,e)}or(e,t){return this.orInternal(t,e)}many(e,t){return this.manyInternal(e,t)}atLeastOne(e,t){return this.atLeastOneInternal(e,t)}CONSUME(e,t){return this.consumeInternal(e,0,t)}CONSUME1(e,t){return this.consumeInternal(e,1,t)}CONSUME2(e,t){return this.consumeInternal(e,2,t)}CONSUME3(e,t){return this.consumeInternal(e,3,t)}CONSUME4(e,t){return this.consumeInternal(e,4,t)}CONSUME5(e,t){return this.consumeInternal(e,5,t)}CONSUME6(e,t){return this.consumeInternal(e,6,t)}CONSUME7(e,t){return this.consumeInternal(e,7,t)}CONSUME8(e,t){return this.consumeInternal(e,8,t)}CONSUME9(e,t){return this.consumeInternal(e,9,t)}SUBRULE(e,t){return this.subruleInternal(e,0,t)}SUBRULE1(e,t){return this.subruleInternal(e,1,t)}SUBRULE2(e,t){return this.subruleInternal(e,2,t)}SUBRULE3(e,t){return this.subruleInternal(e,3,t)}SUBRULE4(e,t){return this.subruleInternal(e,4,t)}SUBRULE5(e,t){return this.subruleInternal(e,5,t)}SUBRULE6(e,t){return this.subruleInternal(e,6,t)}SUBRULE7(e,t){return this.subruleInternal(e,7,t)}SUBRULE8(e,t){return this.subruleInternal(e,8,t)}SUBRULE9(e,t){return this.subruleInternal(e,9,t)}OPTION(e){return this.optionInternal(e,0)}OPTION1(e){return this.optionInternal(e,1)}OPTION2(e){return this.optionInternal(e,2)}OPTION3(e){return this.optionInternal(e,3)}OPTION4(e){return this.optionInternal(e,4)}OPTION5(e){return this.optionInternal(e,5)}OPTION6(e){return this.optionInternal(e,6)}OPTION7(e){return this.optionInternal(e,7)}OPTION8(e){return this.optionInternal(e,8)}OPTION9(e){return this.optionInternal(e,9)}OR(e){return this.orInternal(e,0)}OR1(e){return this.orInternal(e,1)}OR2(e){return this.orInternal(e,2)}OR3(e){return this.orInternal(e,3)}OR4(e){return this.orInternal(e,4)}OR5(e){return this.orInternal(e,5)}OR6(e){return this.orInternal(e,6)}OR7(e){return this.orInternal(e,7)}OR8(e){return this.orInternal(e,8)}OR9(e){return this.orInternal(e,9)}MANY(e){this.manyInternal(0,e)}MANY1(e){this.manyInternal(1,e)}MANY2(e){this.manyInternal(2,e)}MANY3(e){this.manyInternal(3,e)}MANY4(e){this.manyInternal(4,e)}MANY5(e){this.manyInternal(5,e)}MANY6(e){this.manyInternal(6,e)}MANY7(e){this.manyInternal(7,e)}MANY8(e){this.manyInternal(8,e)}MANY9(e){this.manyInternal(9,e)}MANY_SEP(e){this.manySepFirstInternal(0,e)}MANY_SEP1(e){this.manySepFirstInternal(1,e)}MANY_SEP2(e){this.manySepFirstInternal(2,e)}MANY_SEP3(e){this.manySepFirstInternal(3,e)}MANY_SEP4(e){this.manySepFirstInternal(4,e)}MANY_SEP5(e){this.manySepFirstInternal(5,e)}MANY_SEP6(e){this.manySepFirstInternal(6,e)}MANY_SEP7(e){this.manySepFirstInternal(7,e)}MANY_SEP8(e){this.manySepFirstInternal(8,e)}MANY_SEP9(e){this.manySepFirstInternal(9,e)}AT_LEAST_ONE(e){this.atLeastOneInternal(0,e)}AT_LEAST_ONE1(e){return this.atLeastOneInternal(1,e)}AT_LEAST_ONE2(e){this.atLeastOneInternal(2,e)}AT_LEAST_ONE3(e){this.atLeastOneInternal(3,e)}AT_LEAST_ONE4(e){this.atLeastOneInternal(4,e)}AT_LEAST_ONE5(e){this.atLeastOneInternal(5,e)}AT_LEAST_ONE6(e){this.atLeastOneInternal(6,e)}AT_LEAST_ONE7(e){this.atLeastOneInternal(7,e)}AT_LEAST_ONE8(e){this.atLeastOneInternal(8,e)}AT_LEAST_ONE9(e){this.atLeastOneInternal(9,e)}AT_LEAST_ONE_SEP(e){this.atLeastOneSepFirstInternal(0,e)}AT_LEAST_ONE_SEP1(e){this.atLeastOneSepFirstInternal(1,e)}AT_LEAST_ONE_SEP2(e){this.atLeastOneSepFirstInternal(2,e)}AT_LEAST_ONE_SEP3(e){this.atLeastOneSepFirstInternal(3,e)}AT_LEAST_ONE_SEP4(e){this.atLeastOneSepFirstInternal(4,e)}AT_LEAST_ONE_SEP5(e){this.atLeastOneSepFirstInternal(5,e)}AT_LEAST_ONE_SEP6(e){this.atLeastOneSepFirstInternal(6,e)}AT_LEAST_ONE_SEP7(e){this.atLeastOneSepFirstInternal(7,e)}AT_LEAST_ONE_SEP8(e){this.atLeastOneSepFirstInternal(8,e)}AT_LEAST_ONE_SEP9(e){this.atLeastOneSepFirstInternal(9,e)}RULE(e,t,r=xi){if(d(this.definedRulesNames,e)){let t=Ba.buildDuplicateRuleNameError({topLevelRule:e,grammarName:this.className}),r={message:t,type:1,ruleName:e};this.definitionErrors.push(r)}this.definedRulesNames.push(e);const n=this.defineRule(e,t,r);this[e]=n;return n}OVERRIDE_RULE(e,t,r=xi){const n=go(e,this.definedRulesNames,this.className);this.definitionErrors=this.definitionErrors.concat(n);const a=this.defineRule(e,t,r);this[e]=a;return a}BACKTRACK(e,t){return function(){this.isBackTrackingStack.push(1);const r=this.saveRecogState();try{e.apply(this,t);return!0}catch(e){if(wo(e)){return!1}else{throw e}}finally{this.reloadRecogState(r);this.isBackTrackingStack.pop()}}}getGAstProductions(){return this.gastProductionsCache}getSerializedGastProductions(){return Yr(_(this.gastProductionsCache))}}class RecognizerEngine{initRecognizerEngine(e,t){this.className=this.constructor.name;this.shortRuleNameToFull={};this.fullRuleNameToShort={};this.ruleShortNameIdx=256;this.tokenMatcher=ca;this.subruleIdx=0;this.definedRulesNames=[];this.tokensMap={};this.isBackTrackingStack=[];this.RULE_STACK=[];this.RULE_OCCURRENCE_STACK=[];this.gastProductionsCache={};if(A(t,"serializedGrammar")){throw Error("The Parser's configuration can no longer contain a <serializedGrammar> property.\n"+"\tSee: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_6-0-0\n"+"\tFor Further details.")}if(y(e)){if(I(e)){throw Error("A Token Vocabulary cannot be empty.\n"+"\tNote that the first argument for the parser constructor\n"+"\tis no longer a Token vector (since v4.0).")}if(typeof e[0].startOffset==="number"){throw Error("The Parser constructor no longer accepts a token vector as the first argument.\n"+"\tSee: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_4-0-0\n"+"\tFor Further details.")}}if(y(e)){this.tokensMap=C(e,(e,t)=>{e[t.name]=t;return e},{})}else if(A(e,"modes")&&p(h(_(e.modes)),va)){let t=h(_(e.modes)),r=f(t);this.tokensMap=C(r,(e,t)=>{e[t.name]=t;return e},{})}else if(G(e)){this.tokensMap=O(e)}else{throw new Error("<tokensDictionary> argument must be An Array of Token constructors,"+" A dictionary of Token constructors or an IMultiModeLexerDefinition")}this.tokensMap["EOF"]=Fa;const r=A(e,"modes")?h(_(e.modes)):_(e);const n=p(r,e=>I(e.categoryMatches));this.tokenMatcher=n?ca:la;pa(_(this.tokensMap))}defineRule(e,t,r){if(this.selfAnalysisDone){throw Error(`Grammar rule <${e}> may not be defined after the 'performSelfAnalysis' method has been called'\n`+`Make sure that all grammar rule definitions are done before 'performSelfAnalysis' is called.`)}const n=A(r,"resyncEnabled")?r.resyncEnabled:xi.resyncEnabled;const a=A(r,"recoveryValueFunc")?r.recoveryValueFunc:xi.recoveryValueFunc;const o=this.ruleShortNameIdx<<Fo+Go;this.ruleShortNameIdx++;this.shortRuleNameToFull[o]=e;this.fullRuleNameToShort[e]=o;let i;if(this.outputCst===!0){i=function r(...i){try{this.ruleInvocationStateUpdate(o,e,this.subruleIdx);t.apply(this,i);let r=this.CST_STACK[this.CST_STACK.length-1];this.cstPostRule(r);return r}catch(e){return this.invokeRuleCatch(e,n,a)}finally{this.ruleFinallyStateUpdate()}}}else{i=function r(...i){try{this.ruleInvocationStateUpdate(o,e,this.subruleIdx);return t.apply(this,i)}catch(e){return this.invokeRuleCatch(e,n,a)}finally{this.ruleFinallyStateUpdate()}}}const s=Object.assign(i,{ruleName:e,originalGrammarAction:t});return s}invokeRuleCatch(e,t,r){const n=this.RULE_STACK.length===1;const a=t&&!this.isBackTracking()&&this.recoveryEnabled;if(wo(e)){let t=e;if(a){let n=this.findReSyncTokenType();if(this.isInCurrentRuleReSyncSet(n)){t.resyncedTokens=this.reSyncTo(n);if(this.outputCst){let e=this.CST_STACK[this.CST_STACK.length-1];e.recoveredNode=!0;return e}else{return r(e)}}else{if(this.outputCst){let e=this.CST_STACK[this.CST_STACK.length-1];e.recoveredNode=!0;t.partialCstResult=e}throw t}}else if(n){this.moveToTerminatedState();return r(e)}else{throw t}}else{throw e}}optionInternal(e,t){const r=this.getKeyForAutomaticLookahead(Uo,t);return this.optionInternalLogic(e,t,r)}optionInternalLogic(t,r,n){let a=this.getLaFuncFromCache(n);let o;if(typeof t!=="function"){o=t.DEF;let r=t.GATE;if(r!==e){let e=a;a=(()=>r.call(this)&&e.call(this))}}else{o=t}if(a.call(this)===!0){return o.call(this)}return e}atLeastOneInternal(e,t){const r=this.getKeyForAutomaticLookahead(Bo,e);return this.atLeastOneInternalLogic(e,t,r)}atLeastOneInternalLogic(t,r,n){let a=this.getLaFuncFromCache(n);let o;if(typeof r!=="function"){o=r.DEF;let t=r.GATE;if(t!==e){let e=a;a=(()=>t.call(this)&&e.call(this))}}else{o=r}if(a.call(this)===!0){let e=this.doSingleRepetition(o);while(a.call(this)===!0&&e===!0){e=this.doSingleRepetition(o)}}else{throw this.raiseEarlyExitException(t,2,r.ERR_MSG)}this.attemptInRepetitionRecovery(this.atLeastOneInternal,[t,r],a,Bo,t,NextTerminalAfterAtLeastOneWalker)}atLeastOneSepFirstInternal(e,t){const r=this.getKeyForAutomaticLookahead(Wo,e);this.atLeastOneSepFirstInternalLogic(e,t,r)}atLeastOneSepFirstInternalLogic(e,t,r){const n=t.DEF;const a=t.SEP;const o=this.getLaFuncFromCache(r);if(o.call(this)===!0){n.call(this);let t=()=>this.tokenMatcher(this.LA(1),a);while(this.tokenMatcher(this.LA(1),a)===!0){this.CONSUME(a);n.call(this)}this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,a,t,n,NextTerminalAfterAtLeastOneSepWalker],t,Wo,e,NextTerminalAfterAtLeastOneSepWalker)}else{throw this.raiseEarlyExitException(e,3,t.ERR_MSG)}}manyInternal(e,t){const r=this.getKeyForAutomaticLookahead(Vo,e);return this.manyInternalLogic(e,t,r)}manyInternalLogic(t,r,n){let a=this.getLaFuncFromCache(n);let o;if(typeof r!=="function"){o=r.DEF;let t=r.GATE;if(t!==e){let e=a;a=(()=>t.call(this)&&e.call(this))}}else{o=r}let i=!0;while(a.call(this)===!0&&i===!0){i=this.doSingleRepetition(o)}this.attemptInRepetitionRecovery(this.manyInternal,[t,r],a,Vo,t,NextTerminalAfterManyWalker,i)}manySepFirstInternal(e,t){const r=this.getKeyForAutomaticLookahead(jo,e);this.manySepFirstInternalLogic(e,t,r)}manySepFirstInternalLogic(e,t,r){const n=t.DEF;const a=t.SEP;const o=this.getLaFuncFromCache(r);if(o.call(this)===!0){n.call(this);let t=()=>this.tokenMatcher(this.LA(1),a);while(this.tokenMatcher(this.LA(1),a)===!0){this.CONSUME(a);n.call(this)}this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,a,t,n,NextTerminalAfterManySepWalker],t,jo,e,NextTerminalAfterManySepWalker)}}repetitionSepSecondInternal(e,t,r,n,a){while(r()){this.CONSUME(t);n.call(this)}this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,t,r,n,a],r,Wo,e,a)}doSingleRepetition(e){const t=this.getLexerPosition();e.call(this);const r=this.getLexerPosition();return r>t}orInternal(t,r){const n=this.getKeyForAutomaticLookahead(Ko,r);const a=y(t)?t:t.DEF;const o=this.getLaFuncFromCache(n);const i=o.call(this,a);if(i!==e){let e=a[i];return e.ALT.call(this)}this.raiseNoAltException(r,t.ERR_MSG)}ruleFinallyStateUpdate(){this.RULE_STACK.pop();this.RULE_OCCURRENCE_STACK.pop();this.cstFinallyStateUpdate();if(this.RULE_STACK.length===0&&this.isAtEndOfInput()===!1){let e=this.LA(1),t=this.errorMessageProvider.buildNotAllInputParsedMessage({firstRedundant:e,ruleName:this.getCurrRuleFullName()});this.SAVE_ERROR(new NotAllInputParsedException(t,e))}}subruleInternal(t,r,n){let a;try{let o=n!==e?n.ARGS:e;this.subruleIdx=r;a=t.apply(this,o);this.cstPostNonTerminal(a,n!==e&&n.LABEL!==e?n.LABEL:t.ruleName);return a}catch(e){throw this.subruleInternalError(e,n,t.ruleName)}}subruleInternalError(t,r,n){if(wo(t)&&t.partialCstResult!==e){this.cstPostNonTerminal(t.partialCstResult,r!==e&&r.LABEL!==e?r.LABEL:n);delete t.partialCstResult}throw t}consumeInternal(t,r,n){let a;try{let e=this.LA(1);if(this.tokenMatcher(e,t)===!0){this.consumeToken();a=e}else{this.consumeInternalError(t,e,n)}}catch(e){a=this.consumeInternalRecovery(t,r,e)}this.cstPostTerminal(n!==e&&n.LABEL!==e?n.LABEL:t.name,a);return a}consumeInternalError(t,r,n){let a;const o=this.LA(0);if(n!==e&&n.ERR_MSG){a=n.ERR_MSG}else{a=this.errorMessageProvider.buildMismatchTokenMessage({expected:t,actual:r,previous:o,ruleName:this.getCurrRuleFullName()})}throw this.SAVE_ERROR(new MismatchedTokenException(a,r,o))}consumeInternalRecovery(e,t,r){if(this.recoveryEnabled&&r.name==="MismatchedTokenException"&&!this.isBackTracking()){let n=this.getFollowsForInRuleRecovery(e,t);try{return this.tryInRuleRecovery(e,n)}catch(e){if(e.name===Do){throw r}else{throw e}}}else{throw r}}saveRecogState(){const e=this.errors;const t=O(this.RULE_STACK);return{errors:e,lexerState:this.exportLexerState(),RULE_STACK:t,CST_STACK:this.CST_STACK}}reloadRecogState(e){this.errors=e.errors;this.importLexerState(e.lexerState);this.RULE_STACK=e.RULE_STACK}ruleInvocationStateUpdate(e,t,r){this.RULE_OCCURRENCE_STACK.push(r);this.RULE_STACK.push(e);this.cstInvocationStateUpdate(t)}isBackTracking(){return this.isBackTrackingStack.length!==0}getCurrRuleFullName(){const e=this.getLastExplicitRuleShortName();return this.shortRuleNameToFull[e]}shortRuleNameToFullName(e){return this.shortRuleNameToFull[e]}isAtEndOfInput(){return this.tokenMatcher(this.LA(1),Fa)}reset(){this.resetLexerState();this.subruleIdx=0;this.isBackTrackingStack=[];this.errors=[];this.RULE_STACK=[];this.CST_STACK=[];this.RULE_OCCURRENCE_STACK=[]}}class ErrorHandler{initErrorHandler(e){this._errors=[];this.errorMessageProvider=A(e,"errorMessageProvider")?e.errorMessageProvider:yi.errorMessageProvider}SAVE_ERROR(e){if(wo(e)){e.context={ruleStack:this.getHumanReadableRuleStack(),ruleOccurrenceStack:O(this.RULE_OCCURRENCE_STACK)};this._errors.push(e);return e}else{throw Error("Trying to save an Error which is not a RecognitionException")}}get errors(){return O(this._errors)}set errors(e){this._errors=e}raiseEarlyExitException(e,t,r){const n=this.getCurrRuleFullName();const a=this.getGAstProductions()[n];const o=io(e,a,t,this.maxLookahead);const i=o[0];const s=[];for(let e=1;e<=this.maxLookahead;e++){s.push(this.LA(e))}const l=this.errorMessageProvider.buildEarlyExitMessage({expectedIterationPaths:i,actual:s,previous:this.LA(0),customUserDescription:r,ruleName:n});throw this.SAVE_ERROR(new EarlyExitException(l,this.LA(1),this.LA(0)))}raiseNoAltException(e,t){const r=this.getCurrRuleFullName();const n=this.getGAstProductions()[r];const a=oo(e,n,this.maxLookahead);const o=[];for(let e=1;e<=this.maxLookahead;e++){o.push(this.LA(e))}const i=this.LA(0);const s=this.errorMessageProvider.buildNoViableAltMessage({expectedPathsPerAlt:a,actual:o,previous:i,customUserDescription:t,ruleName:this.getCurrRuleFullName()});throw this.SAVE_ERROR(new NoViableAltException(s,this.LA(1),i))}}class ContentAssist{initContentAssist(){}computeContentAssist(e,t){const r=this.gastProductionsCache[e];if(v(r)){throw Error(`Rule ->${e}<- does not exist in this grammar.`)}return za([r],t,this.tokenMatcher,this.maxLookahead)}getNextPossibleTokenTypes(e){const t=N(e.ruleStack);const r=this.getGAstProductions();const n=r[t];const a=new NextAfterTokenWalker(n,e).startWalking();return a}}const ii={description:"This Object indicates the Parser is during Recording Phase"};Object.freeze(ii);const si=!0;const li=Math.pow(2,Go)-1;const ci=Da({name:"RECORDING_PHASE_TOKEN",pattern:Lexer.NA});pa([ci]);const ui=Ga(ci,"This IToken indicates the Parser is in Recording Phase\n\t"+""+"See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details",-1,-1,-1,-1,-1,-1);Object.freeze(ui);const di={name:"This CSTNode indicates the Parser is in Recording Phase\n\t"+"See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details",children:{}};class GastRecorder{initGastRecorder(e){this.recordingProdStack=[];this.RECORDING_PHASE=!1}enableRecording(){this.RECORDING_PHASE=!0;this.TRACE_INIT("Enable Recording",()=>{for(let e=0;e<10;e++){let t=e>0?e:"";this[`CONSUME${t}`]=function(t,r){return this.consumeInternalRecord(t,e,r)};this[`SUBRULE${t}`]=function(t,r){return this.subruleInternalRecord(t,e,r)};this[`OPTION${t}`]=function(t){return this.optionInternalRecord(t,e)};this[`OR${t}`]=function(t){return this.orInternalRecord(t,e)};this[`MANY${t}`]=function(t){this.manyInternalRecord(e,t)};this[`MANY_SEP${t}`]=function(t){this.manySepFirstInternalRecord(e,t)};this[`AT_LEAST_ONE${t}`]=function(t){this.atLeastOneInternalRecord(e,t)};this[`AT_LEAST_ONE_SEP${t}`]=function(t){this.atLeastOneSepFirstInternalRecord(e,t)}}this[`consume`]=function(e,t,r){return this.consumeInternalRecord(t,e,r)};this[`subrule`]=function(e,t,r){return this.subruleInternalRecord(t,e,r)};this[`option`]=function(e,t){return this.optionInternalRecord(t,e)};this[`or`]=function(e,t){return this.orInternalRecord(t,e)};this[`many`]=function(e,t){
this.manyInternalRecord(e,t)};this[`atLeastOne`]=function(e,t){this.atLeastOneInternalRecord(e,t)};this.ACTION=this.ACTION_RECORD;this.BACKTRACK=this.BACKTRACK_RECORD;this.LA=this.LA_RECORD})}disableRecording(){this.RECORDING_PHASE=!1;this.TRACE_INIT("Deleting Recording methods",()=>{const e=this;for(let t=0;t<10;t++){let r=t>0?t:"";delete e[`CONSUME${r}`];delete e[`SUBRULE${r}`];delete e[`OPTION${r}`];delete e[`OR${r}`];delete e[`MANY${r}`];delete e[`MANY_SEP${r}`];delete e[`AT_LEAST_ONE${r}`];delete e[`AT_LEAST_ONE_SEP${r}`]}delete e[`consume`];delete e[`subrule`];delete e[`option`];delete e[`or`];delete e[`many`];delete e[`atLeastOne`];delete e.ACTION;delete e.BACKTRACK;delete e.LA})}ACTION_RECORD(e){}BACKTRACK_RECORD(e,t){return()=>!0}LA_RECORD(e){return gi}topLevelRuleRecord(e,t){try{let r=new Rule({definition:[],name:e});r.name=e;this.recordingProdStack.push(r);t.call(this);this.recordingProdStack.pop();return r}catch(e){if(e.KNOWN_RECORDER_ERROR!==!0){try{e.message=e.message+'\n\t This error was thrown during the "grammar recording phase" For more info see:\n\t'+"https://chevrotain.io/docs/guide/internals.html#grammar-recording"}catch(t){throw e}}throw e}}optionInternalRecord(e,t){return pi.call(this,Option,e,t)}atLeastOneInternalRecord(e,t){pi.call(this,RepetitionMandatory,t,e)}atLeastOneSepFirstInternalRecord(e,t){pi.call(this,RepetitionMandatoryWithSeparator,t,e,si)}manyInternalRecord(e,t){pi.call(this,Repetition,t,e)}manySepFirstInternalRecord(e,t){pi.call(this,RepetitionWithSeparator,t,e,si)}orInternalRecord(e,t){return mi.call(this,e,t)}subruleInternalRecord(t,r,n){hi(r);if(!t||A(t,"ruleName")===!1){let e=new Error(`<SUBRULE${fi(r)}> argument is invalid`+` expecting a Parser method reference but got: <${JSON.stringify(t)}>`+`\n inside top level rule: <${this.recordingProdStack[0].name}>`);e.KNOWN_RECORDER_ERROR=!0;throw e}const a=$(this.recordingProdStack);const o=t.ruleName;const i=new NonTerminal({idx:r,nonTerminalName:o,label:n===null||n===void 0?void 0:n.LABEL,referencedRule:e});a.definition.push(i);return this.outputCst?di:ii}consumeInternalRecord(e,t,r){hi(t);if(!ya(e)){let r=new Error(`<CONSUME${fi(t)}> argument is invalid`+` expecting a TokenType reference but got: <${JSON.stringify(e)}>`+`\n inside top level rule: <${this.recordingProdStack[0].name}>`);r.KNOWN_RECORDER_ERROR=!0;throw r}const n=$(this.recordingProdStack);const a=new Terminal({idx:t,terminalType:e,label:r===null||r===void 0?void 0:r.LABEL});n.definition.push(a);return ui}}function pi(e,t,r,n=!1){hi(r);const a=$(this.recordingProdStack);const o=k(t)?t:t.DEF;const i=new e({definition:[],idx:r});n&&(i.separator=t.SEP);A(t,"MAX_LOOKAHEAD")&&(i.maxLookahead=t.MAX_LOOKAHEAD);this.recordingProdStack.push(i);o.call(this);a.definition.push(i);this.recordingProdStack.pop();return ii}function mi(e,t){hi(t);const r=$(this.recordingProdStack);const n=y(e)===!1;const a=n===!1?e:e.DEF;const i=new Alternation({definition:[],idx:t,ignoreAmbiguities:n&&e.IGNORE_AMBIGUITIES===!0});A(e,"MAX_LOOKAHEAD")&&(i.maxLookahead=e.MAX_LOOKAHEAD);const s=u(a,e=>k(e.GATE));i.hasPredicates=s;r.definition.push(i);o(a,e=>{const t=new Alternative({definition:[]});i.definition.push(t);if(A(e,"IGNORE_AMBIGUITIES")){t.ignoreAmbiguities=e.IGNORE_AMBIGUITIES}else A(e,"GATE")&&(t.ignoreAmbiguities=!0);this.recordingProdStack.push(t);e.ALT.call(this);this.recordingProdStack.pop()});return ii}function fi(e){return e===0?"":`${e}`}function hi(e){if(e<0||e>li){let t=new Error(`Invalid DSL Method idx value: <${e}>\n\t`+`Idx value must be a none negative value smaller than ${li+1}`);t.KNOWN_RECORDER_ERROR=!0;throw t}}class PerformanceTracer{initPerformanceTracer(e){if(A(e,"traceInitPerf")){let t=e.traceInitPerf,r=typeof t==="number";this.traceInitMaxIdent=r?t:Infinity;this.traceInitPerf=r?t>0:t}else{this.traceInitMaxIdent=0;this.traceInitPerf=yi.traceInitPerf}this.traceInitIndent=-1}TRACE_INIT(e,t){if(this.traceInitPerf===!0){this.traceInitIndent++;let r=new Array(this.traceInitIndent+1).join("\t");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${r}--\x3e <${e}>`);let{time:n,value:a}=Hr(t),o=n>10?console.warn:console.log;this.traceInitIndent<this.traceInitMaxIdent&&o(`${r}<-- <${e}> time: ${n}ms`);this.traceInitIndent--;return a}else{return t()}}}function _i(e,t){t.forEach(t=>{const r=t.prototype;Object.getOwnPropertyNames(r).forEach(n=>{if(n==="constructor"){return}const a=Object.getOwnPropertyDescriptor(r,n);if(a&&(a.get||a.set)){Object.defineProperty(e.prototype,n,a)}else{e.prototype[n]=t.prototype[n]}})})}var gi=Ga(Fa,"",NaN,NaN,NaN,NaN,NaN,NaN);Object.freeze(gi);var yi=Object.freeze({recoveryEnabled:!1,maxLookahead:3,dynamicTokensEnabled:!1,outputCst:!0,errorMessageProvider:Ua,nodeLocationTracking:"none",traceInitPerf:!1,skipValidations:!1});var xi=Object.freeze({recoveryValueFunc:()=>e,resyncEnabled:!0});function Ti(t=e){return function(){return t}}class Parser{static performSelfAnalysis(e){throw Error("The **static** `performSelfAnalysis` method has been deprecated."+"\t\nUse the **instance** method with the same name instead.")}performSelfAnalysis(){this.TRACE_INIT("performSelfAnalysis",()=>{let e;this.selfAnalysisDone=!0;const t=this.className;this.TRACE_INIT("toFastProps",()=>{Xr(this)});this.TRACE_INIT("Grammar Recording",()=>{try{this.enableRecording();o(this.definedRulesNames,e=>{const t=this[e];const r=t["originalGrammarAction"];let n;this.TRACE_INIT(`${e} Rule`,()=>{n=this.topLevelRuleRecord(e,r)});this.gastProductionsCache[e]=n})}finally{this.disableRecording()}});let r=[];this.TRACE_INIT("Grammar Resolving",()=>{r=Eo({rules:_(this.gastProductionsCache)});this.definitionErrors=this.definitionErrors.concat(r)});this.TRACE_INIT("Grammar Validations",()=>{if(I(r)&&this.skipValidations===!1){let e=So({rules:_(this.gastProductionsCache),tokenTypes:_(this.tokensMap),errMsgProvider:Ba,grammarName:t}),r=uo({lookaheadStrategy:this.lookaheadStrategy,rules:_(this.gastProductionsCache),tokenTypes:_(this.tokensMap),grammarName:t});this.definitionErrors=this.definitionErrors.concat(e,r)}});if(I(this.definitionErrors)){this.recoveryEnabled&&this.TRACE_INIT("computeAllProdsFollows",()=>{const e=un(_(this.gastProductionsCache));this.resyncFollows=e});this.TRACE_INIT("ComputeLookaheadFunctions",()=>{var e,t;(t=(e=this.lookaheadStrategy).initialize)===null||t===void 0?void 0:t.call(e,{rules:_(this.gastProductionsCache)});this.preComputeLookaheadFunctions(_(this.gastProductionsCache))})}if(!Parser.DEFER_DEFINITION_ERRORS_HANDLING&&!I(this.definitionErrors)){e=l(this.definitionErrors,e=>e.message);throw new Error(`Parser Definition Errors detected:\n ${e.join("\n-------------------------------\n")}`)}})}constructor(e,t){this.definitionErrors=[];this.selfAnalysisDone=!1;const r=this;r.initErrorHandler(t);r.initLexerAdapter();r.initLooksAhead(t);r.initRecognizerEngine(e,t);r.initRecoverable(t);r.initTreeBuilder(t);r.initContentAssist();r.initGastRecorder(t);r.initPerformanceTracer(t);if(A(t,"ignoredIssues")){throw new Error("The <ignoredIssues> IParserConfig property has been deprecated.\n\t"+"Please use the <IGNORE_AMBIGUITIES> flag on the relevant DSL method instead.\n\t"+"See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#IGNORING_AMBIGUITIES\n\t"+"For further details.")}this.skipValidations=A(t,"skipValidations")?t.skipValidations:yi.skipValidations}}Parser.DEFER_DEFINITION_ERRORS_HANDLING=!1;_i(Parser,[Recoverable,LooksAhead,TreeBuilder,LexerAdapter,RecognizerEngine,RecognizerApi,ErrorHandler,ContentAssist,GastRecorder,PerformanceTracer]);class EmbeddedActionsParser extends Parser{constructor(e,t=yi){const r=O(t);r.outputCst=!1;super(e,r)}}function ki(e,t,r){return`${e.name}_${t}_${r}`}var vi=1;var Ri=2;var Ai=4;var Ci=5;var Ii=7;var Ei=8;var Si=9;var Pi=10;var Ni=11;var bi=12;class AbstractTransition{constructor(e){this.target=e}isEpsilon(){return!1}}class AtomTransition extends AbstractTransition{constructor(e,t){super(e);this.tokenType=t}}class EpsilonTransition extends AbstractTransition{constructor(e){super(e)}isEpsilon(){return!0}}class RuleTransition extends AbstractTransition{constructor(e,t,r){super(e);this.rule=t;this.followState=r}isEpsilon(){return!0}}function Oi(t){const r={decisionMap:{},decisionStates:[],ruleToStartState:new Map,ruleToStopState:new Map,states:[]};Li(r,t);const n=t.length;for(let a=0;a<n;a++){let n=t[a],o=Ui(r,n,n);if(o===e){continue}Yi(r,n,o)}return r}function Li(t,r){const n=r.length;for(let a=0;a<n;a++){let n=r[a],o=Qi(t,n,e,{type:Ri}),i=Qi(t,n,e,{type:Ii});o.stop=i;t.ruleToStartState.set(n,o);t.ruleToStopState.set(n,i)}}function wi(e,t,r){if(r instanceof Terminal){return Ji(e,t,r.terminalType,r)}else if(r instanceof NonTerminal){return qi(e,t,r)}else if(r instanceof Alternation){return Gi(e,t,r)}else if(r instanceof Option){return Ki(e,t,r)}else if(r instanceof Repetition){return $i(e,t,r)}else if(r instanceof RepetitionWithSeparator){return Di(e,t,r)}else if(r instanceof RepetitionMandatory){return Mi(e,t,r)}else if(r instanceof RepetitionMandatoryWithSeparator){return Fi(e,t,r)}else{return Ui(e,t,r)}}function $i(e,t,r){const n=Qi(e,t,r,{type:Ci});Wi(e,n);const a=zi(e,t,n,r,Ui(e,t,r));return Bi(e,t,r,a)}function Di(e,t,r){const n=Qi(e,t,r,{type:Ci});Wi(e,n);const a=zi(e,t,n,r,Ui(e,t,r));const o=Ji(e,t,r.separator,r);return Bi(e,t,r,a,o)}function Mi(e,t,r){const n=Qi(e,t,r,{type:Ai});Wi(e,n);const a=zi(e,t,n,r,Ui(e,t,r));return Vi(e,t,r,a)}function Fi(e,t,r){const n=Qi(e,t,r,{type:Ai});Wi(e,n);const a=zi(e,t,n,r,Ui(e,t,r));const o=Ji(e,t,r.separator,r);return Vi(e,t,r,a,o)}function Gi(e,t,r){const n=Qi(e,t,r,{type:vi});Wi(e,n);const a=l(r.definition,r=>wi(e,t,r));const o=zi(e,t,n,r,...a);return o}function Ki(e,t,r){const n=Qi(e,t,r,{type:vi});Wi(e,n);const a=zi(e,t,n,r,Ui(e,t,r));return ji(e,t,r,a)}function Ui(t,r,n){const a=E(l(n.definition,e=>wi(t,r,e)),t=>t!==e);if(a.length===1){return a[0]}else if(a.length===0){return e}else{return Xi(t,a)}}function Vi(t,r,n,a,o){const i=a.left;const s=a.right;const l=Qi(t,r,n,{type:Ni});Wi(t,l);const c=Qi(t,r,n,{type:bi});i.loopback=l;c.loopback=l;t.decisionMap[ki(r,o?"RepetitionMandatoryWithSeparator":"RepetitionMandatory",n.idx)]=l;Zi(s,l);if(o===e){Zi(l,i);Zi(l,c)}else{Zi(l,c);Zi(l,o.left);Zi(o.right,i)}return{left:i,right:c}}function Bi(t,r,n,a,o){const i=a.left;const s=a.right;const l=Qi(t,r,n,{type:Pi});Wi(t,l);const c=Qi(t,r,n,{type:bi});const u=Qi(t,r,n,{type:Si});l.loopback=u;c.loopback=u;Zi(l,i);Zi(l,c);Zi(s,u);if(o!==e){Zi(u,c);Zi(u,o.left);Zi(o.right,i)}else{Zi(u,l)}t.decisionMap[ki(r,o?"RepetitionWithSeparator":"Repetition",n.idx)]=l;return{left:l,right:c}}function ji(e,t,r,n){const a=n.left;const o=n.right;Zi(a,o);e.decisionMap[ki(t,"Option",r.idx)]=a;return n}function Wi(e,t){e.decisionStates.push(t);t.decision=e.decisionStates.length-1;return t.decision}function zi(t,r,n,a,...o){const i=Qi(t,r,a,{type:Ei,start:n});n.end=i;for(const t of o){if(t!==e){Zi(n,t.left);Zi(t.right,i)}else{Zi(n,i)}}const s={left:n,right:i};t.decisionMap[ki(r,Hi(a),a.idx)]=n;return s}function Hi(e){if(e instanceof Alternation){return"Alternation"}else if(e instanceof Option){return"Option"}else if(e instanceof Repetition){return"Repetition"}else if(e instanceof RepetitionWithSeparator){return"RepetitionWithSeparator"}else if(e instanceof RepetitionMandatory){return"RepetitionMandatory"}else if(e instanceof RepetitionMandatoryWithSeparator){return"RepetitionMandatoryWithSeparator"}else{throw new Error("Invalid production type encountered")}}function Xi(t,r){const n=r.length;for(let a=0;a<n-1;a++){let n=r[a],o;n.left.transitions.length===1&&(o=n.left.transitions[0]);let i=o instanceof RuleTransition,s=o,l=r[a+1].left;if(n.left.type===vi&&n.right.type===vi&&o!==e&&(i&&s.followState===n.right||o.target===n.right)){if(i){s.followState=l}else{o.target=l}ts(t,n.right)}else{Zi(n.right,l)}}const a=r[0];const o=r[n-1];return{left:a.left,right:o.right}}function Ji(e,t,r,n){const a=Qi(e,t,n,{type:vi});const o=Qi(e,t,n,{type:vi});es(a,new AtomTransition(o,r));return{left:a,right:o}}function qi(e,t,r){const n=r.referencedRule;const a=e.ruleToStartState.get(n);const o=Qi(e,t,r,{type:vi});const i=Qi(e,t,r,{type:vi});const s=new RuleTransition(a,n,i);es(o,s);return{left:o,right:i}}function Yi(e,t,r){const n=e.ruleToStartState.get(t);Zi(n,r.left);const a=e.ruleToStopState.get(t);Zi(r.right,a);const o={left:n,right:a};return o}function Zi(e,t){const r=new EpsilonTransition(t);es(e,r)}function Qi(e,t,r,n){const a=Object.assign({atn:e,production:r,epsilonOnlyTransitions:!1,rule:t,transitions:[],nextTokenWithinRule:[],stateNumber:e.states.length},n);e.states.push(a);return a}function es(e,t){e.transitions.length===0&&(e.epsilonOnlyTransitions=t.isEpsilon());e.transitions.push(t)}function ts(e,t){e.states.splice(e.states.indexOf(t),1)}var rs={};class ATNConfigSet{constructor(){this.map={};this.configs=[]}get size(){return this.configs.length}finalize(){this.map={}}add(e){const t=ns(e);if(!(t in this.map)){this.map[t]=this.configs.length;this.configs.push(e)}}get elements(){return this.configs}get alts(){return l(this.configs,e=>e.alt)}get key(){let e="";for(const t in this.map){e+=t+":"}return e}}function ns(e,t=!0){return`${t?`a${e.alt}`:""}s${e.state.stateNumber}:${e.stack.map(e=>e.stateNumber.toString()).join("_")}`}function as(t,r){const n={};return a=>{const o=a.toString();let i=n[o];if(i!==e){return i}else{i={atnStartState:t,decision:r,states:{}};n[o]=i;return i}}}class PredicateSet{constructor(){this.predicates=[]}is(e){return e>=this.predicates.length||this.predicates[e]}set(e,t){this.predicates[e]=t}toString(){let e="";const t=this.predicates.length;for(let r=0;r<t;r++){e+=this.predicates[r]===!0?"1":"0"}return e}}const os=new PredicateSet;class LLStarLookaheadStrategy extends LLkLookaheadStrategy{constructor(e){var t;super();this.logging=(t=e===null||e===void 0?void 0:e.logging)!==null&&t!==void 0?t:e=>console.log(e)}initialize(e){this.atn=Oi(e.rules);this.dfas=ss(this.atn)}validateAmbiguousAlternationAlternatives(){return[]}validateEmptyOrAlternatives(){return[]}buildLookaheadForAlternation(t){const{prodOccurrence:r,rule:n,hasPredicates:a,dynamicTokensEnabled:i}=t;const s=this.dfas;const c=this.logging;const u=ki(n,"Alternation",r);const d=this.atn.decisionMap[u];const p=d.decision;const m=l(qa({maxLookahead:1,occurrence:r,prodType:"Alternation",rule:n}),e=>l(e,e=>e[0]));if(is(m,!1)&&!i){let t=C(m,(e,t,r)=>{o(t,t=>{if(t){e[t.tokenTypeIdx]=r;o(t.categoryMatches,t=>{e[t]=r})}});return e},{});if(a){return function(r){var n;const a=this.LA(1);const o=t[a.tokenTypeIdx];if(r!==e&&o!==e){let t=(n=r[o])===null||n===void 0?void 0:n.GATE;if(t!==e&&t.call(this)===!1){return e}}return o}}else{return function(){const e=this.LA(1);return t[e.tokenTypeIdx]}}}else if(a){return function(t){const r=new PredicateSet;const n=t===e?0:t.length;for(let a=0;a<n;a++){let n=t===null||t===void 0?void 0:t[a].GATE;r.set(a,n===e||n.call(this))}const a=ls.call(this,s,p,r,c);return typeof a==="number"?a:e}}else{return function(){const t=ls.call(this,s,p,os,c);return typeof t==="number"?t:e}}}buildLookaheadForOptional(t){const{prodOccurrence:r,rule:n,prodType:a,dynamicTokensEnabled:i}=t;const s=this.dfas;const c=this.logging;const u=ki(n,a,r);const d=this.atn.decisionMap[u];const p=d.decision;const m=l(qa({maxLookahead:1,occurrence:r,prodType:a,rule:n}),e=>l(e,e=>e[0]));if(is(m)&&m[0][0]&&!i){let t=m[0],r=h(t);if(r.length===1&&I(r[0].categoryMatches)){let e=r[0],t=e.tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===t}}else{let t=C(r,(t,r)=>{if(r!==e){t[r.tokenTypeIdx]=!0;o(r.categoryMatches,e=>{t[e]=!0})}return t},{});return function(){const e=this.LA(1);return t[e.tokenTypeIdx]===!0}}}return function(){const e=ls.call(this,s,p,os,c);return typeof e==="object"?!1:e===0}}}function is(t,r=!0){const n=new Set;for(const a of t){let t=new Set;for(const o of a){if(o===e){if(r){break}else{return!1}}let a=[o.tokenTypeIdx].concat(o.categoryMatches);for(const e of a){if(n.has(e)){if(!t.has(e)){return!1}}else{n.add(e);t.add(e)}}}}return!0}function ss(e){const t=e.decisionStates.length;const r=Array(t);for(let n=0;n<t;n++){r[n]=as(e.decisionStates[n],n)}return r}function ls(t,r,n,a){const o=t[r](n);let i=o.start;if(i===e){let e=vs(o.atnStartState);i=ks(o,xs(e));o.start=i}const s=cs.apply(this,[o,i,n,a]);return s}function cs(t,r,n,a){let o=r;let i=1;const s=[];let l=this.LA(i++);while(!0){let r=hs(o,l);r===e&&(r=us.apply(this,[t,o,l,i,n,a]));if(r===rs){return fs(s,o,l)}if(r.isAcceptState===!0){return r.prediction}o=r;s.push(l);l=this.LA(i++)}}function us(t,r,n,a,o,i){const s=_s(r.configs,n,o);if(s.size===0){Ts(t,r,n,rs);return rs}let l=xs(s);const c=ys(s,o);if(c!==e){l.isAcceptState=!0;l.prediction=c;l.configs.uniqueAlt=c}else if(Es(s)){let e=K(s.alts);l.isAcceptState=!0;l.prediction=e;l.configs.uniqueAlt=e;ds.apply(this,[t,a,s.alts,i])}l=Ts(t,r,n,l);return l}function ds(e,t,r,n){const a=[];for(let e=1;e<=t;e++){a.push(this.LA(e).tokenType)}const o=e.atnStartState;const i=o.rule;const s=o.production;const l=ps({topLevelRule:i,ambiguityIndices:r,production:s,prefixPath:a});n(l)}function ps(e){const t=l(e.prefixPath,e=>Ca(e)).join(", ");const r=e.production.idx===0?"":e.production.idx;let n=`Ambiguous Alternatives Detected: <${e.ambiguityIndices.join(", ")}> in <${ms(e.production)}${r}>`+` inside <${e.topLevelRule.name}> Rule,\n`+`<${t}> may appears as a prefix path in all these alternatives.\n`;n=n+`See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES\n`+`For Further details.`;return n}function ms(e){if(e instanceof NonTerminal){return"SUBRULE"}else if(e instanceof Option){return"OPTION"}else if(e instanceof Alternation){return"OR"}else if(e instanceof RepetitionMandatory){return"AT_LEAST_ONE"}else if(e instanceof RepetitionMandatoryWithSeparator){return"AT_LEAST_ONE_SEP"}else if(e instanceof RepetitionWithSeparator){return"MANY_SEP"}else if(e instanceof Repetition){return"MANY"}else if(e instanceof Terminal){return"CONSUME"}else{throw Error("non exhaustive match")}}function fs(e,t,r){const n=M(t.configs.elements,e=>e.state.transitions);const a=U(n.filter(e=>e instanceof AtomTransition).map(e=>e.tokenType),e=>e.tokenTypeIdx);return{actualToken:r,possibleTokenTypes:a,tokenPath:e}}function hs(e,t){return e.edges[t.tokenTypeIdx]}function _s(t,r,n){const a=new ATNConfigSet;const o=[];for(const i of t.elements){if(n.is(i.alt)===!1){continue}if(i.state.type===Ii){o.push(i);continue}let t=i.state.transitions.length;for(let n=0;n<t;n++){let t=i.state.transitions[n],o=gs(t,r);o!==e&&a.add({state:o,alt:i.alt,stack:i.stack})}}let i;o.length===0&&a.size===1&&(i=a);if(i===e){i=new ATNConfigSet;for(const e of a.elements){Rs(e,i)}}if(o.length>0&&!Cs(i)){for(const e of o){i.add(e)}}return i}function gs(t,r){if(t instanceof AtomTransition&&Ka(r,t.tokenType)){return t.target}return e}function ys(t,r){let n;for(const a of t.elements){if(r.is(a.alt)===!0){if(n===e){n=a.alt}else if(n!==a.alt){return e}}}return n}function xs(e){return{configs:e,edges:{},isAcceptState:!1,prediction:-1}}function Ts(e,t,r,n){n=ks(e,n);t.edges[r.tokenTypeIdx]=n;return n}function ks(t,r){if(r===rs){return r}const n=r.configs.key;const a=t.states[n];if(a!==e){return a}r.configs.finalize();t.states[n]=r;return r}function vs(e){const t=new ATNConfigSet;const r=e.transitions.length;for(let n=0;n<r;n++){let r=e.transitions[n].target,a={state:r,alt:n,stack:[]};Rs(a,t)}return t}function Rs(t,r){const n=t.state;if(n.type===Ii){if(t.stack.length>0){let e=[...t.stack],n=e.pop(),a={state:n,alt:t.alt,stack:e};Rs(a,r)}else{r.add(t)}return}n.epsilonOnlyTransitions||r.add(t);const a=n.transitions.length;for(let o=0;o<a;o++){let a=n.transitions[o],i=As(t,a);i!==e&&Rs(i,r)}}function As(t,r){if(r instanceof EpsilonTransition){return{state:r.target,alt:t.alt,stack:t.stack}}else if(r instanceof RuleTransition){let e=[...t.stack,r.followState];return{state:r.target,alt:t.alt,stack:e}}return e}function Cs(e){for(const t of e.elements){if(t.state.type===Ii){return!0}}return!1}function Is(e){for(const t of e.elements){if(t.state.type!==Ii){return!1}}return!0}function Es(e){if(Is(e)){return!0}const t=Ss(e.elements);const r=Ps(t)&&!Ns(t);return r}function Ss(t){const r=new Map;for(const n of t){let t=ns(n,!1),a=r.get(t);if(a===e){a={};r.set(t,a)}a[n.alt]=!0}return r}function Ps(e){for(const t of Array.from(e.values())){if(Object.keys(t).length>1){return!0}}return!1}function Ns(e){for(const t of Array.from(e.values())){if(Object.keys(t).length===1){return!0}}return!1}var bs={};var Os={};var Ls={};var ws={};var $s={};var Ds={};var Ms={};var Fs={};var Gs={};var Ks={};var Us={};var Vs={};var Bs={};var js={};var Ws={};var zs={};var Hs={};var Xs={};var Js={};var qs={};var Ys={};var Zs={};var Qs={};var el={};var tl={};var rl={};var nl={};var al={};var ol={};var il={};var sl={};var ll={};var cl={};var ul={};var dl={};var pl={};var ml={};var fl={};var hl={};var _l={};var gl={};var yl={};var xl={};var Tl={};var kl={};var vl={};var Rl={};var Al={};var Cl={};var Il={};var El={};var Sl={};var Pl={};var Nl={};var bl={};var Ol={};var Ll={};var wl={};var $l={};var Dl={};var Ml={};var Fl={};var Gl={};var Kl={};var Ul={};var Vl={};var Bl={};var jl={};var Wl={};var zl={};var Hl={};var Xl={};var Jl={};var ql={};var Yl={};var Zl={};var Ql={};(function(e){function t(e){return typeof e==="string"}e.is=t})(bs);(function(e){function t(e){return typeof e==="string"}e.is=t})(Os);(function(e){e.MIN_VALUE=-2147483648;e.MAX_VALUE=2147483647;function t(t){return typeof t==="number"&&e.MIN_VALUE<=t&&t<=e.MAX_VALUE}e.is=t})(Ls);(function(e){e.MIN_VALUE=0;e.MAX_VALUE=2147483647;function t(t){return typeof t==="number"&&e.MIN_VALUE<=t&&t<=e.MAX_VALUE}e.is=t})(ws);(function(e){function t(e,t){e===Number.MAX_VALUE&&(e=ws.MAX_VALUE);t===Number.MAX_VALUE&&(t=ws.MAX_VALUE);return{line:e,character:t}}e.create=t;function r(e){return ec.objectLiteral(e)&&ec.uinteger(e.line)&&ec.uinteger(e.character)}e.is=r})($s);(function(e){function t(e,t,r,n){if(ec.uinteger(e)&&ec.uinteger(t)&&ec.uinteger(r)&&ec.uinteger(n)){return{start:$s.create(e,t),end:$s.create(r,n)}}else if($s.is(e)&&$s.is(t)){return{start:e,end:t}}else{throw new Error(`Range#create called with invalid arguments[${e}, ${t}, ${r}, ${n}]`)}}e.create=t;function r(e){return ec.objectLiteral(e)&&$s.is(e.start)&&$s.is(e.end)}e.is=r})(Ds);(function(e){function t(e,t){return{uri:e,range:t}}e.create=t;function r(e){return ec.objectLiteral(e)&&Ds.is(e.range)&&(ec.string(e.uri)||ec.undefined(e.uri))}e.is=r})(Ms);(function(e){function t(e,t,r,n){return{targetUri:e,targetRange:t,targetSelectionRange:r,originSelectionRange:n}}e.create=t;function r(e){return ec.objectLiteral(e)&&Ds.is(e.targetRange)&&ec.string(e.targetUri)&&Ds.is(e.targetSelectionRange)&&(Ds.is(e.originSelectionRange)||ec.undefined(e.originSelectionRange))}e.is=r})(Fs);(function(e){function t(e,t,r,n){return{red:e,green:t,blue:r,alpha:n}}e.create=t;function r(e){return ec.objectLiteral(e)&&ec.numberRange(e.red,0,1)&&ec.numberRange(e.green,0,1)&&ec.numberRange(e.blue,0,1)&&ec.numberRange(e.alpha,0,1)}e.is=r})(Gs);(function(e){function t(e,t){return{range:e,color:t}}e.create=t;function r(e){return ec.objectLiteral(e)&&Ds.is(e.range)&&Gs.is(e.color)}e.is=r})(Ks);(function(e){function t(e,t,r){return{label:e,textEdit:t,additionalTextEdits:r}}e.create=t;function r(e){return ec.objectLiteral(e)&&ec.string(e.label)&&(ec.undefined(e.textEdit)||Us.is(e))&&(ec.undefined(e.additionalTextEdits)||ec.typedArray(e.additionalTextEdits,Us.is))}e.is=r})(Vs);(function(e){e.Comment="comment";e.Imports="imports";e.Region="region"})(Bs);(function(e){function t(e,t,r,n,a,o){const i={startLine:e,endLine:t};ec.defined(r)&&(i.startCharacter=r);ec.defined(n)&&(i.endCharacter=n);ec.defined(a)&&(i.kind=a);ec.defined(o)&&(i.collapsedText=o);return i}e.create=t;function r(e){return ec.objectLiteral(e)&&ec.uinteger(e.startLine)&&ec.uinteger(e.startLine)&&(ec.undefined(e.startCharacter)||ec.uinteger(e.startCharacter))&&(ec.undefined(e.endCharacter)||ec.uinteger(e.endCharacter))&&(ec.undefined(e.kind)||ec.string(e.kind))}e.is=r})(js);(function(e){function t(e,t){return{location:e,message:t}}e.create=t;function r(e){return ec.defined(e)&&Ms.is(e.location)&&ec.string(e.message)}e.is=r})(Ws);(function(e){e.Error=1;e.Warning=2;e.Information=3;e.Hint=4})(zs);(function(e){e.Unnecessary=1;e.Deprecated=2})(Hs);(function(e){function t(e){return ec.objectLiteral(e)&&ec.string(e.href)}e.is=t})(Xs);(function(e){function t(e,t,r,n,a,o){let i={range:e,message:t};ec.defined(r)&&(i.severity=r);ec.defined(n)&&(i.code=n);ec.defined(a)&&(i.source=a);ec.defined(o)&&(i.relatedInformation=o);return i}e.create=t;function r(e){var t;return ec.defined(e)&&Ds.is(e.range)&&ec.string(e.message)&&(ec.number(e.severity)||ec.undefined(e.severity))&&(ec.integer(e.code)||ec.string(e.code)||ec.undefined(e.code))&&(ec.undefined(e.codeDescription)||ec.string((t=e.codeDescription)===null||t===void 0?void 0:t.href))&&(ec.string(e.source)||ec.undefined(e.source))&&(ec.undefined(e.relatedInformation)||ec.typedArray(e.relatedInformation,Ws.is))}e.is=r})(Js);(function(e){function t(e,t,...r){let n={title:e,command:t};ec.defined(r)&&r.length>0&&(n.arguments=r);return n}e.create=t;function r(e){return ec.defined(e)&&ec.string(e.title)&&ec.string(e.command)}e.is=r})(qs);(function(e){function t(e,t){return{range:e,newText:t}}e.replace=t;function r(e,t){return{range:{start:e,end:e},newText:t}}e.insert=r;function n(e){return{range:e,newText:""}}e.del=n;function a(e){return ec.objectLiteral(e)&&ec.string(e.newText)&&Ds.is(e.range)}e.is=a})(Us);(function(t){function r(t,r,n){const a={label:t};r!==e&&(a.needsConfirmation=r);n!==e&&(a.description=n);return a}t.create=r;function n(t){return ec.objectLiteral(t)&&ec.string(t.label)&&(ec.boolean(t.needsConfirmation)||t.needsConfirmation===e)&&(ec.string(t.description)||t.description===e)}t.is=n})(Ys);(function(e){function t(e){return ec.string(e)}e.is=t})(Zs);(function(e){function t(e,t,r){return{range:e,newText:t,annotationId:r}}e.replace=t;function r(e,t,r){return{range:{start:e,end:e},newText:t,annotationId:r}}e.insert=r;function n(e,t){return{range:e,newText:"",annotationId:t}}e.del=n;function a(e){return Us.is(e)&&(Ys.is(e.annotationId)||Zs.is(e.annotationId))}e.is=a})(Qs);(function(e){function t(e,t){return{textDocument:e,edits:t}}e.create=t;function r(e){return ec.defined(e)&&el.is(e.textDocument)&&Array.isArray(e.edits)}e.is=r})(tl);(function(t){function r(t,r,n){let a={kind:"create",uri:t};r!==e&&(r.overwrite!==e||r.ignoreIfExists!==e)&&(a.options=r);n!==e&&(a.annotationId=n);return a}t.create=r;function n(t){return t&&t.kind==="create"&&ec.string(t.uri)&&(t.options===e||(t.options.overwrite===e||ec.boolean(t.options.overwrite))&&(t.options.ignoreIfExists===e||ec.boolean(t.options.ignoreIfExists)))&&(t.annotationId===e||Zs.is(t.annotationId))}t.is=n})(rl);(function(t){function r(t,r,n,a){let o={kind:"rename",oldUri:t,newUri:r};n!==e&&(n.overwrite!==e||n.ignoreIfExists!==e)&&(o.options=n);a!==e&&(o.annotationId=a);return o}t.create=r;function n(t){return t&&t.kind==="rename"&&ec.string(t.oldUri)&&ec.string(t.newUri)&&(t.options===e||(t.options.overwrite===e||ec.boolean(t.options.overwrite))&&(t.options.ignoreIfExists===e||ec.boolean(t.options.ignoreIfExists)))&&(t.annotationId===e||Zs.is(t.annotationId))}t.is=n})(nl);(function(t){function r(t,r,n){let a={kind:"delete",uri:t};r!==e&&(r.recursive!==e||r.ignoreIfNotExists!==e)&&(a.options=r);n!==e&&(a.annotationId=n);return a}t.create=r;function n(t){return t&&t.kind==="delete"&&ec.string(t.uri)&&(t.options===e||(t.options.recursive===e||ec.boolean(t.options.recursive))&&(t.options.ignoreIfNotExists===e||ec.boolean(t.options.ignoreIfNotExists)))&&(t.annotationId===e||Zs.is(t.annotationId))}t.is=n})(al);(function(t){function r(t){return t&&(t.changes!==e||t.documentChanges!==e)&&(t.documentChanges===e||t.documentChanges.every(e=>{if(ec.string(e.kind)){return rl.is(e)||nl.is(e)||al.is(e)}else{return tl.is(e)}}))}t.is=r})(ol);(function(e){function t(e){return{uri:e}}e.create=t;function r(e){return ec.defined(e)&&ec.string(e.uri)}e.is=r})(il);(function(e){function t(e,t){return{uri:e,version:t}}e.create=t;function r(e){return ec.defined(e)&&ec.string(e.uri)&&ec.integer(e.version)}e.is=r})(sl);(function(e){function t(e,t){return{uri:e,version:t}}e.create=t;function r(e){return ec.defined(e)&&ec.string(e.uri)&&(e.version===null||ec.integer(e.version))}e.is=r})(el);(function(e){function t(e,t,r,n){return{uri:e,languageId:t,version:r,text:n}}e.create=t;function r(e){return ec.defined(e)&&ec.string(e.uri)&&ec.string(e.languageId)&&ec.integer(e.version)&&ec.string(e.text)}e.is=r})(ll);(function(e){e.PlainText="plaintext";e.Markdown="markdown";function t(t){return t===e.PlainText||t===e.Markdown}e.is=t})(cl);(function(e){function t(e){return ec.objectLiteral(e)&&cl.is(e.kind)&&ec.string(e.value)}e.is=t})(ul);(function(e){e.Text=1;e.Method=2;e.Function=3;e.Constructor=4;e.Field=5;e.Variable=6;e.Class=7;e.Interface=8;e.Module=9;e.Property=10;e.Unit=11;e.Value=12;e.Enum=13;e.Keyword=14;e.Snippet=15;e.Color=16;e.File=17;e.Reference=18;e.Folder=19;e.EnumMember=20;e.Constant=21;e.Struct=22;e.Event=23;e.Operator=24;e.TypeParameter=25})(dl);(function(e){e.PlainText=1;e.Snippet=2})(pl);(function(e){e.Deprecated=1})(ml);(function(e){function t(e,t,r){return{newText:e,insert:t,replace:r}}e.create=t;function r(e){return e&&ec.string(e.newText)&&Ds.is(e.insert)&&Ds.is(e.replace)}e.is=r})(fl);(function(e){e.asIs=1;e.adjustIndentation=2})(hl);(function(t){function r(t){return t&&(ec.string(t.detail)||t.detail===e)&&(ec.string(t.description)||t.description===e)}t.is=r})(_l);(function(e){function t(e){return{label:e}}e.create=t})(gl);(function(e){function t(e,t){return{items:e?e:[],isIncomplete:!!t}}e.create=t})(yl);(function(e){function t(e){return e.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}e.fromPlainText=t;function r(e){return ec.string(e)||ec.objectLiteral(e)&&ec.string(e.language)&&ec.string(e.value)}e.is=r})(xl);(function(t){function r(t){return!!t&&ec.objectLiteral(t)&&(ul.is(t.contents)||xl.is(t.contents)||ec.typedArray(t.contents,xl.is))&&(t.range===e||Ds.is(t.range))}t.is=r})(Tl);(function(e){function t(e,t){return t?{label:e,documentation:t}:{label:e}}e.create=t})(kl);(function(e){function t(e,t,...r){let n={label:e};ec.defined(t)&&(n.documentation=t);if(ec.defined(r)){n.parameters=r}else{n.parameters=[]}return n}e.create=t})(vl);(function(e){e.Text=1;e.Read=2;e.Write=3})(Rl);(function(e){function t(e,t){let r={range:e};ec.number(t)&&(r.kind=t);return r}e.create=t})(Al);(function(e){e.File=1;e.Module=2;e.Namespace=3;e.Package=4;e.Class=5;e.Method=6;e.Property=7;e.Field=8;e.Constructor=9;e.Enum=10;e.Interface=11;e.Function=12;e.Variable=13;e.Constant=14;e.String=15;e.Number=16;e.Boolean=17;e.Array=18;e.Object=19;e.Key=20;e.Null=21;e.EnumMember=22;e.Struct=23;e.Event=24;e.Operator=25;e.TypeParameter=26})(Cl);(function(e){e.Deprecated=1})(Il);(function(e){function t(e,t,r,n,a){let o={name:e,kind:t,location:{uri:n,range:r}};a&&(o.containerName=a);return o}e.create=t})(El);(function(t){function r(t,r,n,a){return a!==e?{name:t,kind:r,location:{uri:n,range:a}}:{name:t,kind:r,location:{uri:n}}}t.create=r})(Sl);(function(t){function r(t,r,n,a,o,i){let s={name:t,detail:r,kind:n,range:a,selectionRange:o};i!==e&&(s.children=i);return s}t.create=r;function n(t){return t&&ec.string(t.name)&&ec.number(t.kind)&&Ds.is(t.range)&&Ds.is(t.selectionRange)&&(t.detail===e||ec.string(t.detail))&&(t.deprecated===e||ec.boolean(t.deprecated))&&(t.children===e||Array.isArray(t.children))&&(t.tags===e||Array.isArray(t.tags))}t.is=n})(Pl);(function(e){e.Empty="";e.QuickFix="quickfix";e.Refactor="refactor";e.RefactorExtract="refactor.extract";e.RefactorInline="refactor.inline";e.RefactorRewrite="refactor.rewrite";e.Source="source";e.SourceOrganizeImports="source.organizeImports";e.SourceFixAll="source.fixAll"})(Nl);(function(e){e.Invoked=1;e.Automatic=2})(bl);(function(t){function r(t,r,n){let a={
diagnostics:t};r!==e&&r!==null&&(a.only=r);n!==e&&n!==null&&(a.triggerKind=n);return a}t.create=r;function n(t){return ec.defined(t)&&ec.typedArray(t.diagnostics,Js.is)&&(t.only===e||ec.typedArray(t.only,ec.string))&&(t.triggerKind===e||t.triggerKind===bl.Invoked||t.triggerKind===bl.Automatic)}t.is=n})(Ol);(function(t){function r(t,r,n){let a={title:t};let o=!0;if(typeof r==="string"){o=!1;a.kind=r}else if(qs.is(r)){a.command=r}else{a.edit=r}o&&n!==e&&(a.kind=n);return a}t.create=r;function n(t){return t&&ec.string(t.title)&&(t.diagnostics===e||ec.typedArray(t.diagnostics,Js.is))&&(t.kind===e||ec.string(t.kind))&&(t.edit!==e||t.command!==e)&&(t.command===e||qs.is(t.command))&&(t.isPreferred===e||ec.boolean(t.isPreferred))&&(t.edit===e||ol.is(t.edit))}t.is=n})(Ll);(function(e){function t(e,t){let r={range:e};ec.defined(t)&&(r.data=t);return r}e.create=t;function r(e){return ec.defined(e)&&Ds.is(e.range)&&(ec.undefined(e.command)||qs.is(e.command))}e.is=r})(wl);(function(e){function t(e,t){return{tabSize:e,insertSpaces:t}}e.create=t;function r(e){return ec.defined(e)&&ec.uinteger(e.tabSize)&&ec.boolean(e.insertSpaces)}e.is=r})($l);(function(e){function t(e,t,r){return{range:e,target:t,data:r}}e.create=t;function r(e){return ec.defined(e)&&Ds.is(e.range)&&(ec.undefined(e.target)||ec.string(e.target))}e.is=r})(Dl);(function(t){function r(e,t){return{range:e,parent:t}}t.create=r;function n(r){return ec.objectLiteral(r)&&Ds.is(r.range)&&(r.parent===e||t.is(r.parent))}t.is=n})(Ml);(function(t){function r(t){return ec.objectLiteral(t)&&(t.resultId===e||typeof t.resultId==="string")&&Array.isArray(t.data)&&(t.data.length===0||typeof t.data[0]==="number")}t.is=r})(Fl);(function(t){function r(e,t){return{range:e,text:t}}t.create=r;function n(t){return t!==e&&t!==null&&Ds.is(t.range)&&ec.string(t.text)}t.is=n})(Gl);(function(t){function r(e,t,r){return{range:e,variableName:t,caseSensitiveLookup:r}}t.create=r;function n(t){return t!==e&&t!==null&&Ds.is(t.range)&&ec.boolean(t.caseSensitiveLookup)&&(ec.string(t.variableName)||t.variableName===e)}t.is=n})(Kl);(function(t){function r(e,t){return{range:e,expression:t}}t.create=r;function n(t){return t!==e&&t!==null&&Ds.is(t.range)&&(ec.string(t.expression)||t.expression===e)}t.is=n})(Ul);(function(e){function t(e,t){return{frameId:e,stoppedLocation:t}}e.create=t;function r(e){return ec.defined(e)&&Ds.is(e.stoppedLocation)}e.is=r})(Vl);(function(e){e.Type=1;e.Parameter=2;function t(e){return e===1||e===2}e.is=t})(Bl);(function(t){function r(e){return{value:e}}t.create=r;function n(t){return ec.objectLiteral(t)&&(t.tooltip===e||ec.string(t.tooltip)||ul.is(t.tooltip))&&(t.location===e||Ms.is(t.location))&&(t.command===e||qs.is(t.command))}t.is=n})(jl);(function(t){function r(t,r,n){const a={position:t,label:r};n!==e&&(a.kind=n);return a}t.create=r;function n(t){return ec.objectLiteral(t)&&$s.is(t.position)&&(ec.string(t.label)||ec.typedArray(t.label,jl.is))&&(t.kind===e||Bl.is(t.kind))&&t.textEdits===e||ec.typedArray(t.textEdits,Us.is)&&(t.tooltip===e||ec.string(t.tooltip)||ul.is(t.tooltip))&&(t.paddingLeft===e||ec.boolean(t.paddingLeft))&&(t.paddingRight===e||ec.boolean(t.paddingRight))}t.is=n})(Wl);(function(e){function t(e){return{kind:"snippet",value:e}}e.createSnippet=t})(zl);(function(e){function t(e,t,r,n){return{insertText:e,filterText:t,range:r,command:n}}e.create=t})(Hl);(function(e){function t(e){return{items:e}}e.create=t})(Xl);(function(e){e.Invoked=0;e.Automatic=1})(Jl);(function(e){function t(e,t){return{range:e,text:t}}e.create=t})(ql);(function(e){function t(e,t){return{triggerKind:e,selectedCompletionInfo:t}}e.create=t})(Yl);(function(e){function t(e){return ec.objectLiteral(e)&&Os.is(e.uri)&&ec.string(e.name)}e.is=t})(Zl);(function(e){function t(e,t,r,n){return new FullTextDocument(e,t,r,n)}e.create=t;function r(e){return ec.defined(e)&&ec.string(e.uri)&&(ec.undefined(e.languageId)||ec.string(e.languageId))&&ec.uinteger(e.lineCount)&&ec.func(e.getText)&&ec.func(e.positionAt)&&ec.func(e.offsetAt)?!0:!1}e.is=r;function n(e,t){let r=e.getText();let n=a(t,(e,t)=>{let r=e.range.start.line-t.range.start.line;if(r===0){return e.range.start.character-t.range.start.character}return r});let o=r.length;for(let t=n.length-1;t>=0;t--){let a=n[t],i=e.offsetAt(a.range.start),s=e.offsetAt(a.range.end);if(s<=o){r=r.substring(0,i)+a.newText+r.substring(s,r.length)}else{throw new Error("Overlapping edit")}o=i}return r}e.applyEdits=n;function a(e,t){if(e.length<=1){return e}const r=e.length/2|0;const n=e.slice(0,r);const o=e.slice(r);a(n,t);a(o,t);let i=0;let s=0;let l=0;while(i<n.length&&s<o.length){let r=t(n[i],o[s]);if(r<=0){e[l++]=n[i++]}else{e[l++]=o[s++]}}while(i<n.length){e[l++]=n[i++]}while(s<o.length){e[l++]=o[s++]}return e}})(Ql);class FullTextDocument{constructor(t,r,n,a){this._uri=t;this._languageId=r;this._version=n;this._content=a;this._lineOffsets=e}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(e){if(e){let t=this.offsetAt(e.start),r=this.offsetAt(e.end);return this._content.substring(t,r)}return this._content}update(t,r){this._content=t.text;this._version=r;this._lineOffsets=e}getLineOffsets(){if(this._lineOffsets===e){let e=[],t=this._content,r=!0;for(let n=0;n<t.length;n++){if(r){e.push(n);r=!1}let a=t.charAt(n);r=a==="\r"||a==="\n";a==="\r"&&n+1<t.length&&t.charAt(n+1)==="\n"&&n++}r&&t.length>0&&e.push(t.length);this._lineOffsets=e}return this._lineOffsets}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);let t=this.getLineOffsets();let r=0,n=t.length;if(n===0){return $s.create(0,e)}while(r<n){let a=Math.floor((r+n)/2);if(t[a]>e){n=a}else{r=a+1}}let a=r-1;return $s.create(a,e-t[a])}offsetAt(e){let t=this.getLineOffsets();if(e.line>=t.length){return this._content.length}else if(e.line<0){return 0}let r=t[e.line];let n=e.line+1<t.length?t[e.line+1]:this._content.length;return Math.max(Math.min(r+e.character,n),r)}get lineCount(){return this.getLineOffsets().length}}var ec={};(function(e){const t=Object.prototype.toString;function r(e){return typeof e!=="undefined"}e.defined=r;function n(e){return typeof e==="undefined"}e.undefined=n;function a(e){return e===!0||e===!1}e.boolean=a;function o(e){return t.call(e)==="[object String]"}e.string=o;function i(e){return t.call(e)==="[object Number]"}e.number=i;function s(e,r,n){return t.call(e)==="[object Number]"&&r<=e&&e<=n}e.numberRange=s;function l(e){return t.call(e)==="[object Number]"&&-2147483648<=e&&e<=2147483647}e.integer=l;function c(e){return t.call(e)==="[object Number]"&&0<=e&&e<=2147483647}e.uinteger=c;function u(e){return t.call(e)==="[object Function]"}e.func=u;function d(e){return e!==null&&typeof e==="object"}e.objectLiteral=d;function p(e,t){return Array.isArray(e)&&e.every(t)}e.typedArray=p})(ec);class CstNodeBuilder{constructor(){this.nodeStack=[]}get current(){var e;return(e=this.nodeStack[this.nodeStack.length-1])!==null&&e!==void 0?e:this.rootNode}buildRootNode(e){this.rootNode=new RootCstNodeImpl(e);this.rootNode.root=this.rootNode;this.nodeStack=[this.rootNode];return this.rootNode}buildCompositeNode(e){const t=new CompositeCstNodeImpl;t.grammarSource=e;t.root=this.rootNode;this.current.content.push(t);this.nodeStack.push(t);return t}buildLeafNode(e,t){const r=new LeafCstNodeImpl(e.startOffset,e.image.length,ne(e),e.tokenType,!t);r.grammarSource=t;r.root=this.rootNode;this.current.content.push(r);return r}removeNode(e){const t=e.container;if(t){let r=t.content.indexOf(e);r>=0&&t.content.splice(r,1)}}addHiddenNodes(e){const t=[];for(const r of e){let e=new LeafCstNodeImpl(r.startOffset,r.image.length,ne(r),r.tokenType,!0);e.root=this.rootNode;t.push(e)}let r=this.current;let n=!1;if(r.content.length>0){r.content.push(...t);return}while(r.container){let e=r.container.content.indexOf(r);if(e>0){r.container.content.splice(e,0,...t);n=!0;break}r=r.container}n||this.rootNode.content.unshift(...t)}construct(e){const t=this.current;typeof e.$type==="string"&&(this.current.astNode=e);e.$cstNode=t;const r=this.nodeStack.pop();(r===null||r===void 0?void 0:r.content.length)===0&&this.removeNode(r)}}class AbstractCstNode{get parent(){return this.container}get feature(){return this.grammarSource}get hidden(){return!1}get astNode(){var e,t;const r=typeof((e=this._astNode)===null||e===void 0?void 0:e.$type)==="string"?this._astNode:(t=this.container)===null||t===void 0?void 0:t.astNode;if(!r){throw new Error("This node has no associated AST element")}return r}set astNode(e){this._astNode=e}get element(){return this.astNode}get text(){return this.root.fullText.substring(this.offset,this.end)}}class LeafCstNodeImpl extends AbstractCstNode{get offset(){return this._offset}get length(){return this._length}get end(){return this._offset+this._length}get hidden(){return this._hidden}get tokenType(){return this._tokenType}get range(){return this._range}constructor(e,t,r,n,a=!1){super();this._hidden=a;this._offset=e;this._tokenType=n;this._length=t;this._range=r}}class CompositeCstNodeImpl extends AbstractCstNode{constructor(){super(...arguments);this.content=new CstNodeContainer(this)}get children(){return this.content}get offset(){var e,t;return(t=(e=this.firstNonHiddenNode)===null||e===void 0?void 0:e.offset)!==null&&t!==void 0?t:0}get length(){return this.end-this.offset}get end(){var e,t;return(t=(e=this.lastNonHiddenNode)===null||e===void 0?void 0:e.end)!==null&&t!==void 0?t:0}get range(){const t=this.firstNonHiddenNode;const r=this.lastNonHiddenNode;if(t&&r){if(this._rangeCache===e){let{range:e}=t,{range:n}=r;this._rangeCache={start:e.start,end:n.end.line<e.start.line?e.start:n.end}}return this._rangeCache}else{return{start:$s.create(0,0),end:$s.create(0,0)}}}get firstNonHiddenNode(){for(const e of this.content){if(!e.hidden){return e}}return this.content[0]}get lastNonHiddenNode(){for(let e=this.content.length-1;e>=0;e--){let t=this.content[e];if(!t.hidden){return t}}return this.content[this.content.length-1]}}class CstNodeContainer extends Array{constructor(e){super();this.parent=e;Object.setPrototypeOf(this,CstNodeContainer.prototype)}push(...e){this.addParents(e);return super.push(...e)}unshift(...e){this.addParents(e);return super.unshift(...e)}splice(e,t,...r){this.addParents(r);return super.splice(e,t,...r)}addParents(e){for(const t of e){t.container=this.parent}}}class RootCstNodeImpl extends CompositeCstNodeImpl{get text(){return this._text.substring(this.offset,this.end)}get fullText(){return this._text}constructor(e){super();this._text="";this._text=e!==null&&e!==void 0?e:""}}var tc=Symbol("Datatype");function rc(e){return e.$type===tc}const nc="​";const ac=e=>e.endsWith(nc)?e:e+nc;class AbstractLangiumParser{constructor(e){this._unorderedGroups=new Map;this.allRules=new Map;this.lexer=e.parser.Lexer;const t=this.lexer.definition;const r=e.LanguageMetaData.mode==="production";this.wrapper=new ChevrotainWrapper(t,Object.assign(Object.assign({},e.parser.ParserConfig),{skipValidations:r,errorMessageProvider:e.parser.ParserErrorMessageProvider}))}alternatives(e,t){this.wrapper.wrapOr(e,t)}optional(e,t){this.wrapper.wrapOption(e,t)}many(e,t){this.wrapper.wrapMany(e,t)}atLeastOne(e,t){this.wrapper.wrapAtLeastOne(e,t)}getRule(e){return this.allRules.get(e)}isRecording(){return this.wrapper.IS_RECORDING}get unorderedGroups(){return this._unorderedGroups}getRuleStack(){return this.wrapper.RULE_STACK}finalize(){this.wrapper.wrapSelfAnalysis()}}class LangiumParser extends AbstractLangiumParser{get current(){return this.stack[this.stack.length-1]}constructor(e){super(e);this.nodeBuilder=new CstNodeBuilder;this.stack=[];this.assignmentMap=new Map;this.linker=e.references.Linker;this.converter=e.parser.ValueConverter;this.astReflection=e.shared.AstReflection}rule(e,t){const r=this.computeRuleType(e);const n=this.wrapper.DEFINE_RULE(ac(e.name),this.startImplementation(r,t).bind(this));this.allRules.set(e.name,n);e.entry&&(this.mainRule=n);return n}computeRuleType(t){if(t.fragment){return e}else if(Sr(t)){return tc}else{let e=Nr(t);return e!==null&&e!==void 0?e:t.name}}parse(t,r={}){this.nodeBuilder.buildRootNode(t);const n=this.lexerResult=this.lexer.tokenize(t);this.wrapper.input=n.tokens;const a=r.rule?this.allRules.get(r.rule):this.mainRule;if(!a){throw new Error(r.rule?`No rule found with name '${r.rule}'`:"No main rule available.")}const o=a.call(this.wrapper,{});this.nodeBuilder.addHiddenNodes(n.hidden);this.unorderedGroups.clear();this.lexerResult=e;return{value:o,lexerErrors:n.errors,lexerReport:n.report,parserErrors:this.wrapper.errors}}startImplementation(t,r){return n=>{const a=!this.isRecording()&&t!==e;if(a){let e={$type:t};this.stack.push(e);t===tc&&(e.value="")}let o;try{o=r(n)}catch(t){o=e}o===e&&a&&(o=this.construct());return o}}extractHiddenTokens(e){const t=this.lexerResult.hidden;if(!t.length){return[]}const r=e.startOffset;for(let e=0;e<t.length;e++){let n=t[e];if(n.startOffset>r){return t.splice(0,e)}}return t.splice(0,t.length)}consume(e,t,r){const n=this.wrapper.wrapConsume(e,t);if(!this.isRecording()&&this.isValidToken(n)){let e=this.extractHiddenTokens(n);this.nodeBuilder.addHiddenNodes(e);let t=this.nodeBuilder.buildLeafNode(n,r),{assignment:a,isCrossRef:o}=this.getAssignment(r),i=this.current;if(a){let e=_t(r)?n.image:this.converter.convert(n.image,t);this.assign(a.operator,a.feature,e,t,o)}else if(rc(i)){let e=n.image;_t(r)||(e=this.converter.convert(e,t).toString());i.value+=e}}}isValidToken(e){return!e.isInsertedInRecovery&&!isNaN(e.startOffset)&&typeof e.endOffset==="number"&&!isNaN(e.endOffset)}subrule(e,t,r,n,a){let o;!this.isRecording()&&!r&&(o=this.nodeBuilder.buildCompositeNode(n));const i=this.wrapper.wrapSubrule(e,t,a);!this.isRecording()&&o&&o.length>0&&this.performSubruleAssignment(i,n,o)}performSubruleAssignment(e,t,r){const{assignment:n,isCrossRef:a}=this.getAssignment(t);if(n){this.assign(n.operator,n.feature,e,r,a)}else if(!n){let t=this.current;if(rc(t)){t.value+=e.toString()}else if(typeof e==="object"&&e){let r=this.assignWithoutOverride(e,t),n=r;this.stack.pop();this.stack.push(n)}}}action(e,t){if(!this.isRecording()){let r=this.current;if(t.feature&&t.operator){r=this.construct();this.nodeBuilder.removeNode(r.$cstNode);let n=this.nodeBuilder.buildCompositeNode(t);n.content.push(r.$cstNode);let a={$type:e};this.stack.push(a);this.assign(t.operator,t.feature,r,r.$cstNode,!1)}else{r.$type=e}}}construct(){if(this.isRecording()){return e}const t=this.current;$t(t);this.nodeBuilder.construct(t);this.stack.pop();if(rc(t)){return this.converter.convert(t.value,t.$cstNode)}else{jt(this.astReflection,t)}return t}getAssignment(e){if(!this.assignmentMap.has(e)){let t=Dt(e,it);this.assignmentMap.set(e,{assignment:t,isCrossRef:t?ut(t.terminal):!1})}return this.assignmentMap.get(e)}assign(e,t,r,n,a){const o=this.current;let i;if(a&&typeof r==="string"){i=this.linker.buildReference(o,t,n,r)}else{i=r}switch(e){case"=":o[t]=i;break;case"?=":o[t]=!0;break;case"+=":Array.isArray(o[t])||(o[t]=[]);o[t].push(i)}}assignWithoutOverride(t,r){for(const[n,a]of Object.entries(r)){let r=t[n];if(r===e){t[n]=a}else if(Array.isArray(r)&&Array.isArray(a)){a.push(...r);t[n]=a}}const n=t.$cstNode;if(n){n.astNode=e;t.$cstNode=e}return t}get definitionErrors(){return this.wrapper.definitionErrors}}class AbstractParserErrorMessageProvider{buildMismatchTokenMessage(e){return Ua.buildMismatchTokenMessage(e)}buildNotAllInputParsedMessage(e){return Ua.buildNotAllInputParsedMessage(e)}buildNoViableAltMessage(e){return Ua.buildNoViableAltMessage(e)}buildEarlyExitMessage(e){return Ua.buildEarlyExitMessage(e)}}class LangiumParserErrorMessageProvider extends AbstractParserErrorMessageProvider{buildMismatchTokenMessage({expected:e,actual:t}){const r=e.LABEL?"`"+e.LABEL+"`":e.name.endsWith(":KW")?`keyword '${e.name.substring(0,e.name.length-3)}'`:`token of type '${e.name}'`;return`Expecting ${r} but found \`${t.image}\`.`}buildNotAllInputParsedMessage({firstRedundant:e}){return`Expecting end of file but found \`${e.image}\`.`}}class LangiumCompletionParser extends AbstractLangiumParser{constructor(){super(...arguments);this.tokens=[];this.elementStack=[];this.lastElementStack=[];this.nextTokenIndex=0;this.stackSize=0}action(){}construct(){return e}parse(e){this.resetState();const t=this.lexer.tokenize(e,{mode:"partial"});this.tokens=t.tokens;this.wrapper.input=[...this.tokens];this.mainRule.call(this.wrapper,{});this.unorderedGroups.clear();return{tokens:this.tokens,elementStack:[...this.lastElementStack],tokenIndex:this.nextTokenIndex}}rule(e,t){const r=this.wrapper.DEFINE_RULE(ac(e.name),this.startImplementation(t).bind(this));this.allRules.set(e.name,r);e.entry&&(this.mainRule=r);return r}resetState(){this.elementStack=[];this.lastElementStack=[];this.nextTokenIndex=0;this.stackSize=0}startImplementation(e){return t=>{const r=this.keepStackSize();try{e(t)}finally{this.resetStackSize(r)}}}removeUnexpectedElements(){this.elementStack.splice(this.stackSize)}keepStackSize(){const e=this.elementStack.length;this.stackSize=e;return e}resetStackSize(e){this.removeUnexpectedElements();this.stackSize=e}consume(e,t,r){this.wrapper.wrapConsume(e,t);if(!this.isRecording()){this.lastElementStack=[...this.elementStack,r];this.nextTokenIndex=this.currIdx+1}}subrule(e,t,r,n,a){this.before(n);this.wrapper.wrapSubrule(e,t,a);this.after(n)}before(e){this.isRecording()||this.elementStack.push(e)}after(e){if(!this.isRecording()){let t=this.elementStack.lastIndexOf(e);t>=0&&this.elementStack.splice(t)}}get currIdx(){return this.wrapper.currIdx}}const oc={recoveryEnabled:!0,nodeLocationTracking:"full",skipValidations:!0,errorMessageProvider:new LangiumParserErrorMessageProvider};class ChevrotainWrapper extends EmbeddedActionsParser{constructor(t,r){const n=r&&"maxLookahead"in r;super(t,Object.assign(Object.assign(Object.assign({},oc),{lookaheadStrategy:n?new LLkLookaheadStrategy({maxLookahead:r.maxLookahead}):new LLStarLookaheadStrategy({logging:r.skipValidations?()=>{}:e})}),r))}get IS_RECORDING(){return this.RECORDING_PHASE}DEFINE_RULE(e,t){return this.RULE(e,t)}wrapSelfAnalysis(){this.performSelfAnalysis()}wrapConsume(e,t){return this.consume(e,t)}wrapSubrule(e,t,r){return this.subrule(e,t,{ARGS:[r]})}wrapOr(e,t){this.or(e,t)}wrapOption(e,t){this.option(e,t)}wrapMany(e,t){this.many(e,t)}wrapAtLeastOne(e,t){this.atLeastOne(e,t)}}function ic(e,t,r){const n={parser:t,tokens:r,ruleNames:new Map};sc(n,e);return t}function sc(e,t){const r=_r(t,!1);const n=ee(t.rules).filter(Ve).filter(e=>r.has(e));for(const t of n){let r=Object.assign(Object.assign({},e),{consume:1,optional:1,subrule:1,many:1,or:1});e.parser.rule(t,lc(r,t.definition))}}function lc(t,r,n=!1){let a;if(_t(r)){a=yc(t,r)}else if(rt(r)){a=cc(t,r)}else if(it(r)){a=lc(t,r.terminal)}else if(ut(r)){a=gc(t,r)}else if(vt(r)){a=uc(t,r)}else if(at(r)){a=mc(t,r)}else if(Nt(r)){a=fc(t,r)}else if(ft(r)){a=hc(t,r)}else if(pt(r)){let e=t.consume++;a=(()=>t.parser.consume(e,Fa,r))}else{throw new ErrorWithLocation(r.$cstNode,`Unexpected element type: ${r.$type}`)}return xc(t,n?e:_c(r),a,r.cardinality)}function cc(e,t){const r=br(t);return()=>e.parser.action(r,t)}function uc(e,t){const r=t.rule.ref;if(Ve(r)){let n=e.subrule++,a=r.fragment,o=t.arguments.length>0?dc(r,t.arguments):()=>({});return i=>e.parser.subrule(n,Tc(e,r),a,t,o(i))}else if(qe(r)){let n=e.consume++,a=vc(e,r.name);return()=>e.parser.consume(n,a,t)}else if(!r){throw new ErrorWithLocation(t.$cstNode,`Undefined rule: ${t.rule.$refText}`)}else{de(r)}}function dc(e,t){const r=t.map(e=>pc(e.value));return t=>{const n={};for(let a=0;a<r.length;a++){let o=e.parameters[a],i=r[a];n[o.name]=i(t)}return n}}function pc(t){if(Ee(t)){let e=pc(t.left),r=pc(t.right);return t=>e(t)||r(t)}else if(Ce(t)){let e=pc(t.left),r=pc(t.right);return t=>e(t)&&r(t)}else if(De(t)){let e=pc(t.value);return t=>!e(t)}else if(Ke(t)){let r=t.parameter.ref.name;return t=>t!==e&&t[r]===!0}else if(Re(t)){let e=Boolean(t.true);return()=>e}de(t)}function mc(e,t){if(t.elements.length===1){return lc(e,t.elements[0])}else{let r=[];for(const n of t.elements){let t={ALT:lc(e,n,!0)},a=_c(n);a&&(t.GATE=pc(a));r.push(t)}let n=e.or++;return t=>e.parser.alternatives(n,r.map(e=>{const r={ALT:()=>e.ALT(t)};const n=e.GATE;n&&(r.GATE=(()=>n(t)));return r}))}}function fc(e,t){if(t.elements.length===1){return lc(e,t.elements[0])}const r=[];for(const n of t.elements){let t={ALT:lc(e,n,!0)},a=_c(n);a&&(t.GATE=pc(a));r.push(t)}const n=e.or++;const a=(e,t)=>{const r=t.getRuleStack().join("-");return`uGroup_${e}_${r}`};const o=t=>e.parser.alternatives(n,r.map((r,o)=>{const i={ALT:()=>!0};const s=e.parser;i.ALT=(()=>{r.ALT(t);if(!s.isRecording()){let e=a(n,s);s.unorderedGroups.get(e)||s.unorderedGroups.set(e,[]);let t=s.unorderedGroups.get(e);typeof(t===null||t===void 0?void 0:t[o])==="undefined"&&(t[o]=!0)}});const l=r.GATE;if(l){i.GATE=(()=>l(t))}else{i.GATE=(()=>{const e=s.unorderedGroups.get(a(n,s));const t=!(e===null||e===void 0?void 0:e[o]);return t})}return i}));const i=xc(e,_c(t),o,"*");return t=>{i(t);e.parser.isRecording()||e.parser.unorderedGroups.delete(a(n,e.parser))}}function hc(e,t){const r=t.elements.map(t=>lc(e,t));return e=>r.forEach(t=>t(e))}function _c(t){if(ft(t)){return t.guardCondition}return e}function gc(e,t,r=t.terminal){if(!r){if(!t.type.ref){throw new Error("Could not resolve reference to type: "+t.type.$refText)}let r=Ir(t.type.ref),n=r===null||r===void 0?void 0:r.terminal;if(!n){throw new Error("Could not find name assignment for type: "+br(t.type.ref))}return gc(e,t,n)}else if(vt(r)&&Ve(r.rule.ref)){let n=r.rule.ref,a=e.subrule++;return r=>e.parser.subrule(a,Tc(e,n),!1,t,r)}else if(vt(r)&&qe(r.rule.ref)){let n=e.consume++,a=vc(e,r.rule.ref.name);return()=>e.parser.consume(n,a,t)}else if(_t(r)){let n=e.consume++,a=vc(e,r.value);return()=>e.parser.consume(n,a,t)}else{throw new Error("Could not build cross reference parser")}}function yc(e,t){const r=e.consume++;const n=e.tokens[t.value];if(!n){throw new Error("Could not find token for keyword: "+t.value)}return()=>e.parser.consume(r,n,t)}function xc(t,r,n,a){const o=r&&pc(r);if(!a){if(o){let e=t.or++;return r=>t.parser.alternatives(e,[{ALT:()=>n(r),GATE:()=>o(r)},{ALT:Ti(),GATE:()=>!o(r)}])}else{return n}}if(a==="*"){let r=t.many++;return a=>t.parser.many(r,{DEF:()=>n(a),GATE:o?()=>o(a):e})}else if(a==="+"){let e=t.many++;if(o){let r=t.or++;return a=>t.parser.alternatives(r,[{ALT:()=>t.parser.atLeastOne(e,{DEF:()=>n(a)}),GATE:()=>o(a)},{ALT:Ti(),GATE:()=>!o(a)}])}else{return r=>t.parser.atLeastOne(e,{DEF:()=>n(r)})}}else if(a==="?"){let r=t.optional++;return a=>t.parser.optional(r,{DEF:()=>n(a),GATE:o?()=>o(a):e})}else{de(a)}}function Tc(e,t){const r=kc(e,t);const n=e.parser.getRule(r);if(!n)throw new Error(`Rule "${r}" not found."`);return n}function kc(e,t){if(Ve(t)){return t.name}else if(e.ruleNames.has(t)){return e.ruleNames.get(t)}else{let r=t,n=r.$container,a=t.$type;while(!Ve(n)){if(ft(n)||at(n)||Nt(n)){let e=n.elements.indexOf(r);a=e.toString()+":"+a}r=n;n=n.$container}let o=n;a=o.name+":"+a;e.ruleNames.set(t,a);return a}}function vc(e,t){const r=e.tokens[t];if(!r)throw new Error(`Token "${t}" not found."`);return r}function Rc(e){const t=e.Grammar;const r=e.parser.Lexer;const n=new LangiumCompletionParser(e);ic(t,n,r.definition);n.finalize();return n}function Ac(e){const t=Cc(e);t.finalize();return t}function Cc(e){const t=e.Grammar;const r=e.parser.Lexer;const n=new LangiumParser(e);return ic(t,n,r.definition)}class DefaultTokenBuilder{constructor(){this.diagnostics=[]}buildTokens(e,t){const r=ee(_r(e,!1));const n=this.buildTerminalTokens(r);const a=this.buildKeywordTokens(r,n,t);n.forEach(e=>{const t=e.PATTERN;if(typeof t==="object"&&t&&"test"in t&&cr(t)){a.unshift(e)}else{a.push(e)}});return a}flushLexingReport(e){return{diagnostics:this.popDiagnostics()}}popDiagnostics(){const e=[...this.diagnostics];this.diagnostics=[];return e}buildTerminalTokens(e){return e.filter(qe).filter(e=>!e.fragment).map(e=>this.buildTerminalToken(e)).toArray()}buildTerminalToken(e){const t=wr(e);const r=this.requiresCustomPattern(t)?this.regexPatternFunction(t):t;const n={name:e.name,PATTERN:r};typeof r==="function"&&(n.LINE_BREAKS=!0);e.hidden&&(n.GROUP=cr(t)?Lexer.SKIPPED:"hidden");return n}requiresCustomPattern(e){if(e.flags.includes("u")||e.flags.includes("s")){return!0}else if(e.source.includes("?<=")||e.source.includes("?<!")){return!0}else{return!1}}regexPatternFunction(e){const t=new RegExp(e,e.flags+"y");return(e,r)=>{t.lastIndex=r;const n=t.exec(e);return n}}buildKeywordTokens(e,t,r){return e.filter(Ve).flatMap(e=>Kt(e).filter(_t)).distinct(e=>e.value).toArray().sort((e,t)=>t.value.length-e.value.length).map(e=>this.buildKeywordToken(e,t,Boolean(r===null||r===void 0?void 0:r.caseInsensitive)))}buildKeywordToken(e,t,r){const n=this.buildKeywordPattern(e,r);const a={name:e.value,PATTERN:n,LONGER_ALT:this.findLongerAlt(e,t)};typeof n==="function"&&(a.LINE_BREAKS=!0);return a}buildKeywordPattern(e,t){return t?new RegExp(dr(e.value)):e.value}findLongerAlt(e,t){return t.reduce((t,r)=>{const n=r===null||r===void 0?void 0:r.PATTERN;(n===null||n===void 0?void 0:n.source)&&pr("^"+n.source+"$",e.value)&&t.push(r);return t},[])}}var Ic={};class DefaultValueConverter{convert(e,t){let r=t.grammarSource;ut(r)&&(r=yr(r));if(vt(r)){let n=r.rule.ref;if(!n){throw new Error("This cst node was not parsed by a rule.")}return this.runConverter(n,e,t)}return e}runConverter(e,t,r){var n;switch(e.name.toUpperCase()){case"INT":return Ic.convertInt(t);case"STRING":return Ic.convertString(t);case"ID":return Ic.convertID(t)}switch((n=Lr(e))===null||n===void 0?void 0:n.toLowerCase()){case"number":return Ic.convertNumber(t);case"boolean":return Ic.convertBoolean(t);case"bigint":return Ic.convertBigint(t);case"date":return Ic.convertDate(t);default:return t}}}(function(e){function t(e){let t="";for(let n=1;n<e.length-1;n++){let a=e.charAt(n);if(a==="\\"){let a=e.charAt(++n);t+=r(a)}else{t+=a}}return t}e.convertString=t;function r(e){switch(e){case"b":return"\b";case"f":return"\f";case"n":return"\n";case"r":return"\r";case"t":return"\t";case"v":return"\v";case"0":return"\0";default:return e}}function n(e){if(e.charAt(0)==="^"){return e.substring(1)}else{return e}}e.convertID=n;function a(e){return parseInt(e)}e.convertInt=a;function o(e){return BigInt(e)}e.convertBigint=o;function i(e){return new Date(e)}e.convertDate=i;function s(e){return Number(e)}e.convertNumber=s;function l(e){return e.toLowerCase()==="true"}e.convertBoolean=l})(Ic);let Ec;function Sc(){if(Ec===e){throw new Error(`No runtime abstraction layer installed`)}return Ec}(function(t){function r(t){if(t===e){throw new Error(`No runtime abstraction layer provided`)}Ec=t}t.install=r})(Sc={});var Pc=Sc;function Nc(e){return e===!0||e===!1}var bc;var Oc;(function(e){const t={dispose(){}};e.None=function(){return t}})(Oc||(bc=Oc={}));class CallbackList{add(e,t=null,r){if(!this._callbacks){this._callbacks=[];this._contexts=[]}this._callbacks.push(e);this._contexts.push(t);Array.isArray(r)&&r.push({dispose:()=>this.remove(e,t)})}remove(e,t=null){if(!this._callbacks){return}let r=!1;for(let n=0,a=this._callbacks.length;n<a;n++){if(this._callbacks[n]===e){if(this._contexts[n]===t){this._callbacks.splice(n,1);this._contexts.splice(n,1);return}else{r=!0}}}if(r){throw new Error("When adding a listener with a context, you should remove it with the same context")}}invoke(...e){if(!this._callbacks){return[]}const t=[],r=this._callbacks.slice(0),n=this._contexts.slice(0);for(let a=0,o=r.length;a<o;a++){try{t.push(r[a].apply(n[a],e))}catch(e){Pc().console.error(e)}}return t}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=e;this._contexts=e}}class Emitter{constructor(e){this._options=e}get event(){this._event||(this._event=((e,t,r)=>{this._callbacks||(this._callbacks=new CallbackList);this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this);this._callbacks.add(e,t);const n={dispose:()=>{if(!this._callbacks){return}this._callbacks.remove(e,t);n.dispose=Emitter._noop;this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this)}};Array.isArray(r)&&r.push(n);return n}));return this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){if(this._callbacks){this._callbacks.dispose();this._callbacks=e}}}Emitter._noop=function(){};var Lc;var wc;(function(e){e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:bc.None});e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:bc.None});function t(t){return t&&(t===e.None||t===e.Cancelled||Nc(t.isCancellationRequested)&&!!t.onCancellationRequested)}e.is=t})(wc||(Lc=wc={}));const $c=Object.freeze(function(e,t){const r=Pc().timer.setTimeout(e.bind(t),0);return{dispose(){r.dispose()}}});class MutableToken{constructor(){this._isCancelled=!1}cancel(){if(!this._isCancelled){this._isCancelled=!0;if(this._emitter){this._emitter.fire(e);this.dispose()}}}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){if(this._isCancelled){return $c}this._emitter||(this._emitter=new Emitter);return this._emitter.event}dispose(){if(this._emitter){this._emitter.dispose();this._emitter=e}}}class CancellationTokenSource{get token(){this._token||(this._token=new MutableToken);return this._token}cancel(){if(!this._token){this._token=wc.Cancelled}else{this._token.cancel()}}dispose(){if(!this._token){this._token=wc.None}else this._token instanceof MutableToken&&this._token.dispose()}}function Dc(){return new Promise(e=>{if(typeof setImmediate==="undefined"){setTimeout(e,0)}else{setImmediate(e)}})}let Mc=0;let Fc=10;function Gc(){Mc=performance.now();return new CancellationTokenSource}var Kc=Symbol("OperationCancelled");function Uc(e){return e===Kc}async function Vc(e){if(e===Lc.None){return}const t=performance.now();if(t-Mc>=Fc){Mc=t;await Dc();Mc=performance.now()}if(e.isCancellationRequested){throw Kc}}class Deferred{constructor(){this.promise=new Promise((e,t)=>{this.resolve=(t=>{e(t);return this});this.reject=(e=>{t(e);return this})})}}var Bc={};class FullTextDocument_main{constructor(t,r,n,a){this._uri=t;this._languageId=r;this._version=n;this._content=a;this._lineOffsets=e}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(e){if(e){let t=this.offsetAt(e.start),r=this.offsetAt(e.end);return this._content.substring(t,r)}return this._content}update(t,r){for(const r of t){if(FullTextDocument_main.isIncremental(r)){let e=Hc(r.range),t=this.offsetAt(e.start),n=this.offsetAt(e.end);this._content=this._content.substring(0,t)+r.text+this._content.substring(n,this._content.length);let a=Math.max(e.start.line,0),o=Math.max(e.end.line,0),i=this._lineOffsets,s=Wc(r.text,!1,t);if(o-a===s.length){for(let e=0,t=s.length;e<t;e++){i[e+a+1]=s[e]}}else{if(s.length<1e4){i.splice(a+1,o-a,...s)}else{this._lineOffsets=i=i.slice(0,a+1).concat(s,i.slice(o+1))}}let l=r.text.length-(n-t);if(l!==0){for(let e=a+1+s.length,t=i.length;e<t;e++){i[e]=i[e]+l}}}else if(FullTextDocument_main.isFull(r)){this._content=r.text;this._lineOffsets=e}else{throw new Error("Unknown change event received")}}this._version=r}getLineOffsets(){this._lineOffsets===e&&(this._lineOffsets=Wc(this._content,!0));return this._lineOffsets}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);const t=this.getLineOffsets();let r=0,n=t.length;if(n===0){return{line:0,character:e}}while(r<n){let a=Math.floor((r+n)/2);if(t[a]>e){n=a}else{r=a+1}}const a=r-1;e=this.ensureBeforeEOL(e,t[a]);return{line:a,character:e-t[a]}}offsetAt(e){const t=this.getLineOffsets();if(e.line>=t.length){return this._content.length}else if(e.line<0){return 0}const r=t[e.line];if(e.character<=0){return r}const n=e.line+1<t.length?t[e.line+1]:this._content.length;const a=Math.min(r+e.character,n);return this.ensureBeforeEOL(a,r)}ensureBeforeEOL(e,t){
while(e>t&&zc(this._content.charCodeAt(e-1))){e--}return e}get lineCount(){return this.getLineOffsets().length}static isIncremental(t){return t!==e&&t!==null&&typeof t.text==="string"&&t.range!==e&&(t.rangeLength===e||typeof t.rangeLength==="number")}static isFull(t){return t!==e&&t!==null&&typeof t.text==="string"&&t.range===e&&t.rangeLength===e}}(function(e){function t(e,t,r,n){return new FullTextDocument_main(e,t,r,n)}e.create=t;function r(e,t,r){if(e instanceof FullTextDocument_main){e.update(t,r);return e}else{throw new Error("TextDocument.update: document must be created by TextDocument.create")}}e.update=r;function n(e,t){const r=e.getText();const n=jc(t.map(Xc),(e,t)=>{const r=e.range.start.line-t.range.start.line;if(r===0){return e.range.start.character-t.range.start.character}return r});let a=0;const o=[];for(const t of n){let n=e.offsetAt(t.range.start);if(n<a){throw new Error("Overlapping edit")}else n>a&&o.push(r.substring(a,n));t.newText.length&&o.push(t.newText);a=e.offsetAt(t.range.end)}o.push(r.substr(a));return o.join("")}e.applyEdits=n})(Bc);function jc(e,t){if(e.length<=1){return e}const r=e.length/2|0;const n=e.slice(0,r);const a=e.slice(r);jc(n,t);jc(a,t);let o=0;let i=0;let s=0;while(o<n.length&&i<a.length){let r=t(n[o],a[i]);if(r<=0){e[s++]=n[o++]}else{e[s++]=a[i++]}}while(o<n.length){e[s++]=n[o++]}while(i<a.length){e[s++]=a[i++]}return e}function Wc(e,t,r=0){const n=t?[r]:[];for(let t=0;t<e.length;t++){let a=e.charCodeAt(t);if(zc(a)){a===13&&t+1<e.length&&e.charCodeAt(t+1)===10&&t++;n.push(r+t+1)}}return n}function zc(e){return e===13||e===10}function Hc(e){const t=e.start;const r=e.end;if(t.line>r.line||t.line===r.line&&t.character>r.character){return{start:r,end:t}}return e}function Xc(e){const t=Hc(e.range);if(t!==e.range){return{newText:e.newText,range:t}}return e}var Jc=function(){var e={};var r={exports:e};!function(t,n){if("object"==typeof e&&"object"==typeof r)r.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var a=n();for(var o in a)("object"==typeof e?e:t)[o]=a[o]}}(this,()=>(()=>{var e={470:e=>{function t(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function r(e,t){for(var r,n="",a=0,o=-1,i=0,s=0;s<=e.length;++s){if(s<e.length)r=e.charCodeAt(s);else{if(47===r)break;r=47}if(47===r){if(o===s-1||1===i);else if(o!==s-1&&2===i){if(n.length<2||2!==a||46!==n.charCodeAt(n.length-1)||46!==n.charCodeAt(n.length-2))if(n.length>2){var l=n.lastIndexOf("/");if(l!==n.length-1){-1===l?(n="",a=0):a=(n=n.slice(0,l)).length-1-n.lastIndexOf("/"),o=s,i=0;continue}}else if(2===n.length||1===n.length){n="",a=0,o=s,i=0;continue}t&&(n.length>0?n+="/..":n="..",a=2)}else n.length>0?n+="/"+e.slice(o+1,s):n=e.slice(o+1,s),a=s-o-1;o=s,i=0}else 46===r&&-1!==i?++i:i=-1}return n}var n={resolve:function(){for(var e,n="",a=!1,o=arguments.length-1;o>=-1&&!a;o--){var i;o>=0?i=arguments[o]:(void 0===e&&(e=process.cwd()),i=e),t(i),0!==i.length&&(n=i+"/"+n,a=47===i.charCodeAt(0))}return n=r(n,!a),a?n.length>0?"/"+n:"/":n.length>0?n:"."},normalize:function(e){if(t(e),0===e.length)return".";var n=47===e.charCodeAt(0),a=47===e.charCodeAt(e.length-1);return 0!==(e=r(e,!n)).length||n||(e="."),e.length>0&&a&&(e+="/"),n?"/"+e:e},isAbsolute:function(e){return t(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var e,r=0;r<arguments.length;++r){var a=arguments[r];t(a),a.length>0&&(void 0===e?e=a:e+="/"+a)}return void 0===e?".":n.normalize(e)},relative:function(e,r){if(t(e),t(r),e===r)return"";if((e=n.resolve(e))===(r=n.resolve(r)))return"";for(var a=1;a<e.length&&47===e.charCodeAt(a);++a);for(var o=e.length,i=o-a,s=1;s<r.length&&47===r.charCodeAt(s);++s);for(var l=r.length-s,c=i<l?i:l,u=-1,d=0;d<=c;++d){if(d===c){if(l>c){if(47===r.charCodeAt(s+d))return r.slice(s+d+1);if(0===d)return r.slice(s+d)}else i>c&&(47===e.charCodeAt(a+d)?u=d:0===d&&(u=0));break}var p=e.charCodeAt(a+d);if(p!==r.charCodeAt(s+d))break;47===p&&(u=d)}var m="";for(d=a+u+1;d<=o;++d)d!==o&&47!==e.charCodeAt(d)||(0===m.length?m+="..":m+="/..");return m.length>0?m+r.slice(s+u):(s+=u,47===r.charCodeAt(s)&&++s,r.slice(s))},_makeLong:function(e){return e},dirname:function(e){if(t(e),0===e.length)return".";for(var r=e.charCodeAt(0),n=47===r,a=-1,o=!0,i=e.length-1;i>=1;--i)if(47===(r=e.charCodeAt(i))){if(!o){a=i;break}}else o=!1;return-1===a?n?"/":".":n&&1===a?"//":e.slice(0,a)},basename:function(e,r){if(void 0!==r&&"string"!=typeof r)throw new TypeError('"ext" argument must be a string');t(e);var n,a=0,o=-1,i=!0;if(void 0!==r&&r.length>0&&r.length<=e.length){if(r.length===e.length&&r===e)return"";var s=r.length-1,l=-1;for(n=e.length-1;n>=0;--n){var c=e.charCodeAt(n);if(47===c){if(!i){a=n+1;break}}else-1===l&&(i=!1,l=n+1),s>=0&&(c===r.charCodeAt(s)?-1==--s&&(o=n):(s=-1,o=l))}return a===o?o=l:-1===o&&(o=e.length),e.slice(a,o)}for(n=e.length-1;n>=0;--n)if(47===e.charCodeAt(n)){if(!i){a=n+1;break}}else-1===o&&(i=!1,o=n+1);return-1===o?"":e.slice(a,o)},extname:function(e){t(e);for(var r=-1,n=0,a=-1,o=!0,i=0,s=e.length-1;s>=0;--s){var l=e.charCodeAt(s);if(47!==l)-1===a&&(o=!1,a=s+1),46===l?-1===r?r=s:1!==i&&(i=1):-1!==r&&(i=-1);else if(!o){n=s+1;break}}return-1===r||-1===a||0===i||1===i&&r===a-1&&r===n+1?"":e.slice(r,a)},format:function(e){if(null===e||"object"!=typeof e)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return function(e,t){var r=t.dir||t.root,n=t.base||(t.name||"")+(t.ext||"");return r?r===t.root?r+n:r+"/"+n:n}(0,e)},parse:function(e){t(e);var r={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return r;var n,a=e.charCodeAt(0),o=47===a;o?(r.root="/",n=1):n=0;for(var i=-1,s=0,l=-1,c=!0,u=e.length-1,d=0;u>=n;--u)if(47!==(a=e.charCodeAt(u)))-1===l&&(c=!1,l=u+1),46===a?-1===i?i=u:1!==d&&(d=1):-1!==i&&(d=-1);else if(!c){s=u+1;break}return-1===i||-1===l||0===d||1===d&&i===l-1&&i===s+1?-1!==l&&(r.base=r.name=0===s&&o?e.slice(1,l):e.slice(s,l)):(0===s&&o?(r.name=e.slice(1,i),r.base=e.slice(1,l)):(r.name=e.slice(s,i),r.base=e.slice(s,l)),r.ext=e.slice(i,l)),s>0?r.dir=e.slice(0,s-1):o&&(r.dir="/"),r},sep:"/",delimiter:":",win32:null,posix:null};n.posix=n,e.exports=n},674:(e,t)=>{if(Object.defineProperty(t,"__esModule",{value:!0}),t.isWindows=void 0,"object"==typeof process)t.isWindows="win32"===process.platform;else if("object"==typeof navigator){let e=navigator.userAgent;t.isWindows=e.indexOf("Windows")>=0}},796:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.uriToFsPath=t.URI=void 0;const n=r(674),a=/^\w[\w\d+.-]*$/,o=/^\//,i=/^\/\//;function s(e,t){if(!e.scheme&&t)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${e.authority}", path: "${e.path}", query: "${e.query}", fragment: "${e.fragment}"}`);if(e.scheme&&!a.test(e.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(e.path)if(e.authority){if(!o.test(e.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(i.test(e.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}const l="",c="/",p=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class u{static isUri(e){return e instanceof u||!!e&&"string"==typeof e.authority&&"string"==typeof e.fragment&&"string"==typeof e.path&&"string"==typeof e.query&&"string"==typeof e.scheme&&"string"==typeof e.fsPath&&"function"==typeof e.with&&"function"==typeof e.toString}constructor(e,t,r,n,a,o=!1){"object"==typeof e?(this.scheme=e.scheme||l,this.authority=e.authority||l,this.path=e.path||l,this.query=e.query||l,this.fragment=e.fragment||l):(this.scheme=function(e,t){return e||t?e:"file"}(e,o),this.authority=t||l,this.path=function(e,t){switch(e){case"https":case"http":case"file":t?t[0]!==c&&(t=c+t):t=c}return t}(this.scheme,r||l),this.query=n||l,this.fragment=a||l,s(this,o))}get fsPath(){return g(this,!1)}with(e){if(!e)return this;let{scheme:t,authority:r,path:n,query:a,fragment:o}=e;return void 0===t?t=this.scheme:null===t&&(t=l),void 0===r?r=this.authority:null===r&&(r=l),void 0===n?n=this.path:null===n&&(n=l),void 0===a?a=this.query:null===a&&(a=l),void 0===o?o=this.fragment:null===o&&(o=l),t===this.scheme&&r===this.authority&&n===this.path&&a===this.query&&o===this.fragment?this:new d(t,r,n,a,o)}static parse(e,t=!1){const r=p.exec(e);return r?new d(r[2]||l,k(r[4]||l),k(r[5]||l),k(r[7]||l),k(r[9]||l),t):new d(l,l,l,l,l)}static file(e){let t=l;if(n.isWindows&&(e=e.replace(/\\/g,c)),e[0]===c&&e[1]===c){let r=e.indexOf(c,2);-1===r?(t=e.substring(2),e=c):(t=e.substring(2,r),e=e.substring(r)||c)}return new d("file",t,e,l,l)}static from(e){const t=new d(e.scheme,e.authority,e.path,e.query,e.fragment);return s(t,!0),t}toString(e=!1){return y(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof u)return e;let t=new d(e);return t._formatted=e.external,t._fsPath=e._sep===m?e.fsPath:null,t}return e}}t.URI=u;const m=n.isWindows?1:void 0;class d extends u{constructor(){super(...arguments);this._formatted=null;this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=g(this,!1)),this._fsPath}toString(e=!1){return e?y(this,!0):(this._formatted||(this._formatted=y(this,!1)),this._formatted)}toJSON(){const e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=m),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}}const f={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function h(e,t,r){let n,a=-1;for(let o=0;o<e.length;o++){let i=e.charCodeAt(o);if(i>=97&&i<=122||i>=65&&i<=90||i>=48&&i<=57||45===i||46===i||95===i||126===i||t&&47===i||r&&91===i||r&&93===i||r&&58===i)-1!==a&&(n+=encodeURIComponent(e.substring(a,o)),a=-1),void 0!==n&&(n+=e.charAt(o));else{void 0===n&&(n=e.substr(0,o));let t=f[i];void 0!==t?(-1!==a&&(n+=encodeURIComponent(e.substring(a,o)),a=-1),n+=t):-1===a&&(a=o)}}return-1!==a&&(n+=encodeURIComponent(e.substring(a))),void 0!==n?n:e}function _(e){let t;for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);35===n||63===n?(void 0===t&&(t=e.substr(0,r)),t+=f[n]):void 0!==t&&(t+=e[r])}return void 0!==t?t:e}function g(e,t){let r;return r=e.authority&&e.path.length>1&&"file"===e.scheme?`//${e.authority}${e.path}`:47===e.path.charCodeAt(0)&&(e.path.charCodeAt(1)>=65&&e.path.charCodeAt(1)<=90||e.path.charCodeAt(1)>=97&&e.path.charCodeAt(1)<=122)&&58===e.path.charCodeAt(2)?t?e.path.substr(1):e.path[1].toLowerCase()+e.path.substr(2):e.path,n.isWindows&&(r=r.replace(/\//g,"\\")),r}function y(e,t){const r=t?_:h;let n="",{scheme:a,authority:o,path:i,query:s,fragment:l}=e;if(a&&(n+=a,n+=":"),(o||"file"===a)&&(n+=c,n+=c),o){let e=o.indexOf("@");if(-1!==e){let t=o.substr(0,e);o=o.substr(e+1),e=t.lastIndexOf(":"),-1===e?n+=r(t,!1,!1):(n+=r(t.substr(0,e),!1,!1),n+=":",n+=r(t.substr(e+1),!1,!0)),n+="@"}o=o.toLowerCase(),e=o.lastIndexOf(":"),-1===e?n+=r(o,!1,!0):(n+=r(o.substr(0,e),!1,!0),n+=o.substr(e))}if(i){if(i.length>=3&&47===i.charCodeAt(0)&&58===i.charCodeAt(2)){let e=i.charCodeAt(1);e>=65&&e<=90&&(i=`/${String.fromCharCode(e+32)}:${i.substr(3)}`)}else if(i.length>=2&&58===i.charCodeAt(1)){let e=i.charCodeAt(0);e>=65&&e<=90&&(i=`${String.fromCharCode(e+32)}:${i.substr(2)}`)}n+=r(i,!0,!1)}return s&&(n+="?",n+=r(s,!1,!1)),l&&(n+="#",n+=t?l:h(l,!1,!1)),n}function x(e){try{return decodeURIComponent(e)}catch{return e.length>3?e.substr(0,3)+x(e.substr(3)):e}}t.uriToFsPath=g;const T=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function k(e){return e.match(T)?e.replace(T,e=>x(e)):e}},679:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Utils=void 0;const i=o(r(470)),s=i.posix||i,l="/";var c;!function(e){e.joinPath=function(e,...t){return e.with({path:s.join(e.path,...t)})},e.resolvePath=function(e,...t){let r=e.path,n=!1;r[0]!==l&&(r=l+r,n=!0);let a=s.resolve(r,...t);return n&&a[0]===l&&!e.authority&&(a=a.substring(1)),e.with({path:a})},e.dirname=function(e){if(0===e.path.length||e.path===l)return e;let t=s.dirname(e.path);return 1===t.length&&46===t.charCodeAt(0)&&(t=""),e.with({path:t})},e.basename=function(e){return s.basename(e.path)},e.extname=function(e){return s.extname(e.path)}}(c||(t.Utils=c={}))}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,r),o.exports}var n={};return(()=>{Object.defineProperty(n,"__esModule",{value:!0}),n.Utils=n.URI=void 0;const e=r(796);Object.defineProperty(n,"URI",{enumerable:!0,get:function(){return e.URI}});const t=r(679);Object.defineProperty(n,"Utils",{enumerable:!0,get:function(){return t.Utils}})})(),n})());return t(r.exports)}.call(window);var qc={};(function(e){e.basename=Jc.Utils.basename;e.dirname=Jc.Utils.dirname;e.extname=Jc.Utils.extname;e.joinPath=Jc.Utils.joinPath;e.resolvePath=Jc.Utils.resolvePath;function t(e,t){return(e===null||e===void 0?void 0:e.toString())===(t===null||t===void 0?void 0:t.toString())}e.equals=t;function r(e,t){const r=typeof e==="string"?e:e.path;const n=typeof t==="string"?t:t.path;const a=r.split("/").filter(e=>e.length>0);const o=n.split("/").filter(e=>e.length>0);let i=0;for(;i<a.length;i++){if(a[i]!==o[i]){break}}const s="../".repeat(a.length-i);const l=o.slice(i).join("/");return s+l}e.relative=r;function n(e){return Jc.URI.parse(e.toString()).toString()}e.normalize=n})(qc);var Yc={};(function(e){e[e["Changed"]=0]="Changed";e[e["Parsed"]=1]="Parsed";e[e["IndexedContent"]=2]="IndexedContent";e[e["ComputedScopes"]=3]="ComputedScopes";e[e["Linked"]=4]="Linked";e[e["IndexedReferences"]=5]="IndexedReferences";e[e["Validated"]=6]="Validated"})(Yc);class DefaultLangiumDocumentFactory{constructor(e){this.serviceRegistry=e.ServiceRegistry;this.textDocuments=e.workspace.TextDocuments;this.fileSystemProvider=e.workspace.FileSystemProvider}async fromUri(e,t=Lc.None){const r=await this.fileSystemProvider.readFile(e);return this.createAsync(e,r,t)}fromTextDocument(t,r,n){r=r!==null&&r!==void 0?r:e.parse(t.uri);if(Lc.is(n)){return this.createAsync(r,t,n)}else{return this.create(r,t,n)}}fromString(e,t,r){if(Lc.is(r)){return this.createAsync(t,e,r)}else{return this.create(t,e,r)}}fromModel(e,t){return this.create(t,{$model:e})}create(t,r,n){if(typeof r==="string"){let a=this.parse(t,r,n);return this.createLangiumDocument(a,t,e,r)}else if("$model"in r){let e={value:r.$model,parserErrors:[],lexerErrors:[]};return this.createLangiumDocument(e,t)}else{let e=this.parse(t,r.getText(),n);return this.createLangiumDocument(e,t,r)}}async createAsync(t,r,n){if(typeof r==="string"){let a=await this.parseAsync(t,r,n);return this.createLangiumDocument(a,t,e,r)}else{let e=await this.parseAsync(t,r.getText(),n);return this.createLangiumDocument(e,t,r)}}createLangiumDocument(e,t,r,n){let a;if(r){a={parseResult:e,uri:t,state:1,references:[],textDocument:r}}else{let r=this.createTextDocumentGetter(t,n);a={parseResult:e,uri:t,state:1,references:[],get textDocument(){return r()}}}e.value.$document=a;return a}async update(e,t){var r,n;const a=(r=e.parseResult.value.$cstNode)===null||r===void 0?void 0:r.root.fullText;const o=(n=this.textDocuments)===null||n===void 0?void 0:n.get(e.uri.toString());const i=o?o.getText():await this.fileSystemProvider.readFile(e.uri);if(o){Object.defineProperty(e,"textDocument",{value:o})}else{let t=this.createTextDocumentGetter(e.uri,i);Object.defineProperty(e,"textDocument",{get:t})}if(a!==i){e.parseResult=await this.parseAsync(e.uri,i,t);e.parseResult.value.$document=e}e.state=1;return e}parse(e,t,r){const n=this.serviceRegistry.getServices(e);return n.parser.LangiumParser.parse(t,r)}parseAsync(e,t,r){const n=this.serviceRegistry.getServices(e);return n.parser.AsyncParser.parse(t,r)}createTextDocumentGetter(t,r){const n=this.serviceRegistry;let a=e;return()=>a!==null&&a!==void 0?a:a=Bc.create(t.toString(),n.getServices(t).LanguageMetaData.languageId,0,r!==null&&r!==void 0?r:"")}}class DefaultLangiumDocuments{constructor(e){this.documentMap=new Map;this.langiumDocumentFactory=e.workspace.LangiumDocumentFactory;this.serviceRegistry=e.ServiceRegistry}get all(){return ee(this.documentMap.values())}addDocument(e){const t=e.uri.toString();if(this.documentMap.has(t)){throw new Error(`A document with the URI '${t}' is already present.`)}this.documentMap.set(t,e)}getDocument(e){const t=e.toString();return this.documentMap.get(t)}async getOrCreateDocument(e,t){let r=this.getDocument(e);if(r){return r}r=await this.langiumDocumentFactory.fromUri(e,t);this.addDocument(r);return r}createDocument(e,t,r){if(r){return this.langiumDocumentFactory.fromString(t,e,r).then(e=>{this.addDocument(e);return e})}else{let r=this.langiumDocumentFactory.fromString(t,e);this.addDocument(r);return r}}hasDocument(e){return this.documentMap.has(e.toString())}invalidateDocument(t){const r=t.toString();const n=this.documentMap.get(r);if(n){let r=this.serviceRegistry.getServices(t).references.Linker;r.unlink(n);n.state=0;n.precomputedScopes=e;n.diagnostics=e}return n}deleteDocument(e){const t=e.toString();const r=this.documentMap.get(t);if(r){r.state=0;this.documentMap.delete(t)}return r}}const Zc=Symbol("ref_resolving");class DefaultLinker{constructor(e){this.reflection=e.shared.AstReflection;this.langiumDocuments=(()=>e.shared.workspace.LangiumDocuments);this.scopeProvider=e.references.ScopeProvider;this.astNodeLocator=e.workspace.AstNodeLocator}async link(e,t=Lc.None){for(const r of Ut(e.parseResult.value)){await Vc(t);Bt(r).forEach(t=>this.doLink(t,e))}}doLink(t,r){var n;const a=t.reference;if(a._ref===e){a._ref=Zc;try{let r=this.getCandidate(t);if(W(r)){a._ref=r}else{a._nodeDescription=r;if(this.langiumDocuments().hasDocument(r.documentUri)){let e=this.loadAstNode(r);a._ref=e!==null&&e!==void 0?e:this.createLinkingError(t,r)}else{a._ref=e}}}catch(e){console.error(`An error occurred while resolving reference to '${a.$refText}':`,e);let r=(n=e.message)!==null&&n!==void 0?n:String(e);a._ref=Object.assign(Object.assign({},t),{message:`An error occurred while resolving reference to '${a.$refText}': ${r}`})}r.references.push(a)}}unlink(e){for(const t of e.references){delete t._ref;delete t._nodeDescription}e.references=[]}getCandidate(e){const t=this.scopeProvider.getScope(e);const r=t.getElement(e.reference.$refText);return r!==null&&r!==void 0?r:this.createLinkingError(e)}buildReference(t,r,n,a){const o=this;const i={$refNode:n,$refText:a,get ref(){var n;if(V(this._ref)){return this._ref}else if(j(this._nodeDescription)){let e=o.loadAstNode(this._nodeDescription);this._ref=e!==null&&e!==void 0?e:o.createLinkingError({reference:i,container:t,property:r},this._nodeDescription)}else if(this._ref===e){this._ref=Zc;let a=Ft(t).$document,s=o.getLinkedNode({reference:i,container:t,property:r});if(s.error&&a&&a.state<3){return this._ref=e}this._ref=(n=s.node)!==null&&n!==void 0?n:s.error;this._nodeDescription=s.descr;a===null||a===void 0?void 0:a.references.push(this)}else if(this._ref===Zc){throw new Error(`Cyclic reference resolution detected: ${o.astNodeLocator.getAstNodePath(t)}/${r} (symbol '${a}')`)}return V(this._ref)?this._ref:e},get $nodeDescription(){return this._nodeDescription},get error(){return W(this._ref)?this._ref:e}};return i}getLinkedNode(e){var t;try{let r=this.getCandidate(e);if(W(r)){return{error:r}}let n=this.loadAstNode(r);if(n){return{node:n,descr:r}}else{return{descr:r,error:this.createLinkingError(e,r)}}}catch(r){console.error(`An error occurred while resolving reference to '${e.reference.$refText}':`,r);let n=(t=r.message)!==null&&t!==void 0?t:String(r);return{error:Object.assign(Object.assign({},e),{message:`An error occurred while resolving reference to '${e.reference.$refText}': ${n}`})}}}loadAstNode(t){if(t.node){return t.node}const r=this.langiumDocuments().getDocument(t.documentUri);if(!r){return e}return this.astNodeLocator.getAstNode(r.parseResult.value,t.path)}createLinkingError(e,t){const r=Ft(e.container).$document;r&&r.state<Yc.ComputedScopes&&console.warn(`Attempted reference resolution before document reached ComputedScopes state (${r.uri}).`);const n=this.reflection.getReferenceType(e);return Object.assign(Object.assign({},e),{message:`Could not resolve reference to ${n} named '${e.reference.$refText}'.`,targetDescription:t})}}function Qc(e){return typeof e.name==="string"}class DefaultNameProvider{getName(t){if(Qc(t)){return t.name}return e}getNameNode(e){return kr(e.$cstNode,"name")}}class DefaultReferences{constructor(e){this.nameProvider=e.references.NameProvider;this.index=e.shared.workspace.IndexManager;this.nodeLocator=e.workspace.AstNodeLocator}findDeclaration(t){if(t){let e=Cr(t),r=t.astNode;if(e&&r){let n=r[e.feature];if(B(n)){return n.ref}else if(Array.isArray(n)){for(const e of n){if(B(e)&&e.$refNode&&e.$refNode.offset<=t.offset&&e.$refNode.end>=t.end){return e.ref}}}}if(r){let e=this.nameProvider.getNameNode(r);if(e&&(e===t||re(t,e))){return r}}}return e}findDeclarationNode(t){const r=this.findDeclaration(t);if(r===null||r===void 0?void 0:r.$cstNode){let e=this.nameProvider.getNameNode(r);return e!==null&&e!==void 0?e:r.$cstNode}return e}findReferences(e,t){const r=[];if(t.includeDeclaration){let t=this.getReferenceToSelf(e);t&&r.push(t)}let n=this.index.findAllReferences(e,this.nodeLocator.getAstNodePath(e));t.documentUri&&(n=n.filter(e=>qc.equals(e.sourceUri,t.documentUri)));r.push(...n);return ee(r)}getReferenceToSelf(t){const r=this.nameProvider.getNameNode(t);if(r){let e=Mt(t),n=this.nodeLocator.getAstNodePath(t);return{sourceUri:e.uri,sourcePath:n,targetUri:e.uri,targetPath:n,segment:ae(r),local:!0}}return e}}class MultiMap{constructor(e){this.map=new Map;if(e){for(const[t,r]of e){this.add(t,r)}}}get size(){return q.sum(ee(this.map.values()).map(e=>e.length))}clear(){this.map.clear()}delete(t,r){if(r===e){return this.map.delete(t)}else{let e=this.map.get(t);if(e){let n=e.indexOf(r);if(n>=0){if(e.length===1){this.map.delete(t)}else{e.splice(n,1)}return!0}}return!1}}get(e){var t;return(t=this.map.get(e))!==null&&t!==void 0?t:[]}has(t,r){if(r===e){return this.map.has(t)}else{let e=this.map.get(t);if(e){return e.indexOf(r)>=0}return!1}}add(e,t){if(this.map.has(e)){this.map.get(e).push(t)}else{this.map.set(e,[t])}return this}addAll(e,t){if(this.map.has(e)){this.map.get(e).push(...t)}else{this.map.set(e,Array.from(t))}return this}forEach(e){this.map.forEach((t,r)=>t.forEach(t=>e(t,r,this)))}[Symbol.iterator](){return this.entries().iterator()}entries(){return ee(this.map.entries()).flatMap(([e,t])=>t.map(t=>[e,t]))}keys(){return ee(this.map.keys())}values(){return ee(this.map.values()).flat()}entriesGroupedByKey(){return ee(this.map.entries())}}class BiMap{get size(){return this.map.size}constructor(e){this.map=new Map;this.inverse=new Map;if(e){for(const[t,r]of e){this.set(t,r)}}}clear(){this.map.clear();this.inverse.clear()}set(e,t){this.map.set(e,t);this.inverse.set(t,e);return this}get(e){return this.map.get(e)}getKey(e){return this.inverse.get(e)}delete(t){const r=this.map.get(t);if(r!==e){this.map.delete(t);this.inverse.delete(r);return!0}return!1}}class DefaultScopeComputation{constructor(e){this.nameProvider=e.references.NameProvider;this.descriptions=e.workspace.AstNodeDescriptionProvider}async computeExports(t,r=Lc.None){return this.computeExportsForNode(t.parseResult.value,t,e,r)}async computeExportsForNode(e,t,r=Gt,n=Lc.None){const a=[];this.exportNode(e,a,t);for(const o of r(e)){await Vc(n);this.exportNode(o,a,t)}return a}exportNode(e,t,r){const n=this.nameProvider.getName(e);n&&t.push(this.descriptions.createDescription(e,n,r))}async computeLocalScopes(e,t=Lc.None){const r=e.parseResult.value;const n=new MultiMap;for(const a of Kt(r)){await Vc(t);this.processNode(a,e,n)}return n}processNode(e,t,r){const n=e.$container;if(n){let a=this.nameProvider.getName(e);a&&r.add(n,this.descriptions.createDescription(e,a,t))}}}class StreamScope{constructor(e,t,r){var n;this.elements=e;this.outerScope=t;this.caseInsensitive=(n=r===null||r===void 0?void 0:r.caseInsensitive)!==null&&n!==void 0?n:!1}getAllElements(){if(this.outerScope){return this.elements.concat(this.outerScope.getAllElements())}else{return this.elements}}getElement(t){const r=this.caseInsensitive?this.elements.find(e=>e.name.toLowerCase()===t.toLowerCase()):this.elements.find(e=>e.name===t);if(r){return r}if(this.outerScope){return this.outerScope.getElement(t)}return e}}class MapScope{constructor(e,t,r){var n;this.elements=new Map;this.caseInsensitive=(n=r===null||r===void 0?void 0:r.caseInsensitive)!==null&&n!==void 0?n:!1;for(const t of e){let e=this.caseInsensitive?t.name.toLowerCase():t.name;this.elements.set(e,t)}this.outerScope=t}getElement(t){const r=this.caseInsensitive?t.toLowerCase():t;const n=this.elements.get(r);if(n){return n}if(this.outerScope){return this.outerScope.getElement(t)}return e}getAllElements(){let e=ee(this.elements.values());this.outerScope&&(e=e.concat(this.outerScope.getAllElements()));return e}}class DisposableCache{constructor(){this.toDispose=[];this.isDisposed=!1}onDispose(e){this.toDispose.push(e)}dispose(){this.throwIfDisposed();this.clear();this.isDisposed=!0;this.toDispose.forEach(e=>e.dispose())}throwIfDisposed(){if(this.isDisposed){throw new Error("This cache has already been disposed")}}}class SimpleCache extends DisposableCache{constructor(){super(...arguments);this.cache=new Map}has(e){this.throwIfDisposed();return this.cache.has(e)}set(e,t){this.throwIfDisposed();this.cache.set(e,t)}get(t,r){this.throwIfDisposed();if(this.cache.has(t)){return this.cache.get(t)}else if(r){let e=r();this.cache.set(t,e);return e}else{return e}}delete(e){this.throwIfDisposed();return this.cache.delete(e)}clear(){this.throwIfDisposed();this.cache.clear()}}class ContextCache extends DisposableCache{constructor(e){super();this.cache=new Map;this.converter=e!==null&&e!==void 0?e:e=>e}has(e,t){this.throwIfDisposed();return this.cacheForContext(e).has(t)}set(e,t,r){this.throwIfDisposed();this.cacheForContext(e).set(t,r)}get(t,r,n){this.throwIfDisposed();const a=this.cacheForContext(t);if(a.has(r)){return a.get(r)}else if(n){let e=n();a.set(r,e);return e}else{return e}}delete(e,t){this.throwIfDisposed();return this.cacheForContext(e).delete(t)}clear(e){this.throwIfDisposed();if(e){let t=this.converter(e);this.cache.delete(t)}else{this.cache.clear()}}cacheForContext(e){const t=this.converter(e);let r=this.cache.get(t);if(!r){r=new Map;this.cache.set(t,r)}return r}}class WorkspaceCache extends SimpleCache{constructor(e,t){super();if(t){this.toDispose.push(e.workspace.DocumentBuilder.onBuildPhase(t,()=>{this.clear()}));this.toDispose.push(e.workspace.DocumentBuilder.onUpdate((e,t)=>{t.length>0&&this.clear()}))}else{this.toDispose.push(e.workspace.DocumentBuilder.onUpdate(()=>{this.clear()}))}}}class DefaultScopeProvider{constructor(e){this.reflection=e.shared.AstReflection;this.nameProvider=e.references.NameProvider;this.descriptions=e.workspace.AstNodeDescriptionProvider;this.indexManager=e.shared.workspace.IndexManager;this.globalScopeCache=new WorkspaceCache(e.shared)}getScope(e){const t=[];const r=this.reflection.getReferenceType(e);const n=Mt(e.container).precomputedScopes;if(n){let a=e.container;do{let e=n.get(a);e.length>0&&t.push(ee(e).filter(e=>this.reflection.isSubtype(e.type,r)));a=a.$container}while(a)}let a=this.getGlobalScope(r,e);for(let e=t.length-1;e>=0;e--){a=this.createScope(t[e],a)}return a}createScope(e,t,r){return new StreamScope(ee(e),t,r)}createScopeForNodes(t,r,n){const a=ee(t).map(t=>{const r=this.nameProvider.getName(t);if(r){return this.descriptions.createDescription(t,r)}return e}).nonNullable();return new StreamScope(a,r,n)}getGlobalScope(e,t){return this.globalScopeCache.get(e,()=>new MapScope(this.indexManager.allElements(e)))}}function eu(e){return typeof e.$comment==="string"}function tu(e){return typeof e==="object"&&!!e&&("$ref"in e||"$error"in e)}class DefaultJsonSerializer{constructor(e){this.ignoreProperties=new Set(["$container","$containerProperty","$containerIndex","$document","$cstNode"]);this.langiumDocuments=e.shared.workspace.LangiumDocuments;this.astNodeLocator=e.workspace.AstNodeLocator;this.nameProvider=e.references.NameProvider;this.commentProvider=e.documentation.CommentProvider}serialize(t,r){const n=r!==null&&r!==void 0?r:{};const a=r===null||r===void 0?void 0:r.replacer;const o=(e,t)=>this.replacer(e,t,n);const i=a?(e,t)=>a(e,t,o):o;try{this.currentDocument=Mt(t);return JSON.stringify(t,i,r===null||r===void 0?void 0:r.space)}finally{this.currentDocument=e}}deserialize(e,t){const r=t!==null&&t!==void 0?t:{};const n=JSON.parse(e);this.linkNode(n,n,r);return n}replacer(t,r,{refText:n,sourceText:a,textRegions:o,comments:i,uriConverter:s}){var l,c,u,d;if(this.ignoreProperties.has(t)){return e}else if(B(r)){let t=r.ref,a=n?r.$refText:e;if(t){let e=Mt(t),n="";if(this.currentDocument&&this.currentDocument!==e){if(s){n=s(e.uri,r)}else{n=e.uri.toString()}}let o=this.astNodeLocator.getAstNodePath(t);return{$ref:`${n}#${o}`,$refText:a}}else{return{$error:(c=(l=r.error)===null||l===void 0?void 0:l.message)!==null&&c!==void 0?c:"Could not resolve reference",$refText:a}}}else if(V(r)){let n=e;if(o){n=this.addAstNodeRegionWithAssignmentsTo(Object.assign({},r));(!t||r.$document)&&(n===null||n===void 0?void 0:n.$textRegion)&&(n.$textRegion.documentURI=(u=this.currentDocument)===null||u===void 0?void 0:u.uri.toString())}if(a&&!t){n!==null&&n!==void 0?n:n=Object.assign({},r);n.$sourceText=(d=r.$cstNode)===null||d===void 0?void 0:d.text}if(i){n!==null&&n!==void 0?n:n=Object.assign({},r);let e=this.commentProvider.getComment(r);e&&(n.$comment=e.replace(/\r/g,""))}return n!==null&&n!==void 0?n:r}else{return r}}addAstNodeRegionWithAssignmentsTo(t){const r=e=>({offset:e.offset,end:e.end,length:e.length,range:e.range});if(t.$cstNode){let e=t.$textRegion=r(t.$cstNode),n=e.assignments={};Object.keys(t).filter(e=>!e.startsWith("$")).forEach(e=>{const a=Tr(t.$cstNode,e).map(r);a.length!==0&&(n[e]=a)});return t}return e}linkNode(e,t,r,n,a,o){for(const[n,a]of Object.entries(e)){if(Array.isArray(a)){for(let o=0;o<a.length;o++){let i=a[o];if(tu(i)){a[o]=this.reviveReference(e,n,t,i,r)}else V(i)&&this.linkNode(i,t,r,e,n,o)}}else if(tu(a)){e[n]=this.reviveReference(e,n,t,a,r)}else V(a)&&this.linkNode(a,t,r,e,n)}const i=e;i.$container=n;i.$containerProperty=a;i.$containerIndex=o}reviveReference(t,r,n,a,o){let i=a.$refText;let s=a.$error;if(a.$ref){let e=this.getRefNode(n,a.$ref,o.uriConverter);if(V(e)){i||(i=this.nameProvider.getName(e));return{$refText:i!==null&&i!==void 0?i:"",ref:e}}else{s=e}}if(s){let e={$refText:i!==null&&i!==void 0?i:""};e.error={container:t,property:r,message:s,reference:e};return e}else{return e}}getRefNode(e,t,r){try{let n=t.indexOf("#");if(n===0){let r=this.astNodeLocator.getAstNode(e,t.substring(1));if(!r){return"Could not resolve path: "+t}return r}if(n<0){let e=r?r(t):Jc.URI.parse(t),n=this.langiumDocuments.getDocument(e);if(!n){return"Could not find document for URI: "+t}return n.parseResult.value}let a=r?r(t.substring(0,n)):Jc.URI.parse(t.substring(0,n)),o=this.langiumDocuments.getDocument(a)
if(!o){return"Could not find document for URI: "+t}if(n===t.length-1){return o.parseResult.value}let i=this.astNodeLocator.getAstNode(o.parseResult.value,t.substring(n+1));if(!i){return"Could not resolve URI: "+t}return i}catch(e){return String(e)}}}class DefaultServiceRegistry{get map(){return this.fileExtensionMap}constructor(e){this.languageIdMap=new Map;this.fileExtensionMap=new Map;this.textDocuments=e===null||e===void 0?void 0:e.workspace.TextDocuments}register(t){const r=t.LanguageMetaData;for(const e of r.fileExtensions){this.fileExtensionMap.has(e)&&console.warn(`The file extension ${e} is used by multiple languages. It is now assigned to '${r.languageId}'.`);this.fileExtensionMap.set(e,t)}this.languageIdMap.set(r.languageId,t);if(this.languageIdMap.size===1){this.singleton=t}else{this.singleton=e}}getServices(t){var r,n;if(this.singleton!==e){return this.singleton}if(this.languageIdMap.size===0){throw new Error("The service registry is empty. Use `register` to register the services of a language.")}const a=(n=(r=this.textDocuments)===null||r===void 0?void 0:r.get(t))===null||n===void 0?void 0:n.languageId;if(a!==e){let e=this.languageIdMap.get(a);if(e){return e}}const o=qc.extname(t);const i=this.fileExtensionMap.get(o);if(!i){if(a){throw new Error(`The service registry contains no services for the extension '${o}' for language '${a}'.`)}else{throw new Error(`The service registry contains no services for the extension '${o}'.`)}}return i}hasServices(e){try{this.getServices(e);return!0}catch(e){return!1}}get all(){return Array.from(this.languageIdMap.values())}}var ru={};function nu(e){return{code:e}}(function(e){e.all=["fast","slow","built-in"]})(ru);class ValidationRegistry{constructor(e){this.entries=new MultiMap;this.entriesBefore=[];this.entriesAfter=[];this.reflection=e.shared.AstReflection}register(e,t=this,r="fast"){if(r==="built-in"){throw new Error("The 'built-in' category is reserved for lexer, parser, and linker errors.")}for(const[n,a]of Object.entries(e)){let e=a;if(Array.isArray(e)){for(const a of e){let e={check:this.wrapValidationException(a,t),category:r};this.addEntry(n,e)}}else if(typeof e==="function"){let a={check:this.wrapValidationException(e,t),category:r};this.addEntry(n,a)}else{de(e)}}}wrapValidationException(e,t){return async(r,n,a)=>{await this.handleException(()=>e.call(t,r,n,a),"An error occurred during validation",n,r)}}async handleException(e,t,r,n){try{await e()}catch(e){if(Uc(e)){throw e}console.error(`${t}:`,e);e instanceof Error&&e.stack&&console.error(e.stack);let a=e instanceof Error?e.message:String(e);r("error",`${t}: ${a}`,{node:n})}}addEntry(e,t){if(e==="AstNode"){this.entries.add("AstNode",t);return}for(const r of this.reflection.getAllSubTypes(e)){this.entries.add(r,t)}}getChecks(e,t){let r=ee(this.entries.get(e)).concat(this.entries.get("AstNode"));t&&(r=r.filter(e=>t.includes(e.category)));return r.map(e=>e.check)}registerBeforeDocument(e,t=this){this.entriesBefore.push(this.wrapPreparationException(e,"An error occurred during set-up of the validation",t))}registerAfterDocument(e,t=this){this.entriesAfter.push(this.wrapPreparationException(e,"An error occurred during tear-down of the validation",t))}wrapPreparationException(e,t,r){return async(n,a,o,i)=>{await this.handleException(()=>e.call(r,n,a,o,i),t,a,n)}}get checksBefore(){return this.entriesBefore}get checksAfter(){return this.entriesAfter}}var au={};class DefaultDocumentValidator{constructor(e){this.validationRegistry=e.validation.ValidationRegistry;this.metadata=e.LanguageMetaData}async validateDocument(e,t={},r=Lc.None){const n=e.parseResult;const a=[];await Vc(r);if(!t.categories||t.categories.includes("built-in")){this.processLexingErrors(n,a,t);if(t.stopAfterLexingErrors&&a.some(e=>{var t;return((t=e.data)===null||t===void 0?void 0:t.code)===au.LexingError})){return a}this.processParsingErrors(n,a,t);if(t.stopAfterParsingErrors&&a.some(e=>{var t;return((t=e.data)===null||t===void 0?void 0:t.code)===au.ParsingError})){return a}this.processLinkingErrors(e,a,t);if(t.stopAfterLinkingErrors&&a.some(e=>{var t;return((t=e.data)===null||t===void 0?void 0:t.code)===au.LinkingError})){return a}}try{a.push(...await this.validateAst(n.value,t,r))}catch(e){if(Uc(e)){throw e}console.error("An error occurred during validation:",e)}await Vc(r);return a}processLexingErrors(e,t,r){var n,a,o;const i=[...e.lexerErrors,...(a=(n=e.lexerReport)===null||n===void 0?void 0:n.diagnostics)!==null&&a!==void 0?a:[]];for(const e of i){let r=(o=e.severity)!==null&&o!==void 0?o:"error",n={severity:iu(r),range:{start:{line:e.line-1,character:e.column-1},end:{line:e.line-1,character:e.column+e.length-1}},message:e.message,data:su(r),source:this.getSource()};t.push(n)}}processParsingErrors(t,r,n){for(const n of t.parserErrors){let t=e;if(isNaN(n.token.startOffset)){if("previousToken"in n){let e=n.previousToken;if(!isNaN(e.startOffset)){let r={line:e.endLine-1,character:e.endColumn};t={start:r,end:r}}else{let e={line:0,character:0};t={start:e,end:e}}}}else{t=ne(n.token)}if(t){let e={severity:iu("error"),range:t,message:n.message,data:nu(au.ParsingError),source:this.getSource()};r.push(e)}}}processLinkingErrors(e,t,r){for(const r of e.references){let e=r.error;if(e){let r={node:e.container,property:e.property,index:e.index,data:{code:au.LinkingError,containerType:e.container.$type,property:e.property,refText:e.reference.$refText}};t.push(this.toDiagnostic("error",e.message,r))}}}async validateAst(e,t,r=Lc.None){const n=[];const a=(e,t,r)=>{n.push(this.toDiagnostic(e,t,r))};await this.validateAstBefore(e,t,a,r);await this.validateAstNodes(e,t,a,r);await this.validateAstAfter(e,t,a,r);return n}async validateAstBefore(e,t,r,n=Lc.None){var a;const o=this.validationRegistry.checksBefore;for(const i of o){await Vc(n);await i(e,r,(a=t.categories)!==null&&a!==void 0?a:[],n)}}async validateAstNodes(e,t,r,n=Lc.None){await Promise.all(Ut(e).map(async e=>{await Vc(n);const a=this.validationRegistry.getChecks(e.$type,t.categories);for(const t of a){await t(e,r,n)}}))}async validateAstAfter(e,t,r,n=Lc.None){var a;const o=this.validationRegistry.checksAfter;for(const i of o){await Vc(n);await i(e,r,(a=t.categories)!==null&&a!==void 0?a:[],n)}}toDiagnostic(e,t,r){return{message:t,range:ou(r),severity:iu(e),code:r.code,codeDescription:r.codeDescription,tags:r.tags,relatedInformation:r.relatedInformation,data:r.data,source:this.getSource()}}getSource(){return this.metadata.languageId}}function ou(e){if(e.range){return e.range}let t;if(typeof e.property==="string"){t=kr(e.node.$cstNode,e.property,e.index)}else typeof e.keyword==="string"&&(t=Rr(e.node.$cstNode,e.keyword,e.index));t!==null&&t!==void 0?t:t=e.node.$cstNode;if(!t){return{start:{line:0,character:0},end:{line:0,character:0}}}return t.range}function iu(e){switch(e){case"error":return 1;case"warning":return 2;case"info":return 3;case"hint":return 4;default:throw new Error("Invalid diagnostic severity: "+e)}}function su(e){switch(e){case"error":return nu(au.LexingError);case"warning":return nu(au.LexingWarning);case"info":return nu(au.LexingInfo);case"hint":return nu(au.LexingHint);default:throw new Error("Invalid diagnostic severity: "+e)}}(function(e){e.LexingError="lexing-error";e.LexingWarning="lexing-warning";e.LexingInfo="lexing-info";e.LexingHint="lexing-hint";e.ParsingError="parsing-error";e.LinkingError="linking-error"})(au);class DefaultAstNodeDescriptionProvider{constructor(e){this.astNodeLocator=e.workspace.AstNodeLocator;this.nameProvider=e.references.NameProvider}createDescription(e,t,r){const n=r!==null&&r!==void 0?r:Mt(e);t!==null&&t!==void 0?t:t=this.nameProvider.getName(e);const a=this.astNodeLocator.getAstNodePath(e);if(!t){throw new Error(`Node at path ${a} has no name.`)}let o;const i=()=>{var t;return o!==null&&o!==void 0?o:o=ae((t=this.nameProvider.getNameNode(e))!==null&&t!==void 0?t:e.$cstNode)};return{node:e,name:t,get nameSegment(){return i()},selectionSegment:ae(e.$cstNode),type:e.$type,documentUri:n.uri,path:a}}}class DefaultReferenceDescriptionProvider{constructor(e){this.nodeLocator=e.workspace.AstNodeLocator}async createDescriptions(e,t=Lc.None){const r=[];const n=e.parseResult.value;for(const e of Ut(n)){await Vc(t);Bt(e).filter(e=>!W(e)).forEach(e=>{const t=this.createDescription(e);t&&r.push(t)})}return r}createDescription(t){const r=t.reference.$nodeDescription;const n=t.reference.$refNode;if(!r||!n){return e}const a=Mt(t.container).uri;return{sourceUri:a,sourcePath:this.nodeLocator.getAstNodePath(t.container),targetUri:r.documentUri,targetPath:r.path,segment:ae(n),local:qc.equals(r.documentUri,a)}}}class DefaultAstNodeLocator{constructor(){this.segmentSeparator="/";this.indexSeparator="@"}getAstNodePath(e){if(e.$container){let t=this.getAstNodePath(e.$container),r=this.getPathSegment(e),n=t+this.segmentSeparator+r;return n}return""}getPathSegment({$containerProperty:t,$containerIndex:r}){if(!t){throw new Error("Missing '$containerProperty' in AST node.")}if(r!==e){return t+this.indexSeparator+r}return t}getAstNode(e,t){const r=t.split(this.segmentSeparator);return r.reduce((e,t)=>{if(!e||t.length===0){return e}const r=t.indexOf(this.indexSeparator);if(r>0){let n=t.substring(0,r),a=parseInt(t.substring(r+1)),o=e[n];return o===null||o===void 0?void 0:o[a]}return e[t]},e)}}class DefaultConfigurationProvider{constructor(e){this._ready=new Deferred;this.settings={};this.workspaceConfig=!1;this.onConfigurationSectionUpdateEmitter=new Emitter;this.serviceRegistry=e.ServiceRegistry}get ready(){return this._ready.promise}initialize(e){var t,r;this.workspaceConfig=(r=(t=e.capabilities.workspace)===null||t===void 0?void 0:t.configuration)!==null&&r!==void 0?r:!1}async initialized(e){if(this.workspaceConfig){if(e.register){let t=this.serviceRegistry.all;e.register({section:t.map(e=>this.toSectionName(e.LanguageMetaData.languageId))})}if(e.fetchConfiguration){let t=this.serviceRegistry.all.map(e=>({section:this.toSectionName(e.LanguageMetaData.languageId)})),r=await e.fetchConfiguration(t);t.forEach((e,t)=>{this.updateSectionConfiguration(e.section,r[t])})}}this._ready.resolve()}updateConfiguration(e){if(!e.settings){return}Object.keys(e.settings).forEach(t=>{const r=e.settings[t];this.updateSectionConfiguration(t,r);this.onConfigurationSectionUpdateEmitter.fire({section:t,configuration:r})})}updateSectionConfiguration(e,t){this.settings[e]=t}async getConfiguration(e,t){await this.ready;const r=this.toSectionName(e);if(this.settings[r]){return this.settings[r][t]}}toSectionName(e){return`${e}`}get onConfigurationSectionUpdate(){return this.onConfigurationSectionUpdateEmitter.event}}var lu={};(function(e){function t(e){return{dispose:async()=>await e()}}e.create=t})(lu);class DefaultDocumentBuilder{constructor(e){this.updateBuildOptions={validation:{categories:["built-in","fast"]}};this.updateListeners=[];this.buildPhaseListeners=new MultiMap;this.documentPhaseListeners=new MultiMap;this.buildState=new Map;this.documentBuildWaiters=new Map;this.currentState=0;this.langiumDocuments=e.workspace.LangiumDocuments;this.langiumDocumentFactory=e.workspace.LangiumDocumentFactory;this.textDocuments=e.workspace.TextDocuments;this.indexManager=e.workspace.IndexManager;this.serviceRegistry=e.ServiceRegistry}async build(t,r={},n=Lc.None){var a,o;for(const n of t){let t=n.uri.toString();if(n.state===6){if(typeof r.validation==="boolean"&&r.validation){n.state=5;n.diagnostics=e;this.buildState.delete(t)}else if(typeof r.validation==="object"){let e=this.buildState.get(t),i=(a=e===null||e===void 0?void 0:e.result)===null||a===void 0?void 0:a.validationChecks;if(i){let a=(o=r.validation.categories)!==null&&o!==void 0?o:ru.all,s=a.filter(e=>!i.includes(e));if(s.length>0){this.buildState.set(t,{completed:!1,options:{validation:Object.assign(Object.assign({},r.validation),{categories:s})},result:e.result});n.state=5}}}}else{this.buildState.delete(t)}}this.currentState=0;await this.emitUpdate(t.map(e=>e.uri),[]);await this.buildDocuments(t,r,n)}async update(t,r,n=Lc.None){this.currentState=0;for(const e of r){this.langiumDocuments.deleteDocument(e);this.buildState.delete(e.toString());this.indexManager.remove(e)}for(const e of t){let t=this.langiumDocuments.invalidateDocument(e);if(!t){let t=this.langiumDocumentFactory.fromModel({$type:"INVALID"},e);t.state=0;this.langiumDocuments.addDocument(t)}this.buildState.delete(e.toString())}const a=ee(t).concat(r).map(e=>e.toString()).toSet();this.langiumDocuments.all.filter(e=>!a.has(e.uri.toString())&&this.shouldRelink(e,a)).forEach(t=>{const r=this.serviceRegistry.getServices(t.uri).references.Linker;r.unlink(t);t.state=Math.min(t.state,3);t.diagnostics=e});await this.emitUpdate(t,r);await Vc(n);const o=this.sortDocuments(this.langiumDocuments.all.filter(e=>{var t;return e.state<4||!((t=this.buildState.get(e.uri.toString()))===null||t===void 0?void 0:t.completed)}).toArray());await this.buildDocuments(o,this.updateBuildOptions,n)}async emitUpdate(e,t){await Promise.all(this.updateListeners.map(r=>r(e,t)))}sortDocuments(e){let t=0;let r=e.length-1;while(t<r){while(t<e.length&&this.hasTextDocument(e[t])){t++}while(r>=0&&!this.hasTextDocument(e[r])){r--}t<r&&([e[t],e[r]]=[e[r],e[t]])}return e}hasTextDocument(e){var t;return Boolean((t=this.textDocuments)===null||t===void 0?void 0:t.get(e.uri))}shouldRelink(t,r){if(t.references.some(t=>t.error!==e)){return!0}return this.indexManager.isAffected(t,r)}onUpdate(e){this.updateListeners.push(e);return lu.create(()=>{const t=this.updateListeners.indexOf(e);t>=0&&this.updateListeners.splice(t,1)})}async buildDocuments(e,t,r){this.prepareBuild(e,t);await this.runCancelable(e,1,r,e=>this.langiumDocumentFactory.update(e,r));await this.runCancelable(e,2,r,e=>this.indexManager.updateContent(e,r));await this.runCancelable(e,3,r,async e=>{const t=this.serviceRegistry.getServices(e.uri).references.ScopeComputation;e.precomputedScopes=await t.computeLocalScopes(e,r)});await this.runCancelable(e,4,r,e=>{const t=this.serviceRegistry.getServices(e.uri).references.Linker;return t.link(e,r)});await this.runCancelable(e,5,r,e=>this.indexManager.updateReferences(e,r));const n=e.filter(e=>this.shouldValidate(e));await this.runCancelable(n,6,r,e=>this.validate(e,r));for(const t of e){let e=this.buildState.get(t.uri.toString());e&&(e.completed=!0)}}prepareBuild(e,t){for(const r of e){let e=r.uri.toString(),n=this.buildState.get(e);(!n||n.completed)&&this.buildState.set(e,{completed:!1,options:t,result:n===null||n===void 0?void 0:n.result})}}async runCancelable(e,t,r,n){const a=e.filter(e=>e.state<t);for(const e of a){await Vc(r);await n(e);e.state=t;await this.notifyDocumentPhase(e,t,r)}const o=e.filter(e=>e.state===t);await this.notifyBuildPhase(o,t,r);this.currentState=t}onBuildPhase(e,t){this.buildPhaseListeners.add(e,t);return lu.create(()=>{this.buildPhaseListeners.delete(e,t)})}onDocumentPhase(e,t){this.documentPhaseListeners.add(e,t);return lu.create(()=>{this.documentPhaseListeners.delete(e,t)})}waitUntil(t,r,n){let a=e;if(r&&"path"in r){a=r}else{n=r}n!==null&&n!==void 0?n:n=Lc.None;if(a){let e=this.langiumDocuments.getDocument(a);if(e&&e.state>t){return Promise.resolve(a)}}if(this.currentState>=t){return Promise.resolve(e)}else if(n.isCancellationRequested){return Promise.reject(Kc)}return new Promise((r,o)=>{const i=this.onBuildPhase(t,()=>{i.dispose();s.dispose();if(a){let e=this.langiumDocuments.getDocument(a);r(e===null||e===void 0?void 0:e.uri)}else{r(e)}});const s=n.onCancellationRequested(()=>{i.dispose();s.dispose();o(Kc)})})}async notifyDocumentPhase(e,t,r){const n=this.documentPhaseListeners.get(t);const a=n.slice();for(const t of a){try{await t(e,r)}catch(e){if(!Uc(e)){throw e}}}}async notifyBuildPhase(e,t,r){if(e.length===0){return}const n=this.buildPhaseListeners.get(t);const a=n.slice();for(const t of a){await Vc(r);await t(e,r)}}shouldValidate(e){return Boolean(this.getBuildOptions(e).validation)}async validate(t,r){var n,a;const o=this.serviceRegistry.getServices(t.uri).validation.DocumentValidator;const i=this.getBuildOptions(t).validation;const s=typeof i==="object"?i:e;const l=await o.validateDocument(t,s,r);if(t.diagnostics){t.diagnostics.push(...l)}else{t.diagnostics=l}const c=this.buildState.get(t.uri.toString());if(c){(n=c.result)!==null&&n!==void 0?n:c.result={};let e=(a=s===null||s===void 0?void 0:s.categories)!==null&&a!==void 0?a:ru.all;if(c.result.validationChecks){c.result.validationChecks.push(...e)}else{c.result.validationChecks=[...e]}}}getBuildOptions(e){var t,r;return(r=(t=this.buildState.get(e.uri.toString()))===null||t===void 0?void 0:t.options)!==null&&r!==void 0?r:{}}}class DefaultIndexManager{constructor(e){this.symbolIndex=new Map;this.symbolByTypeIndex=new ContextCache;this.referenceIndex=new Map;this.documents=e.workspace.LangiumDocuments;this.serviceRegistry=e.ServiceRegistry;this.astReflection=e.AstReflection}findAllReferences(e,t){const r=Mt(e).uri;const n=[];this.referenceIndex.forEach(e=>{e.forEach(e=>{qc.equals(e.targetUri,r)&&e.targetPath===t&&n.push(e)})});return ee(n)}allElements(e,t){let r=ee(this.symbolIndex.keys());t&&(r=r.filter(e=>!t||t.has(e)));return r.map(t=>this.getFileDescriptions(t,e)).flat()}getFileDescriptions(e,t){var r;if(!t){return(r=this.symbolIndex.get(e))!==null&&r!==void 0?r:[]}const n=this.symbolByTypeIndex.get(e,t,()=>{var r;const n=(r=this.symbolIndex.get(e))!==null&&r!==void 0?r:[];return n.filter(e=>this.astReflection.isSubtype(e.type,t))});return n}remove(e){const t=e.toString();this.symbolIndex.delete(t);this.symbolByTypeIndex.clear(t);this.referenceIndex.delete(t)}async updateContent(e,t=Lc.None){const r=this.serviceRegistry.getServices(e.uri);const n=await r.references.ScopeComputation.computeExports(e,t);const a=e.uri.toString();this.symbolIndex.set(a,n);this.symbolByTypeIndex.clear(a)}async updateReferences(e,t=Lc.None){const r=this.serviceRegistry.getServices(e.uri);const n=await r.workspace.ReferenceDescriptionProvider.createDescriptions(e,t);this.referenceIndex.set(e.uri.toString(),n)}isAffected(e,t){const r=this.referenceIndex.get(e.uri.toString());if(!r){return!1}return r.some(e=>!e.local&&t.has(e.targetUri.toString()))}}class DefaultWorkspaceManager{constructor(e){this.initialBuildOptions={};this._ready=new Deferred;this.serviceRegistry=e.ServiceRegistry;this.langiumDocuments=e.workspace.LangiumDocuments;this.documentBuilder=e.workspace.DocumentBuilder;this.fileSystemProvider=e.workspace.FileSystemProvider;this.mutex=e.workspace.WorkspaceLock}get ready(){return this._ready.promise}get workspaceFolders(){return this.folders}initialize(t){var r;this.folders=(r=t.workspaceFolders)!==null&&r!==void 0?r:e}initialized(e){return this.mutex.write(e=>{var t;return this.initializeWorkspace((t=this.folders)!==null&&t!==void 0?t:[],e)})}async initializeWorkspace(e,t=Lc.None){const r=await this.performStartup(e);await Vc(t);await this.documentBuilder.build(r,this.initialBuildOptions,t)}async performStartup(e){const t=this.serviceRegistry.all.flatMap(e=>e.LanguageMetaData.fileExtensions);const r=[];const n=e=>{r.push(e);this.langiumDocuments.hasDocument(e.uri)||this.langiumDocuments.addDocument(e)};await this.loadAdditionalDocuments(e,n);await Promise.all(e.map(e=>[e,this.getRootFolder(e)]).map(async e=>this.traverseFolder(...e,t,n)));this._ready.resolve();return r}loadAdditionalDocuments(e,t){return Promise.resolve()}getRootFolder(t){return e.parse(t.uri)}async traverseFolder(e,t,r,n){const a=await this.fileSystemProvider.readDirectory(t);await Promise.all(a.map(async t=>{if(this.includeEntry(e,t,r)){if(t.isDirectory){await this.traverseFolder(e,t.uri,r,n)}else if(t.isFile){let e=await this.langiumDocuments.getOrCreateDocument(t.uri);n(e)}}}))}includeEntry(e,t,r){const n=qc.basename(t.uri);if(n.startsWith(".")){return!1}if(t.isDirectory){return n!=="node_modules"&&n!=="out"}else if(t.isFile){let e=qc.extname(t.uri);return r.includes(e)}return!1}}class DefaultLexerErrorMessageProvider{buildUnexpectedCharactersMessage(e,t,r,n,a){return Ra.buildUnexpectedCharactersMessage(e,t,r,n,a)}buildUnableToPopLexerModeMessage(e){return Ra.buildUnableToPopLexerModeMessage(e)}}var cu={mode:"full"};class DefaultLexer{constructor(e){this.errorMessageProvider=e.parser.LexerErrorMessageProvider;this.tokenBuilder=e.parser.TokenBuilder;const t=this.tokenBuilder.buildTokens(e.Grammar,{caseInsensitive:e.LanguageMetaData.caseInsensitive});this.tokenTypes=this.toTokenTypeDictionary(t);const r=pu(t)?Object.values(t):t;const n=e.LanguageMetaData.mode==="production";this.chevrotainLexer=new Lexer(r,{positionTracking:"full",skipValidations:n,errorMessageProvider:this.errorMessageProvider})}get definition(){return this.tokenTypes}tokenize(e,t=cu){var r,n,a;const o=this.chevrotainLexer.tokenize(e);return{tokens:o.tokens,errors:o.errors,hidden:(r=o.groups.hidden)!==null&&r!==void 0?r:[],report:(a=(n=this.tokenBuilder).flushLexingReport)===null||a===void 0?void 0:a.call(n,e)}}toTokenTypeDictionary(e){if(pu(e))return e;const t=du(e)?Object.values(e.modes).flat():e;const r={};t.forEach(e=>r[e.name]=e);return r}}function uu(e){return Array.isArray(e)&&(e.length===0||"name"in e[0])}function du(e){return e&&"modes"in e&&"defaultMode"in e}function pu(e){return!uu(e)&&!du(e)}function mu(e,t,r){let n;let a;if(typeof e==="string"){a=t;n=r}else{a=e.range.start;n=t}a||(a=$s.create(0,0));const o=hu(e);const i=bu(n);const s=yu({lines:o,position:a,options:i});return Au({index:0,tokens:s,position:a})}function fu(e,t){const r=bu(t);const n=hu(e);if(n.length===0){return!1}const a=n[0];const o=n[n.length-1];const i=r.start;const s=r.end;return Boolean(i===null||i===void 0?void 0:i.exec(a))&&Boolean(s===null||s===void 0?void 0:s.exec(o))}function hu(e){let t="";if(typeof e==="string"){t=e}else{t=e.text}const r=t.split(ar);return r}const _u=/\s*(@([\p{L}][\p{L}\p{N}]*)?)/yu;const gu=/\{(@[\p{L}][\p{L}\p{N}]*)(\s*)([^\r\n}]+)?\}/gu;function yu(e){var t,r,n;const a=[];let o=e.position.line;let i=e.position.character;for(let s=0;s<e.lines.length;s++){let l=s===0,c=s===e.lines.length-1,u=e.lines[s],d=0;if(l&&e.options.start){let r=(t=e.options.start)===null||t===void 0?void 0:t.exec(u);r&&(d=r.index+r[0].length)}else{let t=(r=e.options.line)===null||r===void 0?void 0:r.exec(u);t&&(d=t.index+t[0].length)}if(c){let t=(n=e.options.end)===null||n===void 0?void 0:n.exec(u);t&&(u=u.substring(0,t.index))}u=u.substring(0,Ru(u));let p=vu(u,d);if(p>=u.length){if(a.length>0){let e=$s.create(o,i);a.push({type:"break",content:"",range:Ds.create(e,e)})}}else{_u.lastIndex=d;let e=_u.exec(u);if(e){let t=e[0],r=e[1],n=$s.create(o,i+d),s=$s.create(o,i+d+t.length);a.push({type:"tag",content:r,range:Ds.create(n,s)});d+=t.length;d=vu(u,d)}if(d<u.length){let e=u.substring(d),t=Array.from(e.matchAll(gu));a.push(...xu(t,e,o,i+d))}}o++;i=0}if(a.length>0&&a[a.length-1].type==="break"){return a.slice(0,-1)}return a}function xu(e,t,r,n){const a=[];if(e.length===0){let e=$s.create(r,n),o=$s.create(r,n+t.length);a.push({type:"text",content:t,range:Ds.create(e,o)})}else{let o=0;for(const i of e){let e=i.index,s=t.substring(o,e);s.length>0&&a.push({type:"text",content:t.substring(o,e),range:Ds.create($s.create(r,o+n),$s.create(r,e+n))});let l=s.length+1,c=i[1];a.push({type:"inline-tag",content:c,range:Ds.create($s.create(r,o+l+n),$s.create(r,o+l+c.length+n))});l+=c.length;if(i.length===4){l+=i[2].length;let e=i[3];a.push({type:"text",content:e,range:Ds.create($s.create(r,o+l+n),$s.create(r,o+l+e.length+n))})}else{a.push({type:"text",content:"",range:Ds.create($s.create(r,o+l+n),$s.create(r,o+l+n))})}o=e+i[0].length}let i=t.substring(o);i.length>0&&a.push({type:"text",content:i,range:Ds.create($s.create(r,o+n),$s.create(r,o+n+i.length))})}return a}const Tu=/\S/;const ku=/\s*$/;function vu(e,t){const r=e.substring(t).match(Tu);if(r){return t+r.index}else{return e.length}}function Ru(t){const r=t.match(ku);if(r&&typeof r.index==="number"){return r.index}return e}function Au(e){var t,r,n,a;const o=$s.create(e.position.line,e.position.character);if(e.tokens.length===0){return new JSDocCommentImpl([],Ds.create(o,o))}const i=[];while(e.index<e.tokens.length){let t=Cu(e,i[i.length-1]);t&&i.push(t)}const s=(r=(t=i[0])===null||t===void 0?void 0:t.range.start)!==null&&r!==void 0?r:o;const l=(a=(n=i[i.length-1])===null||n===void 0?void 0:n.range.end)!==null&&a!==void 0?a:o;return new JSDocCommentImpl(i,Ds.create(s,l))}function Cu(t,r){const n=t.tokens[t.index];if(n.type==="tag"){return Pu(t,!1)}else if(n.type==="text"||n.type==="inline-tag"){return Eu(t)}else{Iu(n,r);t.index++;return e}}function Iu(e,t){if(t){let r=new JSDocLineImpl("",e.range);if("inlines"in t){t.inlines.push(r)}else{t.content.inlines.push(r)}}}function Eu(e){let t=e.tokens[e.index];const r=t;let n=t;const a=[];while(t&&t.type!=="break"&&t.type!=="tag"){a.push(Su(e));n=t;t=e.tokens[e.index]}return new JSDocTextImpl(a,Ds.create(r.range.start,n.range.end))}function Su(e){const t=e.tokens[e.index];if(t.type==="inline-tag"){return Pu(e,!0)}else{return Nu(e)}}function Pu(e,t){const r=e.tokens[e.index++];const n=r.content.substring(1);const a=e.tokens[e.index];if((a===null||a===void 0?void 0:a.type)==="text"){if(t){let a=Nu(e);return new JSDocTagImpl(n,new JSDocTextImpl([a],a.range),t,Ds.create(r.range.start,a.range.end))}else{let a=Eu(e);return new JSDocTagImpl(n,a,t,Ds.create(r.range.start,a.range.end))}}else{let e=r.range;return new JSDocTagImpl(n,new JSDocTextImpl([],e),t,e)}}function Nu(e){const t=e.tokens[e.index++];return new JSDocLineImpl(t.content,t.range)}function bu(e){if(!e){return bu({start:"/**",end:"*/",line:"*"})}const{start:t,end:r,line:n}=e;return{start:Ou(t,!0),end:Ou(r,!1),line:Ou(n,!0)}}function Ou(e,t){if(typeof e==="string"||typeof e==="object"){let r=typeof e==="string"?ur(e):e.source;if(t){return new RegExp(`^\\s*${r}`)}else{return new RegExp(`\\s*${r}\\s*\$`)}}else{return e}}class JSDocCommentImpl{constructor(e,t){this.elements=e;this.range=t}getTag(e){return this.getAllTags().find(t=>t.name===e)}getTags(e){return this.getAllTags().filter(t=>t.name===e)}getAllTags(){return this.elements.filter(e=>"name"in e)}toString(){let e="";for(const t of this.elements){if(e.length===0){e=t.toString()}else{let r=t.toString();e+=$u(e)+r}}return e.trim()}toMarkdown(e){let t="";for(const r of this.elements){if(t.length===0){t=r.toMarkdown(e)}else{let n=r.toMarkdown(e);t+=$u(t)+n}}return t.trim()}}class JSDocTagImpl{constructor(e,t,r,n){this.name=e;this.content=t;this.inline=r;this.range=n}toString(){let e=`@${this.name}`;const t=this.content.toString();if(this.content.inlines.length===1){e=`${e} ${t}`}else this.content.inlines.length>1&&(e=`${e}\n${t}`);if(this.inline){return`{${e}}`}else{return e}}toMarkdown(e){var t,r;return(r=(t=e===null||e===void 0?void 0:e.renderTag)===null||t===void 0?void 0:t.call(e,this))!==null&&r!==void 0?r:this.toMarkdownDefault(e)}toMarkdownDefault(t){const r=this.content.toMarkdown(t);if(this.inline){let e=Lu(this.name,r,t!==null&&t!==void 0?t:{});if(typeof e==="string"){return e}}let n="";if((t===null||t===void 0?void 0:t.tag)==="italic"||(t===null||t===void 0?void 0:t.tag)===e){n="*"}else if((t===null||t===void 0?void 0:t.tag)==="bold"){n="**"}else(t===null||t===void 0?void 0:t.tag)==="bold-italic"&&(n="***");let a=`${n}@${this.name}${n}`;if(this.content.inlines.length===1){a=`${a} — ${r}`}else this.content.inlines.length>1&&(a=`${a}\n${r}`);if(this.inline){return`{${a}}`}else{return a}}}function Lu(t,r,n){var a,o;if(t==="linkplain"||t==="linkcode"||t==="link"){let e=r.indexOf(" "),i=r;if(e>0){let t=vu(r,e);i=r.substring(t);r=r.substring(0,e)}(t==="linkcode"||t==="link"&&n.link==="code")&&(i=`\`${i}\``);let s=(o=(a=n.renderLink)===null||a===void 0?void 0:a.call(n,r,i))!==null&&o!==void 0?o:wu(r,i);return s}return e}function wu(t,r){try{e.parse(t,!0);return`[${r}](${t})`}catch(e){return t}}class JSDocTextImpl{constructor(e,t){this.inlines=e;this.range=t}toString(){let e="";for(let t=0;t<this.inlines.length;t++){let r=this.inlines[t],n=this.inlines[t+1];e+=r.toString();n&&n.range.start.line>r.range.start.line&&(e+="\n")}return e}toMarkdown(e){let t="";for(let r=0;r<this.inlines.length;r++){let n=this.inlines[r],a=this.inlines[r+1];t+=n.toMarkdown(e);a&&a.range.start.line>n.range.start.line&&(t+="\n")}return t}}class JSDocLineImpl{constructor(e,t){this.text=e;this.range=t}toString(){return this.text}toMarkdown(){return this.text}}function $u(e){if(e.endsWith("\n")){return"\n"}else{return"\n\n"}}class JSDocDocumentationProvider{constructor(e){this.indexManager=e.shared.workspace.IndexManager;this.commentProvider=e.documentation.CommentProvider}getDocumentation(t){const r=this.commentProvider.getComment(t);if(r&&fu(r)){let e=mu(r);return e.toMarkdown({renderLink:(e,r)=>this.documentationLinkRenderer(t,e,r),renderTag:e=>this.documentationTagRenderer(t,e)})}return e}documentationLinkRenderer(t,r,n){var a;const o=(a=this.findNameInPrecomputedScopes(t,r))!==null&&a!==void 0?a:this.findNameInGlobalScope(t,r);if(o&&o.nameSegment){let e=o.nameSegment.range.start.line+1,t=o.nameSegment.range.start.character+1,r=o.documentUri.with({fragment:`L${e},${t}`});return`[${n}](${r.toString()})`}else{return e}}documentationTagRenderer(t,r){return e}findNameInPrecomputedScopes(t,r){const n=Mt(t);const a=n.precomputedScopes;if(!a){return e}let o=t;do{let e=a.get(o),t=e.find(e=>e.name===r);if(t){return t}o=o.$container}while(o);return e}findNameInGlobalScope(e,t){const r=this.indexManager.allElements().find(e=>e.name===t);return r}}class DefaultCommentProvider{constructor(e){this.grammarConfig=(()=>e.parser.GrammarConfig)}getComment(e){var t;if(eu(e)){return e.$comment}return(t=le(e.$cstNode,this.grammarConfig().multilineCommentRules))===null||t===void 0?void 0:t.text}}class DefaultAsyncParser{constructor(e){this.syncParser=e.parser.LangiumParser}parse(e,t){return Promise.resolve(this.syncParser.parse(e))}}class DefaultWorkspaceLock{constructor(){this.previousTokenSource=new CancellationTokenSource;this.writeQueue=[];this.readQueue=[];this.done=!0}write(e){this.cancelWrite();const t=Gc();this.previousTokenSource=t;return this.enqueue(this.writeQueue,e,t.token)}read(e){return this.enqueue(this.readQueue,e)}enqueue(e,t,r=Lc.None){const n=new Deferred;const a={action:t,deferred:n,cancellationToken:r};e.push(a);this.performNextOperation();return n.promise}async performNextOperation(){if(!this.done){return}const t=[];if(this.writeQueue.length>0){t.push(this.writeQueue.shift())}else if(this.readQueue.length>0){t.push(...this.readQueue.splice(0,this.readQueue.length))}else{return}this.done=!1;await Promise.all(t.map(async({action:t,deferred:r,cancellationToken:n})=>{try{let a=await Promise.resolve().then(()=>t(n));r.resolve(a)}catch(t){if(Uc(t)){r.resolve(e)}else{r.reject(t)}}}));this.done=!0;this.performNextOperation()}cancelWrite(){this.previousTokenSource.cancel()}}class DefaultHydrator{constructor(e){this.grammarElementIdMap=new BiMap;this.tokenTypeIdMap=new BiMap;this.grammar=e.Grammar;this.lexer=e.parser.Lexer;this.linker=e.references.Linker}dehydrate(t){return{lexerErrors:t.lexerErrors,lexerReport:t.lexerReport?this.dehydrateLexerReport(t.lexerReport):e,parserErrors:t.parserErrors.map(e=>Object.assign(Object.assign({},e),{message:e.message})),value:this.dehydrateAstNode(t.value,this.createDehyrationContext(t.value))}}dehydrateLexerReport(e){return e}createDehyrationContext(e){const t=new Map;const r=new Map;for(const r of Ut(e)){t.set(r,{})}if(e.$cstNode){for(const t of te(e.$cstNode)){r.set(t,{})}}return{astNodes:t,cstNodes:r}}dehydrateAstNode(t,r){const n=r.astNodes.get(t);n.$type=t.$type;n.$containerIndex=t.$containerIndex;n.$containerProperty=t.$containerProperty;t.$cstNode!==e&&(n.$cstNode=this.dehydrateCstNode(t.$cstNode,r));for(const[a,o]of Object.entries(t)){if(a.startsWith("$")){continue}if(Array.isArray(o)){let e=[];n[a]=e;for(const t of o){if(V(t)){e.push(this.dehydrateAstNode(t,r))}else if(B(t)){e.push(this.dehydrateReference(t,r))}else{e.push(t)}}}else if(V(o)){n[a]=this.dehydrateAstNode(o,r)}else if(B(o)){n[a]=this.dehydrateReference(o,r)}else o!==e&&(n[a]=o)}
return n}dehydrateReference(e,t){const r={};r.$refText=e.$refText;e.$refNode&&(r.$refNode=t.cstNodes.get(e.$refNode));return r}dehydrateCstNode(e,t){const r=t.cstNodes.get(e);if(X(e)){r.fullText=e.fullText}else{r.grammarSource=this.getGrammarElementId(e.grammarSource)}r.hidden=e.hidden;r.astNode=t.astNodes.get(e.astNode);if(z(e)){r.content=e.content.map(e=>this.dehydrateCstNode(e,t))}else if(H(e)){r.tokenType=e.tokenType.name;r.offset=e.offset;r.length=e.length;r.startLine=e.range.start.line;r.startColumn=e.range.start.character;r.endLine=e.range.end.line;r.endColumn=e.range.end.character}return r}hydrate(e){const t=e.value;const r=this.createHydrationContext(t);"$cstNode"in t&&this.hydrateCstNode(t.$cstNode,r);return{lexerErrors:e.lexerErrors,lexerReport:e.lexerReport,parserErrors:e.parserErrors,value:this.hydrateAstNode(t,r)}}createHydrationContext(e){const t=new Map;const r=new Map;for(const r of Ut(e)){t.set(r,{})}let n;if(e.$cstNode){for(const t of te(e.$cstNode)){let e;if("fullText"in t){e=new RootCstNodeImpl(t.fullText);n=e}else if("content"in t){e=new CompositeCstNodeImpl}else"tokenType"in t&&(e=this.hydrateCstLeafNode(t));if(e){r.set(t,e);e.root=n}}}return{astNodes:t,cstNodes:r}}hydrateAstNode(t,r){const n=r.astNodes.get(t);n.$type=t.$type;n.$containerIndex=t.$containerIndex;n.$containerProperty=t.$containerProperty;t.$cstNode&&(n.$cstNode=r.cstNodes.get(t.$cstNode));for(const[a,o]of Object.entries(t)){if(a.startsWith("$")){continue}if(Array.isArray(o)){let e=[];n[a]=e;for(const t of o){if(V(t)){e.push(this.setParent(this.hydrateAstNode(t,r),n))}else if(B(t)){e.push(this.hydrateReference(t,n,a,r))}else{e.push(t)}}}else if(V(o)){n[a]=this.setParent(this.hydrateAstNode(o,r),n)}else if(B(o)){n[a]=this.hydrateReference(o,n,a,r)}else o!==e&&(n[a]=o)}return n}setParent(e,t){e.$container=t;return e}hydrateReference(e,t,r,n){return this.linker.buildReference(t,r,n.cstNodes.get(e.$refNode),e.$refText)}hydrateCstNode(e,t,r=0){const n=t.cstNodes.get(e);typeof e.grammarSource==="number"&&(n.grammarSource=this.getGrammarElement(e.grammarSource));n.astNode=t.astNodes.get(e.astNode);if(z(n)){for(const a of e.content){let e=this.hydrateCstNode(a,t,r++);n.content.push(e)}}return n}hydrateCstLeafNode(e){const t=this.getTokenType(e.tokenType);const r=e.offset;const n=e.length;const a=e.startLine;const o=e.startColumn;const i=e.endLine;const s=e.endColumn;const l=e.hidden;const c=new LeafCstNodeImpl(r,n,{start:{line:a,character:o},end:{line:i,character:s}},t,l);return c}getTokenType(e){return this.lexer.definition[e]}getGrammarElementId(t){if(!t){return e}this.grammarElementIdMap.size===0&&this.createGrammarElementIdMap();return this.grammarElementIdMap.get(t)}getGrammarElement(e){this.grammarElementIdMap.size===0&&this.createGrammarElementIdMap();const t=this.grammarElementIdMap.getKey(e);return t}createGrammarElementIdMap(){let e=0;for(const t of Ut(this.grammar)){xe(t)&&this.grammarElementIdMap.set(t,e++)}}}function Du(e){return{documentation:{CommentProvider:e=>new DefaultCommentProvider(e),DocumentationProvider:e=>new JSDocDocumentationProvider(e)},parser:{AsyncParser:e=>new DefaultAsyncParser(e),GrammarConfig:e=>jr(e),LangiumParser:e=>Ac(e),CompletionParser:e=>Rc(e),ValueConverter:()=>new DefaultValueConverter,TokenBuilder:()=>new DefaultTokenBuilder,Lexer:e=>new DefaultLexer(e),ParserErrorMessageProvider:()=>new LangiumParserErrorMessageProvider,LexerErrorMessageProvider:()=>new DefaultLexerErrorMessageProvider},workspace:{AstNodeLocator:()=>new DefaultAstNodeLocator,AstNodeDescriptionProvider:e=>new DefaultAstNodeDescriptionProvider(e),ReferenceDescriptionProvider:e=>new DefaultReferenceDescriptionProvider(e)},references:{Linker:e=>new DefaultLinker(e),NameProvider:()=>new DefaultNameProvider,ScopeProvider:e=>new DefaultScopeProvider(e),ScopeComputation:e=>new DefaultScopeComputation(e),References:e=>new DefaultReferences(e)},serializer:{Hydrator:e=>new DefaultHydrator(e),JsonSerializer:e=>new DefaultJsonSerializer(e)},validation:{DocumentValidator:e=>new DefaultDocumentValidator(e),ValidationRegistry:e=>new ValidationRegistry(e)},shared:()=>e.shared}}function Mu(e){return{ServiceRegistry:e=>new DefaultServiceRegistry(e),workspace:{LangiumDocuments:e=>new DefaultLangiumDocuments(e),LangiumDocumentFactory:e=>new DefaultLangiumDocumentFactory(e),DocumentBuilder:e=>new DefaultDocumentBuilder(e),IndexManager:e=>new DefaultIndexManager(e),WorkspaceManager:e=>new DefaultWorkspaceManager(e),FileSystemProvider:t=>e.fileSystemProvider(t),WorkspaceLock:()=>new DefaultWorkspaceLock,ConfigurationProvider:e=>new DefaultConfigurationProvider(e)}}}var Fu={};(function(e){e.merge=((e,t)=>ju(ju({},e),t))})(Fu);function Gu(e,t,r,n,a,o,i,s,l){const c=[e,t,r,n,a,o,i,s,l].reduce(ju,{});return Uu(c)}const Ku=Symbol("isProxy");function Uu(e,t){const r=new Proxy({},{deleteProperty:()=>!1,set:()=>{throw new Error("Cannot set property on injected service container")},get:(n,a)=>{if(a===Ku){return!0}else{return Bu(n,a,e,t||r)}},getOwnPropertyDescriptor:(n,a)=>(Bu(n,a,e,t||r),Object.getOwnPropertyDescriptor(n,a)),has:(t,r)=>r in e,ownKeys:()=>[...Object.getOwnPropertyNames(e)]});return r}const Vu=Symbol();function Bu(t,r,n,a){if(r in t){if(t[r]instanceof Error){throw new Error("Construction failure. Please make sure that your dependencies are constructable.",{cause:t[r]})}if(t[r]===Vu){throw new Error('Cycle detected. Please make "'+String(r)+'" lazy. Visit https://langium.org/docs/reference/configuration-services/#resolving-cyclic-dependencies')}return t[r]}else if(r in n){let o=n[r];t[r]=Vu;try{t[r]=typeof o==="function"?o(a):Uu(o,a)}catch(n){t[r]=n instanceof Error?n:e;throw n}return t[r]}else{return e}}function ju(t,r){if(r){for(const[n,a]of Object.entries(r)){if(a!==e){let e=t[n];if(e!==null&&a!==null&&typeof e==="object"&&typeof a==="object"){t[n]=ju(e,a)}else{t[n]=a}}}}return t}class EmptyFileSystemProvider{readFile(){throw new Error("No file system is available.")}async readDirectory(){return[]}}var Wu={fileSystemProvider:()=>new EmptyFileSystemProvider};const zu={Grammar:()=>e,LanguageMetaData:()=>({caseInsensitive:!1,fileExtensions:[".langium"],languageId:"langium"})};const Hu={AstReflection:()=>new LangiumGrammarAstReflection};function Xu(){const e=Gu(Mu(Wu),Hu);const t=Gu(Du({shared:e}),zu);e.ServiceRegistry.register(t);return t}function Ju(t){var r;const n=Xu();const a=n.serializer.JsonSerializer.deserialize(t);n.shared.workspace.LangiumDocumentFactory.fromModel(a,e.parse(`memory://${(r=a.name)!==null&&r!==void 0?r:"grammar"}.langium`));return a}var qu,Yu,Zu,Qu,ed;var td=Object.defineProperty;var rd=(e,t)=>td(e,"name",{value:t,configurable:!0});var nd="Statement";var ad="Architecture";function od(e){return jd.isInstance(e,ad)}rd(od,"isArchitecture");var id="Axis";var sd="Branch";function ld(e){return jd.isInstance(e,sd)}rd(ld,"isBranch");var cd="Checkout";var ud="CherryPicking";var dd="ClassDefStatement";var pd="Commit";function md(e){return jd.isInstance(e,pd)}rd(md,"isCommit");var fd="Curve";var hd="Edge";var _d="Entry";var gd="GitGraph";function yd(e){return jd.isInstance(e,gd)}rd(yd,"isGitGraph");var xd="Group";var Td="Info";function kd(e){return jd.isInstance(e,Td)}rd(kd,"isInfo");var vd="Item";var Rd="Junction";var Ad="Merge";function Cd(e){return jd.isInstance(e,Ad)}rd(Cd,"isMerge");var Id="Option";var Ed="Packet";function Sd(e){return jd.isInstance(e,Ed)}rd(Sd,"isPacket");var Pd="PacketBlock";function Nd(e){return jd.isInstance(e,Pd)}rd(Nd,"isPacketBlock");var bd="Pie";function Od(e){return jd.isInstance(e,bd)}rd(Od,"isPie");var Ld="PieSection";function wd(e){return jd.isInstance(e,Ld)}rd(wd,"isPieSection");var $d="Radar";var Dd="Service";var Md="Treemap";function Fd(e){return jd.isInstance(e,Md)}rd(Fd,"isTreemap");var Gd="TreemapRow";var Kd="Direction";var Ud="Leaf";var Vd="Section";var Bd=(qu=class extends AbstractAstReflection{getAllTypes(){return[ad,id,sd,cd,ud,dd,pd,fd,Kd,hd,_d,gd,xd,Td,vd,Rd,Ud,Ad,Id,Ed,Pd,bd,Ld,$d,Vd,Dd,nd,Md,Gd]}computeIsSubtype(e,t){switch(e){case sd:case cd:case ud:case pd:case Ad:{return this.isSubtype(nd,t)}case Kd:{return this.isSubtype(gd,t)}case Ud:case Vd:{return this.isSubtype(vd,t)}default:{return!1}}}getReferenceType(e){const t=`${e.container.$type}:${e.property}`;switch(t){case"Entry:axis":{return id}default:{throw new Error(`${t} is not a valid reference id.`)}}}getTypeMetaData(e){switch(e){case ad:{return{name:ad,properties:[{name:"accDescr"},{name:"accTitle"},{name:"edges",defaultValue:[]},{name:"groups",defaultValue:[]},{name:"junctions",defaultValue:[]},{name:"services",defaultValue:[]},{name:"title"}]}}case id:{return{name:id,properties:[{name:"label"},{name:"name"}]}}case sd:{return{name:sd,properties:[{name:"name"},{name:"order"}]}}case cd:{return{name:cd,properties:[{name:"branch"}]}}case ud:{return{name:ud,properties:[{name:"id"},{name:"parent"},{name:"tags",defaultValue:[]}]}}case dd:{return{name:dd,properties:[{name:"className"},{name:"styleText"}]}}case pd:{return{name:pd,properties:[{name:"id"},{name:"message"},{name:"tags",defaultValue:[]},{name:"type"}]}}case fd:{return{name:fd,properties:[{name:"entries",defaultValue:[]},{name:"label"},{name:"name"}]}}case hd:{return{name:hd,properties:[{name:"lhsDir"},{name:"lhsGroup",defaultValue:!1},{name:"lhsId"},{name:"lhsInto",defaultValue:!1},{name:"rhsDir"},{name:"rhsGroup",defaultValue:!1},{name:"rhsId"},{name:"rhsInto",defaultValue:!1},{name:"title"}]}}case _d:{return{name:_d,properties:[{name:"axis"},{name:"value"}]}}case gd:{return{name:gd,properties:[{name:"accDescr"},{name:"accTitle"},{name:"statements",defaultValue:[]},{name:"title"}]}}case xd:{return{name:xd,properties:[{name:"icon"},{name:"id"},{name:"in"},{name:"title"}]}}case Td:{return{name:Td,properties:[{name:"accDescr"},{name:"accTitle"},{name:"title"}]}}case vd:{return{name:vd,properties:[{name:"classSelector"},{name:"name"}]}}case Rd:{return{name:Rd,properties:[{name:"id"},{name:"in"}]}}case Ad:{return{name:Ad,properties:[{name:"branch"},{name:"id"},{name:"tags",defaultValue:[]},{name:"type"}]}}case Id:{return{name:Id,properties:[{name:"name"},{name:"value",defaultValue:!1}]}}case Ed:{return{name:Ed,properties:[{name:"accDescr"},{name:"accTitle"},{name:"blocks",defaultValue:[]},{name:"title"}]}}case Pd:{return{name:Pd,properties:[{name:"bits"},{name:"end"},{name:"label"},{name:"start"}]}}case bd:{return{name:bd,properties:[{name:"accDescr"},{name:"accTitle"},{name:"sections",defaultValue:[]},{name:"showData",defaultValue:!1},{name:"title"}]}}case Ld:{return{name:Ld,properties:[{name:"label"},{name:"value"}]}}case $d:{return{name:$d,properties:[{name:"accDescr"},{name:"accTitle"},{name:"axes",defaultValue:[]},{name:"curves",defaultValue:[]},{name:"options",defaultValue:[]},{name:"title"}]}}case Dd:{return{name:Dd,properties:[{name:"icon"},{name:"iconText"},{name:"id"},{name:"in"},{name:"title"}]}}case Md:{return{name:Md,properties:[{name:"accDescr"},{name:"accTitle"},{name:"title"},{name:"TreemapRows",defaultValue:[]}]}}case Gd:{return{name:Gd,properties:[{name:"indent"},{name:"item"}]}}case Kd:{return{name:Kd,properties:[{name:"accDescr"},{name:"accTitle"},{name:"dir"},{name:"statements",defaultValue:[]},{name:"title"}]}}case Ud:{return{name:Ud,properties:[{name:"classSelector"},{name:"name"},{name:"value"}]}}case Vd:{return{name:Vd,properties:[{name:"classSelector"},{name:"name"}]}}default:{return{name:e,properties:[]}}}}},r(qu,"MermaidAstReflection"),(()=>{rd(qu,"MermaidAstReflection")})(),qu);var jd=new Bd;var Wd;var zd=rd(()=>Wd!==null&&Wd!==void 0?Wd:Wd=Ju(`{"\$type":"Grammar","isDeclared":true,"name":"Info","imports":[],"rules":[{"\$type":"ParserRule","entry":true,"name":"Info","definition":{"\$type":"Group","elements":[{"\$type":"RuleCall","rule":{"\$ref":"#/rules@12"},"arguments":[],"cardinality":"*"},{"\$type":"Keyword","value":"info"},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@12"},"arguments":[],"cardinality":"*"},{"\$type":"Group","elements":[{"\$type":"Keyword","value":"showInfo"},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@12"},"arguments":[],"cardinality":"*"}],"cardinality":"?"},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@2"},"arguments":[],"cardinality":"?"}]},"definesHiddenTokens":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"ParserRule","fragment":true,"name":"EOL","dataType":"string","definition":{"\$type":"Alternatives","elements":[{"\$type":"RuleCall","rule":{"\$ref":"#/rules@12"},"arguments":[],"cardinality":"+"},{"\$type":"EndOfFile"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"ParserRule","fragment":true,"name":"TitleAndAccessibilities","definition":{"\$type":"Group","elements":[{"\$type":"Alternatives","elements":[{"\$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@4"},"arguments":[]}},{"\$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@5"},"arguments":[]}},{"\$type":"Assignment","feature":"title","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@6"},"arguments":[]}}]},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@1"},"arguments":[]}],"cardinality":"+"},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"TerminalRule","name":"BOOLEAN","type":{"\$type":"ReturnType","name":"boolean"},"definition":{"\$type":"TerminalAlternatives","elements":[{"\$type":"CharacterRange","left":{"\$type":"Keyword","value":"true"}},{"\$type":"CharacterRange","left":{"\$type":"Keyword","value":"false"}}]},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"ACC_DESCR","definition":{"\$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"ACC_TITLE","definition":{"\$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"TITLE","definition":{"\$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"FLOAT","type":{"\$type":"ReturnType","name":"number"},"definition":{"\$type":"RegexToken","regex":"/[0-9]+\\\\.[0-9]+(?!\\\\.)/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"INT","type":{"\$type":"ReturnType","name":"number"},"definition":{"\$type":"RegexToken","regex":"/0|[1-9][0-9]*(?!\\\\.)/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"NUMBER","type":{"\$type":"ReturnType","name":"number"},"definition":{"\$type":"TerminalAlternatives","elements":[{"\$type":"TerminalRuleCall","rule":{"\$ref":"#/rules@7"}},{"\$type":"TerminalRuleCall","rule":{"\$ref":"#/rules@8"}}]},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"STRING","type":{"\$type":"ReturnType","name":"string"},"definition":{"\$type":"RegexToken","regex":"/\\"([^\\"\\\\\\\\]|\\\\\\\\.)*\\"|'([^'\\\\\\\\]|\\\\\\\\.)*'/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"ID","type":{"\$type":"ReturnType","name":"string"},"definition":{"\$type":"RegexToken","regex":"/[\\\\w]([-\\\\w]*\\\\w)?/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"NEWLINE","definition":{"\$type":"RegexToken","regex":"/\\\\r?\\\\n/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"\$type":"RegexToken","regex":"/[\\\\t ]+/"},"fragment":false},{"\$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"\$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"\$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"\$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"\$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"\$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/"},"fragment":false}],"definesHiddenTokens":false,"hiddenTokens":[],"interfaces":[],"types":[],"usedGrammars":[]}`),"InfoGrammar");var Hd;var Xd=rd(()=>Hd!==null&&Hd!==void 0?Hd:Hd=Ju(`{"\$type":"Grammar","isDeclared":true,"name":"Packet","imports":[],"rules":[{"\$type":"ParserRule","entry":true,"name":"Packet","definition":{"\$type":"Group","elements":[{"\$type":"RuleCall","rule":{"\$ref":"#/rules@13"},"arguments":[],"cardinality":"*"},{"\$type":"Alternatives","elements":[{"\$type":"Keyword","value":"packet"},{"\$type":"Keyword","value":"packet-beta"}]},{"\$type":"Alternatives","elements":[{"\$type":"RuleCall","rule":{"\$ref":"#/rules@3"},"arguments":[]},{"\$type":"Assignment","feature":"blocks","operator":"+=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@1"},"arguments":[]}},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@13"},"arguments":[]}],"cardinality":"*"}]},"definesHiddenTokens":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"ParserRule","name":"PacketBlock","definition":{"\$type":"Group","elements":[{"\$type":"Alternatives","elements":[{"\$type":"Group","elements":[{"\$type":"Assignment","feature":"start","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@9"},"arguments":[]}},{"\$type":"Group","elements":[{"\$type":"Keyword","value":"-"},{"\$type":"Assignment","feature":"end","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@9"},"arguments":[]}}],"cardinality":"?"}]},{"\$type":"Group","elements":[{"\$type":"Keyword","value":"+"},{"\$type":"Assignment","feature":"bits","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@9"},"arguments":[]}}]}]},{"\$type":"Keyword","value":":"},{"\$type":"Assignment","feature":"label","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@11"},"arguments":[]}},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@2"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"ParserRule","fragment":true,"name":"EOL","dataType":"string","definition":{"\$type":"Alternatives","elements":[{"\$type":"RuleCall","rule":{"\$ref":"#/rules@13"},"arguments":[],"cardinality":"+"},{"\$type":"EndOfFile"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"ParserRule","fragment":true,"name":"TitleAndAccessibilities","definition":{"\$type":"Group","elements":[{"\$type":"Alternatives","elements":[{"\$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@5"},"arguments":[]}},{"\$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@6"},"arguments":[]}},{"\$type":"Assignment","feature":"title","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@7"},"arguments":[]}}]},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@2"},"arguments":[]}],"cardinality":"+"},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"TerminalRule","name":"BOOLEAN","type":{"\$type":"ReturnType","name":"boolean"},"definition":{"\$type":"TerminalAlternatives","elements":[{"\$type":"CharacterRange","left":{"\$type":"Keyword","value":"true"}},{"\$type":"CharacterRange","left":{"\$type":"Keyword","value":"false"}}]},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"ACC_DESCR","definition":{"\$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"ACC_TITLE","definition":{"\$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"TITLE","definition":{"\$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"FLOAT","type":{"\$type":"ReturnType","name":"number"},"definition":{"\$type":"RegexToken","regex":"/[0-9]+\\\\.[0-9]+(?!\\\\.)/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"INT","type":{"\$type":"ReturnType","name":"number"},"definition":{"\$type":"RegexToken","regex":"/0|[1-9][0-9]*(?!\\\\.)/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"NUMBER","type":{"\$type":"ReturnType","name":"number"},"definition":{"\$type":"TerminalAlternatives","elements":[{"\$type":"TerminalRuleCall","rule":{"\$ref":"#/rules@8"}},{"\$type":"TerminalRuleCall","rule":{"\$ref":"#/rules@9"}}]},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"STRING","type":{"\$type":"ReturnType","name":"string"},"definition":{"\$type":"RegexToken","regex":"/\\"([^\\"\\\\\\\\]|\\\\\\\\.)*\\"|'([^'\\\\\\\\]|\\\\\\\\.)*'/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"ID","type":{"\$type":"ReturnType","name":"string"},"definition":{"\$type":"RegexToken","regex":"/[\\\\w]([-\\\\w]*\\\\w)?/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"NEWLINE","definition":{"\$type":"RegexToken","regex":"/\\\\r?\\\\n/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"\$type":"RegexToken","regex":"/[\\\\t ]+/"},"fragment":false},{"\$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"\$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"\$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"\$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"\$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"\$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/"},"fragment":false}],"definesHiddenTokens":false,"hiddenTokens":[],"interfaces":[],"types":[],"usedGrammars":[]}`),"PacketGrammar");var Jd;var qd=rd(()=>Jd!==null&&Jd!==void 0?Jd:Jd=Ju(`{"\$type":"Grammar","isDeclared":true,"name":"Pie","imports":[],"rules":[{"\$type":"ParserRule","entry":true,"name":"Pie","definition":{"\$type":"Group","elements":[{"\$type":"RuleCall","rule":{"\$ref":"#/rules@16"},"arguments":[],"cardinality":"*"},{"\$type":"Keyword","value":"pie"},{"\$type":"Assignment","feature":"showData","operator":"?=","terminal":{"\$type":"Keyword","value":"showData"},"cardinality":"?"},{"\$type":"Alternatives","elements":[{"\$type":"RuleCall","rule":{"\$ref":"#/rules@6"},"arguments":[]},{"\$type":"Assignment","feature":"sections","operator":"+=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@1"},"arguments":[]}},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@16"},"arguments":[]}],"cardinality":"*"}]},"definesHiddenTokens":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"ParserRule","name":"PieSection","definition":{"\$type":"Group","elements":[{"\$type":"Assignment","feature":"label","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@14"},"arguments":[]}},{"\$type":"Keyword","value":":"},{"\$type":"Assignment","feature":"value","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@4"},"arguments":[]}},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@5"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"TerminalRule","name":"FLOAT_PIE","type":{"\$type":"ReturnType","name":"number"},"definition":{"\$type":"RegexToken","regex":"/-?[0-9]+\\\\.[0-9]+(?!\\\\.)/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"INT_PIE","type":{"\$type":"ReturnType","name":"number"},"definition":{"\$type":"RegexToken","regex":"/-?(0|[1-9][0-9]*)(?!\\\\.)/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"NUMBER_PIE","type":{"\$type":"ReturnType","name":"number"},"definition":{"\$type":"TerminalAlternatives","elements":[{"\$type":"TerminalRuleCall","rule":{"\$ref":"#/rules@2"}},{"\$type":"TerminalRuleCall","rule":{"\$ref":"#/rules@3"}}]},"fragment":false,"hidden":false},{"\$type":"ParserRule","fragment":true,"name":"EOL","dataType":"string","definition":{"\$type":"Alternatives","elements":[{"\$type":"RuleCall","rule":{"\$ref":"#/rules@16"},"arguments":[],"cardinality":"+"},{"\$type":"EndOfFile"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"ParserRule","fragment":true,"name":"TitleAndAccessibilities","definition":{"\$type":"Group","elements":[{"\$type":"Alternatives","elements":[{"\$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@8"},"arguments":[]}},{"\$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@9"},"arguments":[]}},{"\$type":"Assignment","feature":"title","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@10"},"arguments":[]}}]},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@5"},"arguments":[]}],"cardinality":"+"},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"TerminalRule","name":"BOOLEAN","type":{"\$type":"ReturnType","name":"boolean"},"definition":{"\$type":"TerminalAlternatives","elements":[{"\$type":"CharacterRange","left":{"\$type":"Keyword","value":"true"}},{"\$type":"CharacterRange","left":{"\$type":"Keyword","value":"false"}}]},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"ACC_DESCR","definition":{"\$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"ACC_TITLE","definition":{"\$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"TITLE","definition":{"\$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"FLOAT","type":{"\$type":"ReturnType","name":"number"},"definition":{"\$type":"RegexToken","regex":"/[0-9]+\\\\.[0-9]+(?!\\\\.)/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"INT","type":{"\$type":"ReturnType","name":"number"},"definition":{"\$type":"RegexToken","regex":"/0|[1-9][0-9]*(?!\\\\.)/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"NUMBER","type":{"\$type":"ReturnType","name":"number"},"definition":{"\$type":"TerminalAlternatives","elements":[{"\$type":"TerminalRuleCall","rule":{"\$ref":"#/rules@11"}},{"\$type":"TerminalRuleCall","rule":{"\$ref":"#/rules@12"}}]},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"STRING","type":{"\$type":"ReturnType","name":"string"},"definition":{"\$type":"RegexToken","regex":"/\\"([^\\"\\\\\\\\]|\\\\\\\\.)*\\"|'([^'\\\\\\\\]|\\\\\\\\.)*'/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"ID","type":{"\$type":"ReturnType","name":"string"},"definition":{"\$type":"RegexToken","regex":"/[\\\\w]([-\\\\w]*\\\\w)?/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"NEWLINE","definition":{"\$type":"RegexToken","regex":"/\\\\r?\\\\n/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"\$type":"RegexToken","regex":"/[\\\\t ]+/"},"fragment":false},{"\$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"\$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"\$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"\$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"\$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"\$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/"},"fragment":false}],"definesHiddenTokens":false,"hiddenTokens":[],"interfaces":[],"types":[],"usedGrammars":[]}`),"PieGrammar");var Yd;var Zd=rd(()=>Yd!==null&&Yd!==void 0?Yd:Yd=Ju(`{"\$type":"Grammar","isDeclared":true,"name":"Architecture","imports":[],"rules":[{"\$type":"ParserRule","entry":true,"name":"Architecture","definition":{"\$type":"Group","elements":[{"\$type":"RuleCall","rule":{"\$ref":"#/rules@23"},"arguments":[],"cardinality":"*"},{"\$type":"Keyword","value":"architecture-beta"},{"\$type":"Alternatives","elements":[{"\$type":"RuleCall","rule":{"\$ref":"#/rules@23"},"arguments":[]},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@13"},"arguments":[]},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@1"},"arguments":[]}],"cardinality":"*"}]},"definesHiddenTokens":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"ParserRule","fragment":true,"name":"Statement","definition":{"\$type":"Alternatives","elements":[{"\$type":"Assignment","feature":"groups","operator":"+=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@5"},"arguments":[]}},{"\$type":"Assignment","feature":"services","operator":"+=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@6"},"arguments":[]}},{"\$type":"Assignment","feature":"junctions","operator":"+=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@7"},"arguments":[]}},{"\$type":"Assignment","feature":"edges","operator":"+=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@8"},"arguments":[]}}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"ParserRule","fragment":true,"name":"LeftPort","definition":{"\$type":"Group","elements":[{"\$type":"Keyword","value":":"},{"\$type":"Assignment","feature":"lhsDir","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@9"},"arguments":[]}}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"ParserRule","fragment":true,"name":"RightPort","definition":{"\$type":"Group","elements":[{"\$type":"Assignment","feature":"rhsDir","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@9"},"arguments":[]}},{"\$type":"Keyword","value":":"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"ParserRule","fragment":true,"name":"Arrow","definition":{"\$type":"Group","elements":[{"\$type":"RuleCall","rule":{"\$ref":"#/rules@2"},"arguments":[]},{"\$type":"Assignment","feature":"lhsInto","operator":"?=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@11"},"arguments":[]},"cardinality":"?"},{"\$type":"Alternatives","elements":[{"\$type":"Keyword","value":"--"},{"\$type":"Group","elements":[{"\$type":"Keyword","value":"-"},{"\$type":"Assignment","feature":"title","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@29"},"arguments":[]}},{"\$type":"Keyword","value":"-"}]}]},{"\$type":"Assignment","feature":"rhsInto","operator":"?=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@11"},"arguments":[]},"cardinality":"?"},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@3"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"ParserRule","name":"Group","definition":{"\$type":"Group","elements":[{"\$type":"Keyword","value":"group"},{"\$type":"Assignment","feature":"id","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@22"},"arguments":[]}},{"\$type":"Assignment","feature":"icon","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@28"},"arguments":[]},"cardinality":"?"},{"\$type":"Assignment","feature":"title","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@29"},"arguments":[]},"cardinality":"?"},{"\$type":"Group","elements":[{"\$type":"Keyword","value":"in"},{"\$type":"Assignment","feature":"in","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@22"},"arguments":[]}}],"cardinality":"?"},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@12"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"ParserRule","name":"Service","definition":{"\$type":"Group","elements":[{"\$type":"Keyword","value":"service"},{"\$type":"Assignment","feature":"id","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@22"},"arguments":[]}},{"\$type":"Alternatives","elements":[{"\$type":"Assignment","feature":"iconText","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@21"},"arguments":[]}},{"\$type":"Assignment","feature":"icon","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@28"},"arguments":[]}}],"cardinality":"?"},{"\$type":"Assignment","feature":"title","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@29"},"arguments":[]},"cardinality":"?"},{"\$type":"Group","elements":[{"\$type":"Keyword","value":"in"},{"\$type":"Assignment","feature":"in","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@22"},"arguments":[]}}],"cardinality":"?"},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@12"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"ParserRule","name":"Junction","definition":{"\$type":"Group","elements":[{"\$type":"Keyword","value":"junction"},{"\$type":"Assignment","feature":"id","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@22"},"arguments":[]}},{"\$type":"Group","elements":[{"\$type":"Keyword","value":"in"},{"\$type":"Assignment","feature":"in","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@22"},"arguments":[]}}],"cardinality":"?"},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@12"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"ParserRule","name":"Edge","definition":{"\$type":"Group","elements":[{"\$type":"Assignment","feature":"lhsId","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@22"},"arguments":[]}},{"\$type":"Assignment","feature":"lhsGroup","operator":"?=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@10"},"arguments":[]},"cardinality":"?"},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@4"},"arguments":[]},{"\$type":"Assignment","feature":"rhsId","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@22"},"arguments":[]}},{"\$type":"Assignment","feature":"rhsGroup","operator":"?=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@10"},"arguments":[]},"cardinality":"?"},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@12"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"TerminalRule","name":"ARROW_DIRECTION","definition":{"\$type":"TerminalAlternatives","elements":[{"\$type":"TerminalAlternatives","elements":[{"\$type":"TerminalAlternatives","elements":[{"\$type":"CharacterRange","left":{"\$type":"Keyword","value":"L"}},{"\$type":"CharacterRange","left":{"\$type":"Keyword","value":"R"}}]},{"\$type":"CharacterRange","left":{"\$type":"Keyword","value":"T"}}]},{"\$type":"CharacterRange","left":{"\$type":"Keyword","value":"B"}}]},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"ARROW_GROUP","definition":{"\$type":"RegexToken","regex":"/\\\\{group\\\\}/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"ARROW_INTO","definition":{"\$type":"RegexToken","regex":"/<|>/"},"fragment":false,"hidden":false},{"\$type":"ParserRule","fragment":true,"name":"EOL","dataType":"string","definition":{"\$type":"Alternatives","elements":[{"\$type":"RuleCall","rule":{"\$ref":"#/rules@23"},"arguments":[],"cardinality":"+"},{"\$type":"EndOfFile"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"ParserRule","fragment":true,"name":"TitleAndAccessibilities","definition":{"\$type":"Group","elements":[{"\$type":"Alternatives","elements":[{"\$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@15"},"arguments":[]}},{"\$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@16"},"arguments":[]}},{"\$type":"Assignment","feature":"title","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@17"},"arguments":[]}}]},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@12"},"arguments":[]}],"cardinality":"+"},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"TerminalRule","name":"BOOLEAN","type":{"\$type":"ReturnType","name":"boolean"},"definition":{"\$type":"TerminalAlternatives","elements":[{"\$type":"CharacterRange","left":{"\$type":"Keyword","value":"true"}},{"\$type":"CharacterRange","left":{"\$type":"Keyword","value":"false"}}]},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"ACC_DESCR","definition":{"\$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"ACC_TITLE","definition":{"\$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"TITLE","definition":{"\$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"FLOAT","type":{"\$type":"ReturnType","name":"number"},"definition":{"\$type":"RegexToken","regex":"/[0-9]+\\\\.[0-9]+(?!\\\\.)/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"INT","type":{"\$type":"ReturnType","name":"number"},"definition":{"\$type":"RegexToken","regex":"/0|[1-9][0-9]*(?!\\\\.)/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"NUMBER","type":{"\$type":"ReturnType","name":"number"},"definition":{"\$type":"TerminalAlternatives","elements":[{"\$type":"TerminalRuleCall","rule":{"\$ref":"#/rules@18"}},{"\$type":"TerminalRuleCall","rule":{"\$ref":"#/rules@19"}}]},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"STRING","type":{"\$type":"ReturnType","name":"string"},"definition":{"\$type":"RegexToken","regex":"/\\"([^\\"\\\\\\\\]|\\\\\\\\.)*\\"|'([^'\\\\\\\\]|\\\\\\\\.)*'/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"ID","type":{"\$type":"ReturnType","name":"string"},"definition":{"\$type":"RegexToken","regex":"/[\\\\w]([-\\\\w]*\\\\w)?/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"NEWLINE","definition":{"\$type":"RegexToken","regex":"/\\\\r?\\\\n/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"\$type":"RegexToken","regex":"/[\\\\t ]+/"},"fragment":false},{"\$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"\$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"\$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"\$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"\$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"\$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/"},"fragment":false},{"\$type":"TerminalRule","name":"ARCH_ICON","definition":{"\$type":"RegexToken","regex":"/\\\\([\\\\w-:]+\\\\)/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"ARCH_TITLE","definition":{"\$type":"RegexToken","regex":"/\\\\[[\\\\w ]+\\\\]/"},"fragment":false,"hidden":false}],"definesHiddenTokens":false,"hiddenTokens":[],"interfaces":[],"types":[],"usedGrammars":[]}`),"ArchitectureGrammar")
var Qd;var ep=rd(()=>Qd!==null&&Qd!==void 0?Qd:Qd=Ju(`{"\$type":"Grammar","isDeclared":true,"name":"GitGraph","imports":[],"rules":[{"\$type":"ParserRule","entry":true,"name":"GitGraph","definition":{"\$type":"Group","elements":[{"\$type":"RuleCall","rule":{"\$ref":"#/rules@19"},"arguments":[],"cardinality":"*"},{"\$type":"Alternatives","elements":[{"\$type":"Keyword","value":"gitGraph"},{"\$type":"Group","elements":[{"\$type":"Keyword","value":"gitGraph"},{"\$type":"Keyword","value":":"}]},{"\$type":"Keyword","value":"gitGraph:"},{"\$type":"Group","elements":[{"\$type":"Keyword","value":"gitGraph"},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@2"},"arguments":[]},{"\$type":"Keyword","value":":"}]}]},{"\$type":"Alternatives","elements":[{"\$type":"RuleCall","rule":{"\$ref":"#/rules@19"},"arguments":[]},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@9"},"arguments":[]},{"\$type":"Assignment","feature":"statements","operator":"+=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@1"},"arguments":[]}}],"cardinality":"*"}]},"definesHiddenTokens":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"ParserRule","name":"Statement","definition":{"\$type":"Alternatives","elements":[{"\$type":"RuleCall","rule":{"\$ref":"#/rules@3"},"arguments":[]},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@4"},"arguments":[]},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@5"},"arguments":[]},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@6"},"arguments":[]},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@7"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"ParserRule","name":"Direction","definition":{"\$type":"Assignment","feature":"dir","operator":"=","terminal":{"\$type":"Alternatives","elements":[{"\$type":"Keyword","value":"LR"},{"\$type":"Keyword","value":"TB"},{"\$type":"Keyword","value":"BT"}]}},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"ParserRule","name":"Commit","definition":{"\$type":"Group","elements":[{"\$type":"Keyword","value":"commit"},{"\$type":"Alternatives","elements":[{"\$type":"Group","elements":[{"\$type":"Keyword","value":"id:"},{"\$type":"Assignment","feature":"id","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@17"},"arguments":[]}}]},{"\$type":"Group","elements":[{"\$type":"Keyword","value":"msg:","cardinality":"?"},{"\$type":"Assignment","feature":"message","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@17"},"arguments":[]}}]},{"\$type":"Group","elements":[{"\$type":"Keyword","value":"tag:"},{"\$type":"Assignment","feature":"tags","operator":"+=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@17"},"arguments":[]}}]},{"\$type":"Group","elements":[{"\$type":"Keyword","value":"type:"},{"\$type":"Assignment","feature":"type","operator":"=","terminal":{"\$type":"Alternatives","elements":[{"\$type":"Keyword","value":"NORMAL"},{"\$type":"Keyword","value":"REVERSE"},{"\$type":"Keyword","value":"HIGHLIGHT"}]}}]}],"cardinality":"*"},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@8"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"ParserRule","name":"Branch","definition":{"\$type":"Group","elements":[{"\$type":"Keyword","value":"branch"},{"\$type":"Assignment","feature":"name","operator":"=","terminal":{"\$type":"Alternatives","elements":[{"\$type":"RuleCall","rule":{"\$ref":"#/rules@24"},"arguments":[]},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@17"},"arguments":[]}]}},{"\$type":"Group","elements":[{"\$type":"Keyword","value":"order:"},{"\$type":"Assignment","feature":"order","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@15"},"arguments":[]}}],"cardinality":"?"},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@8"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"ParserRule","name":"Merge","definition":{"\$type":"Group","elements":[{"\$type":"Keyword","value":"merge"},{"\$type":"Assignment","feature":"branch","operator":"=","terminal":{"\$type":"Alternatives","elements":[{"\$type":"RuleCall","rule":{"\$ref":"#/rules@24"},"arguments":[]},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@17"},"arguments":[]}]}},{"\$type":"Alternatives","elements":[{"\$type":"Group","elements":[{"\$type":"Keyword","value":"id:"},{"\$type":"Assignment","feature":"id","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@17"},"arguments":[]}}]},{"\$type":"Group","elements":[{"\$type":"Keyword","value":"tag:"},{"\$type":"Assignment","feature":"tags","operator":"+=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@17"},"arguments":[]}}]},{"\$type":"Group","elements":[{"\$type":"Keyword","value":"type:"},{"\$type":"Assignment","feature":"type","operator":"=","terminal":{"\$type":"Alternatives","elements":[{"\$type":"Keyword","value":"NORMAL"},{"\$type":"Keyword","value":"REVERSE"},{"\$type":"Keyword","value":"HIGHLIGHT"}]}}]}],"cardinality":"*"},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@8"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"ParserRule","name":"Checkout","definition":{"\$type":"Group","elements":[{"\$type":"Alternatives","elements":[{"\$type":"Keyword","value":"checkout"},{"\$type":"Keyword","value":"switch"}]},{"\$type":"Assignment","feature":"branch","operator":"=","terminal":{"\$type":"Alternatives","elements":[{"\$type":"RuleCall","rule":{"\$ref":"#/rules@24"},"arguments":[]},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@17"},"arguments":[]}]}},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@8"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"ParserRule","name":"CherryPicking","definition":{"\$type":"Group","elements":[{"\$type":"Keyword","value":"cherry-pick"},{"\$type":"Alternatives","elements":[{"\$type":"Group","elements":[{"\$type":"Keyword","value":"id:"},{"\$type":"Assignment","feature":"id","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@17"},"arguments":[]}}]},{"\$type":"Group","elements":[{"\$type":"Keyword","value":"tag:"},{"\$type":"Assignment","feature":"tags","operator":"+=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@17"},"arguments":[]}}]},{"\$type":"Group","elements":[{"\$type":"Keyword","value":"parent:"},{"\$type":"Assignment","feature":"parent","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@17"},"arguments":[]}}]}],"cardinality":"*"},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@8"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"ParserRule","fragment":true,"name":"EOL","dataType":"string","definition":{"\$type":"Alternatives","elements":[{"\$type":"RuleCall","rule":{"\$ref":"#/rules@19"},"arguments":[],"cardinality":"+"},{"\$type":"EndOfFile"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"ParserRule","fragment":true,"name":"TitleAndAccessibilities","definition":{"\$type":"Group","elements":[{"\$type":"Alternatives","elements":[{"\$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@11"},"arguments":[]}},{"\$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@12"},"arguments":[]}},{"\$type":"Assignment","feature":"title","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@13"},"arguments":[]}}]},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@8"},"arguments":[]}],"cardinality":"+"},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"TerminalRule","name":"BOOLEAN","type":{"\$type":"ReturnType","name":"boolean"},"definition":{"\$type":"TerminalAlternatives","elements":[{"\$type":"CharacterRange","left":{"\$type":"Keyword","value":"true"}},{"\$type":"CharacterRange","left":{"\$type":"Keyword","value":"false"}}]},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"ACC_DESCR","definition":{"\$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"ACC_TITLE","definition":{"\$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"TITLE","definition":{"\$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"FLOAT","type":{"\$type":"ReturnType","name":"number"},"definition":{"\$type":"RegexToken","regex":"/[0-9]+\\\\.[0-9]+(?!\\\\.)/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"INT","type":{"\$type":"ReturnType","name":"number"},"definition":{"\$type":"RegexToken","regex":"/0|[1-9][0-9]*(?!\\\\.)/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"NUMBER","type":{"\$type":"ReturnType","name":"number"},"definition":{"\$type":"TerminalAlternatives","elements":[{"\$type":"TerminalRuleCall","rule":{"\$ref":"#/rules@14"}},{"\$type":"TerminalRuleCall","rule":{"\$ref":"#/rules@15"}}]},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"STRING","type":{"\$type":"ReturnType","name":"string"},"definition":{"\$type":"RegexToken","regex":"/\\"([^\\"\\\\\\\\]|\\\\\\\\.)*\\"|'([^'\\\\\\\\]|\\\\\\\\.)*'/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"ID","type":{"\$type":"ReturnType","name":"string"},"definition":{"\$type":"RegexToken","regex":"/[\\\\w]([-\\\\w]*\\\\w)?/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"NEWLINE","definition":{"\$type":"RegexToken","regex":"/\\\\r?\\\\n/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"\$type":"RegexToken","regex":"/[\\\\t ]+/"},"fragment":false},{"\$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"\$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"\$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"\$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"\$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"\$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/"},"fragment":false},{"\$type":"TerminalRule","name":"REFERENCE","type":{"\$type":"ReturnType","name":"string"},"definition":{"\$type":"RegexToken","regex":"/\\\\w([-\\\\./\\\\w]*[-\\\\w])?/"},"fragment":false,"hidden":false}],"definesHiddenTokens":false,"hiddenTokens":[],"interfaces":[],"types":[],"usedGrammars":[]}`),"GitGraphGrammar");var tp;var rp=rd(()=>tp!==null&&tp!==void 0?tp:tp=Ju(`{"\$type":"Grammar","isDeclared":true,"name":"Radar","imports":[],"rules":[{"\$type":"ParserRule","entry":true,"name":"Radar","definition":{"\$type":"Group","elements":[{"\$type":"RuleCall","rule":{"\$ref":"#/rules@20"},"arguments":[],"cardinality":"*"},{"\$type":"Alternatives","elements":[{"\$type":"Keyword","value":"radar-beta"},{"\$type":"Keyword","value":"radar-beta:"},{"\$type":"Group","elements":[{"\$type":"Keyword","value":"radar-beta"},{"\$type":"Keyword","value":":"}]}]},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@20"},"arguments":[],"cardinality":"*"},{"\$type":"Alternatives","elements":[{"\$type":"RuleCall","rule":{"\$ref":"#/rules@10"},"arguments":[]},{"\$type":"Group","elements":[{"\$type":"Keyword","value":"axis"},{"\$type":"Assignment","feature":"axes","operator":"+=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@2"},"arguments":[]}},{"\$type":"Group","elements":[{"\$type":"Keyword","value":","},{"\$type":"Assignment","feature":"axes","operator":"+=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@2"},"arguments":[]}}],"cardinality":"*"}]},{"\$type":"Group","elements":[{"\$type":"Keyword","value":"curve"},{"\$type":"Assignment","feature":"curves","operator":"+=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@3"},"arguments":[]}},{"\$type":"Group","elements":[{"\$type":"Keyword","value":","},{"\$type":"Assignment","feature":"curves","operator":"+=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@3"},"arguments":[]}}],"cardinality":"*"}]},{"\$type":"Group","elements":[{"\$type":"Assignment","feature":"options","operator":"+=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@7"},"arguments":[]}},{"\$type":"Group","elements":[{"\$type":"Keyword","value":","},{"\$type":"Assignment","feature":"options","operator":"+=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@7"},"arguments":[]}}],"cardinality":"*"}]},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@20"},"arguments":[]}],"cardinality":"*"}]},"definesHiddenTokens":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"ParserRule","fragment":true,"name":"Label","definition":{"\$type":"Group","elements":[{"\$type":"Keyword","value":"["},{"\$type":"Assignment","feature":"label","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@18"},"arguments":[]}},{"\$type":"Keyword","value":"]"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"ParserRule","name":"Axis","definition":{"\$type":"Group","elements":[{"\$type":"Assignment","feature":"name","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@19"},"arguments":[]}},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@1"},"arguments":[],"cardinality":"?"}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"ParserRule","name":"Curve","definition":{"\$type":"Group","elements":[{"\$type":"Assignment","feature":"name","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@19"},"arguments":[]}},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@1"},"arguments":[],"cardinality":"?"},{"\$type":"Keyword","value":"{"},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@4"},"arguments":[]},{"\$type":"Keyword","value":"}"}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"ParserRule","fragment":true,"name":"Entries","definition":{"\$type":"Alternatives","elements":[{"\$type":"Group","elements":[{"\$type":"RuleCall","rule":{"\$ref":"#/rules@20"},"arguments":[],"cardinality":"*"},{"\$type":"Assignment","feature":"entries","operator":"+=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@6"},"arguments":[]}},{"\$type":"Group","elements":[{"\$type":"Keyword","value":","},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@20"},"arguments":[],"cardinality":"*"},{"\$type":"Assignment","feature":"entries","operator":"+=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@6"},"arguments":[]}}],"cardinality":"*"},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@20"},"arguments":[],"cardinality":"*"}]},{"\$type":"Group","elements":[{"\$type":"RuleCall","rule":{"\$ref":"#/rules@20"},"arguments":[],"cardinality":"*"},{"\$type":"Assignment","feature":"entries","operator":"+=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@5"},"arguments":[]}},{"\$type":"Group","elements":[{"\$type":"Keyword","value":","},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@20"},"arguments":[],"cardinality":"*"},{"\$type":"Assignment","feature":"entries","operator":"+=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@5"},"arguments":[]}}],"cardinality":"*"},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@20"},"arguments":[],"cardinality":"*"}]}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"ParserRule","name":"DetailedEntry","returnType":{"\$ref":"#/interfaces@0"},"definition":{"\$type":"Group","elements":[{"\$type":"Assignment","feature":"axis","operator":"=","terminal":{"\$type":"CrossReference","type":{"\$ref":"#/rules@2"},"terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@19"},"arguments":[]},"deprecatedSyntax":false}},{"\$type":"Keyword","value":":","cardinality":"?"},{"\$type":"Assignment","feature":"value","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@17"},"arguments":[]}}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"ParserRule","name":"NumberEntry","returnType":{"\$ref":"#/interfaces@0"},"definition":{"\$type":"Assignment","feature":"value","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@17"},"arguments":[]}},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"ParserRule","name":"Option","definition":{"\$type":"Alternatives","elements":[{"\$type":"Group","elements":[{"\$type":"Assignment","feature":"name","operator":"=","terminal":{"\$type":"Keyword","value":"showLegend"}},{"\$type":"Assignment","feature":"value","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@11"},"arguments":[]}}]},{"\$type":"Group","elements":[{"\$type":"Assignment","feature":"name","operator":"=","terminal":{"\$type":"Keyword","value":"ticks"}},{"\$type":"Assignment","feature":"value","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@17"},"arguments":[]}}]},{"\$type":"Group","elements":[{"\$type":"Assignment","feature":"name","operator":"=","terminal":{"\$type":"Keyword","value":"max"}},{"\$type":"Assignment","feature":"value","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@17"},"arguments":[]}}]},{"\$type":"Group","elements":[{"\$type":"Assignment","feature":"name","operator":"=","terminal":{"\$type":"Keyword","value":"min"}},{"\$type":"Assignment","feature":"value","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@17"},"arguments":[]}}]},{"\$type":"Group","elements":[{"\$type":"Assignment","feature":"name","operator":"=","terminal":{"\$type":"Keyword","value":"graticule"}},{"\$type":"Assignment","feature":"value","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@8"},"arguments":[]}}]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"TerminalRule","name":"GRATICULE","type":{"\$type":"ReturnType","name":"string"},"definition":{"\$type":"TerminalAlternatives","elements":[{"\$type":"CharacterRange","left":{"\$type":"Keyword","value":"circle"}},{"\$type":"CharacterRange","left":{"\$type":"Keyword","value":"polygon"}}]},"fragment":false,"hidden":false},{"\$type":"ParserRule","fragment":true,"name":"EOL","dataType":"string","definition":{"\$type":"Alternatives","elements":[{"\$type":"RuleCall","rule":{"\$ref":"#/rules@20"},"arguments":[],"cardinality":"+"},{"\$type":"EndOfFile"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"ParserRule","fragment":true,"name":"TitleAndAccessibilities","definition":{"\$type":"Group","elements":[{"\$type":"Alternatives","elements":[{"\$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@12"},"arguments":[]}},{"\$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@13"},"arguments":[]}},{"\$type":"Assignment","feature":"title","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@14"},"arguments":[]}}]},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@9"},"arguments":[]}],"cardinality":"+"},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"TerminalRule","name":"BOOLEAN","type":{"\$type":"ReturnType","name":"boolean"},"definition":{"\$type":"TerminalAlternatives","elements":[{"\$type":"CharacterRange","left":{"\$type":"Keyword","value":"true"}},{"\$type":"CharacterRange","left":{"\$type":"Keyword","value":"false"}}]},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"ACC_DESCR","definition":{"\$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"ACC_TITLE","definition":{"\$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"TITLE","definition":{"\$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"FLOAT","type":{"\$type":"ReturnType","name":"number"},"definition":{"\$type":"RegexToken","regex":"/[0-9]+\\\\.[0-9]+(?!\\\\.)/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"INT","type":{"\$type":"ReturnType","name":"number"},"definition":{"\$type":"RegexToken","regex":"/0|[1-9][0-9]*(?!\\\\.)/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"NUMBER","type":{"\$type":"ReturnType","name":"number"},"definition":{"\$type":"TerminalAlternatives","elements":[{"\$type":"TerminalRuleCall","rule":{"\$ref":"#/rules@15"}},{"\$type":"TerminalRuleCall","rule":{"\$ref":"#/rules@16"}}]},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"STRING","type":{"\$type":"ReturnType","name":"string"},"definition":{"\$type":"RegexToken","regex":"/\\"([^\\"\\\\\\\\]|\\\\\\\\.)*\\"|'([^'\\\\\\\\]|\\\\\\\\.)*'/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"ID","type":{"\$type":"ReturnType","name":"string"},"definition":{"\$type":"RegexToken","regex":"/[\\\\w]([-\\\\w]*\\\\w)?/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"NEWLINE","definition":{"\$type":"RegexToken","regex":"/\\\\r?\\\\n/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"\$type":"RegexToken","regex":"/[\\\\t ]+/"},"fragment":false},{"\$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"\$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"\$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"\$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"\$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"\$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/"},"fragment":false}],"interfaces":[{"\$type":"Interface","name":"Entry","attributes":[{"\$type":"TypeAttribute","name":"axis","isOptional":true,"type":{"\$type":"ReferenceType","referenceType":{"\$type":"SimpleType","typeRef":{"\$ref":"#/rules@2"}}}},{"\$type":"TypeAttribute","name":"value","type":{"\$type":"SimpleType","primitiveType":"number"},"isOptional":false}],"superTypes":[]}],"definesHiddenTokens":false,"hiddenTokens":[],"types":[],"usedGrammars":[]}`),"RadarGrammar");var np;var ap=rd(()=>np!==null&&np!==void 0?np:np=Ju(`{"\$type":"Grammar","isDeclared":true,"name":"Treemap","rules":[{"\$type":"ParserRule","fragment":true,"name":"TitleAndAccessibilities","definition":{"\$type":"Alternatives","elements":[{"\$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@2"},"arguments":[]}},{"\$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@3"},"arguments":[]}},{"\$type":"Assignment","feature":"title","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@4"},"arguments":[]}}],"cardinality":"+"},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"TerminalRule","name":"BOOLEAN","type":{"\$type":"ReturnType","name":"boolean"},"definition":{"\$type":"TerminalAlternatives","elements":[{"\$type":"CharacterRange","left":{"\$type":"Keyword","value":"true"}},{"\$type":"CharacterRange","left":{"\$type":"Keyword","value":"false"}}]},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"ACC_DESCR","definition":{"\$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"ACC_TITLE","definition":{"\$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"TITLE","definition":{"\$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/"},"fragment":false,"hidden":false},{"\$type":"ParserRule","entry":true,"name":"Treemap","returnType":{"\$ref":"#/interfaces@4"},"definition":{"\$type":"Group","elements":[{"\$type":"RuleCall","rule":{"\$ref":"#/rules@6"},"arguments":[]},{"\$type":"Alternatives","elements":[{"\$type":"RuleCall","rule":{"\$ref":"#/rules@0"},"arguments":[]},{"\$type":"Assignment","feature":"TreemapRows","operator":"+=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@14"},"arguments":[]}}],"cardinality":"*"}]},"definesHiddenTokens":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"TerminalRule","name":"TREEMAP_KEYWORD","definition":{"\$type":"TerminalAlternatives","elements":[{"\$type":"CharacterRange","left":{"\$type":"Keyword","value":"treemap-beta"}},{"\$type":"CharacterRange","left":{"\$type":"Keyword","value":"treemap"}}]},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"CLASS_DEF","definition":{"\$type":"RegexToken","regex":"/classDef\\\\s+([a-zA-Z_][a-zA-Z0-9_]+)(?:\\\\s+([^;\\\\r\\\\n]*))?(?:;)?/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"STYLE_SEPARATOR","definition":{"\$type":"CharacterRange","left":{"\$type":"Keyword","value":":::"}},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"SEPARATOR","definition":{"\$type":"CharacterRange","left":{"\$type":"Keyword","value":":"}},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"COMMA","definition":{"\$type":"CharacterRange","left":{"\$type":"Keyword","value":","}},"fragment":false,"hidden":false},{"\$type":"TerminalRule","hidden":true,"name":"WS","definition":{"\$type":"RegexToken","regex":"/[ \\\\t]+/"},"fragment":false},{"\$type":"TerminalRule","hidden":true,"name":"ML_COMMENT","definition":{"\$type":"RegexToken","regex":"/\\\\%\\\\%[^\\\\n]*/"},"fragment":false},{"\$type":"TerminalRule","hidden":true,"name":"NL","definition":{"\$type":"RegexToken","regex":"/\\\\r?\\\\n/"},"fragment":false},{"\$type":"ParserRule","name":"TreemapRow","definition":{"\$type":"Group","elements":[{"\$type":"Assignment","feature":"indent","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@19"},"arguments":[]},"cardinality":"?"},{"\$type":"Alternatives","elements":[{"\$type":"Assignment","feature":"item","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@16"},"arguments":[]}},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@15"},"arguments":[]}]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"ParserRule","name":"ClassDef","dataType":"string","definition":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@7"},"arguments":[]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"ParserRule","name":"Item","returnType":{"\$ref":"#/interfaces@0"},"definition":{"\$type":"Alternatives","elements":[{"\$type":"RuleCall","rule":{"\$ref":"#/rules@18"},"arguments":[]},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@17"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"ParserRule","name":"Section","returnType":{"\$ref":"#/interfaces@1"},"definition":{"\$type":"Group","elements":[{"\$type":"Assignment","feature":"name","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@23"},"arguments":[]}},{"\$type":"Group","elements":[{"\$type":"RuleCall","rule":{"\$ref":"#/rules@8"},"arguments":[]},{"\$type":"Assignment","feature":"classSelector","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@20"},"arguments":[]}}],"cardinality":"?"}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"ParserRule","name":"Leaf","returnType":{"\$ref":"#/interfaces@2"},"definition":{"\$type":"Group","elements":[{"\$type":"Assignment","feature":"name","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@23"},"arguments":[]}},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@19"},"arguments":[],"cardinality":"?"},{"\$type":"Alternatives","elements":[{"\$type":"RuleCall","rule":{"\$ref":"#/rules@9"},"arguments":[]},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@10"},"arguments":[]}]},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@19"},"arguments":[],"cardinality":"?"},{"\$type":"Assignment","feature":"value","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@22"},"arguments":[]}},{"\$type":"Group","elements":[{"\$type":"RuleCall","rule":{"\$ref":"#/rules@8"},"arguments":[]},{"\$type":"Assignment","feature":"classSelector","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@20"},"arguments":[]}}],"cardinality":"?"}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"TerminalRule","name":"INDENTATION","definition":{"\$type":"RegexToken","regex":"/[ \\\\t]{1,}/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"ID2","definition":{"\$type":"RegexToken","regex":"/[a-zA-Z_][a-zA-Z0-9_]*/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"NUMBER2","definition":{"\$type":"RegexToken","regex":"/[0-9_\\\\.\\\\,]+/"},"fragment":false,"hidden":false},{"\$type":"ParserRule","name":"MyNumber","dataType":"number","definition":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@21"},"arguments":[]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"TerminalRule","name":"STRING2","definition":{"\$type":"RegexToken","regex":"/\\"[^\\"]*\\"|'[^']*'/"},"fragment":false,"hidden":false}],"interfaces":[{"\$type":"Interface","name":"Item","attributes":[{"\$type":"TypeAttribute","name":"name","type":{"\$type":"SimpleType","primitiveType":"string"},"isOptional":false},{"\$type":"TypeAttribute","name":"classSelector","isOptional":true,"type":{"\$type":"SimpleType","primitiveType":"string"}}],"superTypes":[]},{"\$type":"Interface","name":"Section","superTypes":[{"\$ref":"#/interfaces@0"}],"attributes":[]},{"\$type":"Interface","name":"Leaf","superTypes":[{"\$ref":"#/interfaces@0"}],"attributes":[{"\$type":"TypeAttribute","name":"value","type":{"\$type":"SimpleType","primitiveType":"number"},"isOptional":false}]},{"\$type":"Interface","name":"ClassDefStatement","attributes":[{"\$type":"TypeAttribute","name":"className","type":{"\$type":"SimpleType","primitiveType":"string"},"isOptional":false},{"\$type":"TypeAttribute","name":"styleText","type":{"\$type":"SimpleType","primitiveType":"string"},"isOptional":false}],"superTypes":[]},{"\$type":"Interface","name":"Treemap","attributes":[{"\$type":"TypeAttribute","name":"TreemapRows","type":{"\$type":"ArrayType","elementType":{"\$type":"SimpleType","typeRef":{"\$ref":"#/rules@14"}}},"isOptional":false},{"\$type":"TypeAttribute","name":"title","isOptional":true,"type":{"\$type":"SimpleType","primitiveType":"string"}},{"\$type":"TypeAttribute","name":"accTitle","isOptional":true,"type":{"\$type":"SimpleType","primitiveType":"string"}},{"\$type":"TypeAttribute","name":"accDescr","isOptional":true,"type":{"\$type":"SimpleType","primitiveType":"string"}}],"superTypes":[]}],"definesHiddenTokens":false,"hiddenTokens":[],"imports":[],"types":[],"usedGrammars":[],"\$comment":"/**\\n * Treemap grammar for Langium\\n * Converted from mindmap grammar\\n *\\n * The ML_COMMENT and NL hidden terminals handle whitespace, comments, and newlines\\n * before the treemap keyword, allowing for empty lines and comments before the\\n * treemap declaration.\\n */"}`),"TreemapGrammar")
var op={languageId:"info",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1,mode:"production"};var ip={languageId:"packet",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1,mode:"production"};var sp={languageId:"pie",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1,mode:"production"};var lp={languageId:"architecture",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1,mode:"production"};var cp={languageId:"gitGraph",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1,mode:"production"};var up={languageId:"radar",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1,mode:"production"};var dp={languageId:"treemap",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1,mode:"production"};var pp={AstReflection:rd(()=>new Bd,"AstReflection")};var mp={Grammar:rd(()=>zd(),"Grammar"),LanguageMetaData:rd(()=>op,"LanguageMetaData"),parser:{}};var fp={Grammar:rd(()=>Xd(),"Grammar"),LanguageMetaData:rd(()=>ip,"LanguageMetaData"),parser:{}};var hp={Grammar:rd(()=>qd(),"Grammar"),LanguageMetaData:rd(()=>sp,"LanguageMetaData"),parser:{}};var _p={Grammar:rd(()=>Zd(),"Grammar"),LanguageMetaData:rd(()=>lp,"LanguageMetaData"),parser:{}};var gp={Grammar:rd(()=>ep(),"Grammar"),LanguageMetaData:rd(()=>cp,"LanguageMetaData"),parser:{}};var yp={Grammar:rd(()=>rp(),"Grammar"),LanguageMetaData:rd(()=>up,"LanguageMetaData"),parser:{}};var xp={Grammar:rd(()=>ap(),"Grammar"),LanguageMetaData:rd(()=>dp,"LanguageMetaData"),parser:{}};var Tp=/accDescr(?:[\t ]*:([^\n\r]*)|\s*{([^}]*)})/;var kp=/accTitle[\t ]*:([^\n\r]*)/;var vp=/title([\t ][^\n\r]*|)/;var Rp={ACC_DESCR:Tp,ACC_TITLE:kp,TITLE:vp};var Ap=(Yu=class extends DefaultValueConverter{runConverter(e,t,r){let n=this.runCommonConverter(e,t,r);if(n===void 0){n=this.runCustomConverter(e,t,r)}if(n===void 0){return super.runConverter(e,t,r)}return n}runCommonConverter(e,t,r){const n=Rp[e.name];if(n===void 0){return void 0}const a=n.exec(t);if(a===null){return void 0}if(a[1]!==void 0){return a[1].trim().replace(/[\t ]{2,}/gm," ")}if(a[2]!==void 0){return a[2].replace(/^\s*/gm,"").replace(/\s+$/gm,"").replace(/[\t ]{2,}/gm," ").replace(/[\n\r]{2,}/gm,"\n")}return void 0}},r(Yu,"AbstractMermaidValueConverter"),(()=>{rd(Yu,"AbstractMermaidValueConverter")})(),Yu);var Cp=(Zu=class extends Ap{runCustomConverter(e,t,r){return void 0}},r(Zu,"CommonValueConverter"),(()=>{rd(Zu,"CommonValueConverter")})(),Zu);var Ip=(Qu=class extends DefaultTokenBuilder{constructor(e){super();this.keywords=new Set(e)}buildKeywordTokens(e,t,r){const n=super.buildKeywordTokens(e,t,r);n.forEach(e=>{if(this.keywords.has(e.name)&&e.PATTERN!==void 0){e.PATTERN=new RegExp(e.PATTERN.toString()+"(?:(?=%%)|(?!\\S))")}});return n}},r(Qu,"AbstractMermaidTokenBuilder"),(()=>{rd(Qu,"AbstractMermaidTokenBuilder")})(),Qu);ed=class extends Ip{},r(ed,"CommonTokenBuilder"),(()=>{rd(ed,"CommonTokenBuilder")})(),ed;var Ep;var Sp=(Ep=class extends Ip{constructor(){super(["gitGraph"])}},r(Ep,"GitGraphTokenBuilder"),(()=>{rd(Ep,"GitGraphTokenBuilder")})(),Ep);var Pp={parser:{TokenBuilder:rd(()=>new Sp,"TokenBuilder"),ValueConverter:rd(()=>new Cp,"ValueConverter")}};function Np(e=Wu){const t=Gu(Mu(e),pp);const r=Gu(Du({shared:t}),gp,Pp);t.ServiceRegistry.register(r);return{shared:t,GitGraph:r}}rd(Np,"createGitGraphServices");var bp;var Op=(bp=class extends Ip{constructor(){super(["info","showInfo"])}},r(bp,"InfoTokenBuilder"),(()=>{rd(bp,"InfoTokenBuilder")})(),bp);var Lp={parser:{TokenBuilder:rd(()=>new Op,"TokenBuilder"),ValueConverter:rd(()=>new Cp,"ValueConverter")}};function wp(e=Wu){const t=Gu(Mu(e),pp);const r=Gu(Du({shared:t}),mp,Lp);t.ServiceRegistry.register(r);return{shared:t,Info:r}}rd(wp,"createInfoServices");var $p;var Dp=($p=class extends Ip{constructor(){super(["packet"])}},r($p,"PacketTokenBuilder"),(()=>{rd($p,"PacketTokenBuilder")})(),$p);var Mp={parser:{TokenBuilder:rd(()=>new Dp,"TokenBuilder"),ValueConverter:rd(()=>new Cp,"ValueConverter")}};function Fp(e=Wu){const t=Gu(Mu(e),pp);const r=Gu(Du({shared:t}),fp,Mp);t.ServiceRegistry.register(r);return{shared:t,Packet:r}}rd(Fp,"createPacketServices");var Gp,Kp;var Up=(Gp=class extends Ip{constructor(){super(["pie","showData"])}},r(Gp,"PieTokenBuilder"),(()=>{rd(Gp,"PieTokenBuilder")})(),Gp);var Vp=(Kp=class extends Ap{runCustomConverter(e,t,r){if(e.name!=="PIE_SECTION_LABEL"){return void 0}return t.replace(/"/g,"").trim()}},r(Kp,"PieValueConverter"),(()=>{rd(Kp,"PieValueConverter")})(),Kp);var Bp={parser:{TokenBuilder:rd(()=>new Up,"TokenBuilder"),ValueConverter:rd(()=>new Vp,"ValueConverter")}};function jp(e=Wu){const t=Gu(Mu(e),pp);const r=Gu(Du({shared:t}),hp,Bp);t.ServiceRegistry.register(r);return{shared:t,Pie:r}}rd(jp,"createPieServices");var Wp,zp;var Hp=(Wp=class extends Ip{constructor(){super(["architecture"])}},r(Wp,"ArchitectureTokenBuilder"),(()=>{rd(Wp,"ArchitectureTokenBuilder")})(),Wp);var Xp=(zp=class extends Ap{runCustomConverter(e,t,r){if(e.name==="ARCH_ICON"){return t.replace(/[()]/g,"").trim()}else if(e.name==="ARCH_TEXT_ICON"){return t.replace(/["()]/g,"")}else if(e.name==="ARCH_TITLE"){return t.replace(/[[\]]/g,"").trim()}return void 0}},r(zp,"ArchitectureValueConverter"),(()=>{rd(zp,"ArchitectureValueConverter")})(),zp);var Jp={parser:{TokenBuilder:rd(()=>new Hp,"TokenBuilder"),ValueConverter:rd(()=>new Xp,"ValueConverter")}};function qp(e=Wu){const t=Gu(Mu(e),pp);const r=Gu(Du({shared:t}),_p,Jp);t.ServiceRegistry.register(r);return{shared:t,Architecture:r}}rd(qp,"createArchitectureServices");var Yp;var Zp=(Yp=class extends Ip{constructor(){super(["radar-beta"])}},r(Yp,"RadarTokenBuilder"),(()=>{rd(Yp,"RadarTokenBuilder")})(),Yp);var Qp={parser:{TokenBuilder:rd(()=>new Zp,"TokenBuilder"),ValueConverter:rd(()=>new Cp,"ValueConverter")}};function em(e=Wu){const t=Gu(Mu(e),pp);const r=Gu(Du({shared:t}),yp,Qp);t.ServiceRegistry.register(r);return{shared:t,Radar:r}}rd(em,"createRadarServices");var tm,rm,nm;var am=(tm=class extends Ip{constructor(){super(["treemap"])}},r(tm,"TreemapTokenBuilder"),(()=>{rd(tm,"TreemapTokenBuilder")})(),tm);var om=/classDef\s+([A-Z_a-z]\w+)(?:\s+([^\n\r;]*))?;?/;var im=(rm=class extends Ap{runCustomConverter(e,t,r){if(e.name==="NUMBER2"){return parseFloat(t.replace(/,/g,""))}else if(e.name==="SEPARATOR"){return t.substring(1,t.length-1)}else if(e.name==="STRING2"){return t.substring(1,t.length-1)}else if(e.name==="INDENTATION"){return t.length}else if(e.name==="ClassDef"){if(typeof t!=="string"){return t}const e=om.exec(t);if(e){return{$type:"ClassDefStatement",className:e[1],styleText:e[2]||void 0}}}return void 0}},r(rm,"TreemapValueConverter"),(()=>{rd(rm,"TreemapValueConverter")})(),rm);function sm(e){const t=e.validation.TreemapValidator;const r=e.validation.ValidationRegistry;if(r){let e={Treemap:t.checkSingleRoot.bind(t)};r.register(e,t)}}rd(sm,"registerValidationChecks");var lm=(nm=class{checkSingleRoot(e,t){let r;for(const n of e.TreemapRows){if(!n.item){continue}if(r===void 0&&n.indent===void 0){r=0}else if(n.indent===void 0){t("error","Multiple root nodes are not allowed in a treemap.",{node:n,property:"item"})}else if(r!==void 0&&r>=parseInt(n.indent,10)){t("error","Multiple root nodes are not allowed in a treemap.",{node:n,property:"item"})}}}},r(nm,"TreemapValidator"),(()=>{rd(nm,"TreemapValidator")})(),nm);var cm={parser:{TokenBuilder:rd(()=>new am,"TokenBuilder"),ValueConverter:rd(()=>new im,"ValueConverter")},validation:{TreemapValidator:rd(()=>new lm,"TreemapValidator")}};function um(e=Wu){const t=Gu(Mu(e),pp);const r=Gu(Du({shared:t}),xp,cm);t.ServiceRegistry.register(r);sm(r);return{shared:t,Treemap:r}}rd(um,"createTreemapServices");var dm;var pm={};var mm={info:rd(async()=>{const{createInfoServices:e}=await n("d.js","c").then(function(){return n("c.js","b").then(function(){return n("s.js","r").then(function(){return n("t.js","s")})})});const t=e().Info.parser.LangiumParser;pm.info=t},"info"),packet:rd(async()=>{const{createPacketServices:e}=await n("d.js","c").then(function(){return n("c.js","b").then(function(){return n("s.js","r").then(function(){return n("u.js","t")})})});const t=e().Packet.parser.LangiumParser;pm.packet=t},"packet"),pie:rd(async()=>{const{createPieServices:e}=await n("d.js","c").then(function(){return n("c.js","b").then(function(){return n("s.js","r").then(function(){return n("v.js","u")})})});const t=e().Pie.parser.LangiumParser;pm.pie=t},"pie"),architecture:rd(async()=>{const{createArchitectureServices:e}=await n("d.js","c").then(function(){return n("c.js","b").then(function(){return n("s.js","r").then(function(){return n("w.js","v")})})});const t=e().Architecture.parser.LangiumParser;pm.architecture=t},"architecture"),gitGraph:rd(async()=>{const{createGitGraphServices:e}=await n("d.js","c").then(function(){return n("c.js","b").then(function(){return n("s.js","r").then(function(){return n("x.js","w")})})});const t=e().GitGraph.parser.LangiumParser;pm.gitGraph=t},"gitGraph"),radar:rd(async()=>{const{createRadarServices:e}=await n("d.js","c").then(function(){return n("c.js","b").then(function(){return n("s.js","r").then(function(){return n("y.js","x")})})});const t=e().Radar.parser.LangiumParser;pm.radar=t},"radar"),treemap:rd(async()=>{const{createTreemapServices:e}=await n("d.js","c").then(function(){return n("c.js","b").then(function(){return n("s.js","r").then(function(){return n("z.js","y")})})});const t=e().Treemap.parser.LangiumParser;pm.treemap=t},"treemap")};async function fm(e,t){const r=mm[e];if(!r){throw new Error(`Unknown diagram type: ${e}`)}pm[e]||await r();const n=pm[e];const a=n.parse(t);if(a.lexerErrors.length>0||a.parserErrors.length>0){throw new hm(a)}return a.value}rd(fm,"parse");var hm=(dm=class extends Error{constructor(e){const t=e.lexerErrors.map(e=>e.message).join("\n");const r=e.parserErrors.map(e=>e.message).join("\n");super(`Parsing failed: ${t} ${r}`);this.result=e}},r(dm,"MermaidParseError"),(()=>{rd(dm,"MermaidParseError")})(),dm);__bbb.jd=fm;__bbb.r=undefined}).call(this)